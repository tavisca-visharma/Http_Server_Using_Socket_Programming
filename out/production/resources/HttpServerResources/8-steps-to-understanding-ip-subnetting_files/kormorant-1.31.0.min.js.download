"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(window,document){var BASE_APP_SCOPE=BASE_APP_SCOPE||"VM";window[BASE_APP_SCOPE]=window[BASE_APP_SCOPE]||{},window[BASE_APP_SCOPE].initialise=function(n){var r=client.Utils(),e=constants.ProductMap(),t=constants.CompatibilityRules(r),i=(n=client.Config(n,r,t)).apiVersions;client.PubXBuilder(n);var a=client.debugLog(n,i);window[BASE_APP_SCOPE].debugLog=a;var o=client.Events(r),s=client.AppChannel(o),c=client.AdsMonitor(s,a),d=client.Dom(window,document,o,r),l=gdpr.consent(window,d,n,a),u=client.Cookie(document,n),p=dmp.audience(window,d,n,l),h=bidding.Mediator(window,document,n,r,d,s,e,a),g=client.Api(window,i,n,d,o,r,c,h,p),v=client.Log(i,n,d,r,g,s,a),f=client.CookieSync(i,n,d,r,v,g,l),m=client.AdFetcher(g,s,r,n,e,d),y=client.PubX(v),w=client.Page(g,n,r,s),b=client.Net(window,BASE_APP_SCOPE,d,o,r),k=client.Tracking(n,b,r,v,s,l),C=client.Waterfall(window,document,n,r,v),E=dmp.collection(window,document,g,n,s,r,b,a,l);client.CmdMessenger(g,s,r,n,e,d,v,a);var I,x,A,D,S,N,O,B,T,P,L,H,_,V,U=(I=adunit.Template(b,r),x=adunit.Decoration(window,document,n,o,d,r,v),{template:I,creative:adunit.Creative(o,r),position:adunit.Position(window,document,d,o,r,s),adunit:adunit.AdUnit(window,d,o,I,v,r,a,n),videounit:adunit.VideoUnit(window,document,n,d,o,v,r),cpeunit:adunit.CPEUnit(window,n,d,o,v,r,adunit.VideoUnit),customunit:adunit.CustomUnit(window,n,d,o,v,r,adunit.VideoUnit,x),decoration:x}),F={waterfall:creative.Waterfall({standard:creative.Standard(U.creative,o,v,r,U.decoration),c2s:creative.C2S(U.creative,d,o,v),banner:creative.Banner(U.creative,d,v,r,n,h,a,U.decoration),video:creative.Video(U.creative,U.videounit,o,v),cpe:creative.CPE(U.creative,U.cpeunit,o,v),custom:creative.Custom(U.creative,U.customunit,o,v)})},M={hook:pagecontent.Hook(document,n,d,o,r,e,v),image:pagecontent.Image(d,o,r,n),paragraph:pagecontent.Paragraph(d,r),simpleElement:pagecontent.SimpleElement(d,r),textNode:pagecontent.TextNode(document,r)},R=client.ContentMonitor(m,n,d,M.image,v,w,M.textNode,r,E),W={Adhesion:trigger.Adhesion(o),Image:trigger.Image(o,r),Gallery:trigger.Gallery(window,n,o,r,d,M.image,m),ParagraphBreak:trigger.ParagraphBreak(M.paragraph,o,C),SimpleElement:trigger.SimpleElement(M.simpleElement,o,C),TextNode:trigger.TextNode(n,d,o,r),Scroll:trigger.Scroll(s,d,o),Resize:trigger.Resize(s,o,r),Gesture:trigger.Gesture(s,o,d,r)},z=(H=behaviour.AutoReveal(n,r,u,s),_=M.hook,V=M.textNode,{AdhesionPlacement:behaviour.AdhesionPlacement(U,n,F,d,o,v,k,r),AdhesionBackfill:behaviour.AdhesionBackfill(m,d,o,r,n),AdBarLegacy:behaviour.AdBarLegacy(window,n,d),AdBar:behaviour.AdBar(m,U,n,F,o,v,k),AutoReveal:H,ScriptsLoader:behaviour.ScriptsLoader(n,r),DropInPlacement:behaviour.DropInPlacement(U,n,F,o,v,k),InView:(L=behaviour.inview.Filter(n,r,d),behaviour.inview.Behaviour(window,U,n,F,u,d,o,v,k,r,s,L,m)),InStory:(T=behaviour.instory.Filter(n,r,d),P=behaviour.instory.PrefilterNodes(n,r,d),behaviour.instory.Behaviour(window,U,n,F,u,d,o,v,k,r,s,T,P)),Daw:behaviour.Daw(m,U,n,F,o,v,k),Image:(O=behaviour.image.Deviations(n,r),B=behaviour.image.Position(document,d,r,O),behaviour.image.Behaviour(m,U,n,F,d,o,v,k,B,r,s)),Gallery:behaviour.image.Gallery(o),Inline:behaviour.Inline(m,U,n,F,o,v,k,C),Tooltip:behaviour.Tooltip(window,U,n,F,d,o,v,r,k,s,m),Hook:(A=behaviour.hook.NodeFilter(n,r,d),D=behaviour.hook.Mediator(r,A),S=behaviour.hook.AdAssign(r,v,_,V,D),N=behaviour.hook.HookAdFetcher(m,o,r,e,S,_,H),behaviour.hook.Behaviour(n,r,V,A,N,D,d)),VibrantView:behaviour.VibrantView(n,u,o,r),Wordflip:behaviour.Wordflip(window,document,n,r,d,o,_,s)});s.once(client.app.main.initialise,function(e){var t,i;e.data.pubXReached&&y.set(n.getInteger("partner.pubx.action",client.PubX.ALLOW_ALL)),t=platform[n.get("platform")],i=t(z,n,y,W,M.hook,r,U).initialise(),r.forEach(n.getArray("partner.products"),function(e){i&&i.hasOwnProperty(e)&&!C.isBlocked(e)&&i[e](s,e)})}),function(){l.init();var e=n.get("partner.rundelay",0),t=n.get("partner.hook.style.custom",null),i=n.cdn.kormorantcss.replace("{{version}}",n.version);h.init(v),p.runAudienceExtraction(),f.sync(),f.syncConsent(),d.appendStyleSheet("//"+i),t&&d.appendInlineStyle(t);var o=function(){d.waitForReadyState(function(){R.run(s);var e=document.referrer;""===e?a.warn("Client warning: Document referrer is empty"):function(e){var t=e.indexOf("://");-1===t?t=0:t+=3;var i=e.length;return"/"===e.substring(i-2)&&i--,-1===e.substring(t,i).indexOf("/")}(e)&&a.warn("Client warning: Document referrer is a base URL: "+e),v.pageTracking({referrer:r.Base64.encodeURI(document.referrer)})})};0<e?window.setTimeout(o,e):o()}()};var adunit=adunit||{};adunit.AdUnit=function(c,d,l,o,u,n,r,p){var a={LOAD:"load",LOADED:"loaded",OPEN:"open",OPENING:"opening",OPENED:"opened",CONTROLLEDOPEN:"adunit:controlledopen",DELAYED_LOAD:"adunit:delayed_load",SLIDINGOPEN:"slidingopen",SLIDINGOPENED:"slidingopened",CLICK:"adunit:click",CLOSE:"close",CLOSING:"closing",CLOSED:"closed",SHOW:"show",HIDE:"hide",RENDER:"render",RENDERING:"rendering",RENDERED:"rendered",SCHEDULE_CLOSE:"scheduleClose",MOUSEIN:"adunit:mousein",MOUSEOUT:"adunit:mouseout",DELEGATE:"delegate"},s={CLOSED:0,CLOSING:1,OPENING:2,OPEN:3},e=".vm-adunit-body",h=1,g=function(e,t,i){o.load(e,t,i)},v=3e3;function t(e){l.Observable.call(this),this.id=h++,this.product=e.product,this.settings=e.settings,this.templateSettings=e.templateSettings,this.closeDelay=e.closeDelay||v,this.renderOptions=e.renderOptions,this.delayLoad=!!e.delayLoad;var t=(e.settings||{}).ads?((e.settings.ads[0]||{}).creative||{}).diyValues:{},i=(e.settings||{}).ads?((e.settings.ads[0]||{}).creative||{}).setValues:{},o=(e.settings||{}).ads?(((e.settings.ads[0]||{}).creative||{}).payload||{}).params:{};this.mergedCreativeParams=n.extend({},t||{},i||{},o||{}),this.creativeLoad=e.creativeLoad,this.templateLoad=e.templateLoad||g,this.render=e.render,this.open=e.open,this.close=e.close,this.body=null,this.status=s.CLOSED,this.openCount=0,this.openTime=null,this.scheduledClose=!1,this.closeTimer=null,this.on(a.OPEN,function(e){this.status===s.CLOSING?this.once(a.CLOSED,this._open,this):this._open(e)},this),this.on(a.CLOSE,this._close,this),this.on(a.RENDER,this._render,this),this.on(a.SCHEDULE_CLOSE,this._scheduleClose,this),this.on(a.SHOW,this.show,this),this.on(a.HIDE,this.hide,this)}return(t.prototype=new l.Observable).EVENT_MOUSEIN=a.MOUSEIN,t.prototype.EVENT_MOUSEOUT=a.MOUSEOUT,t.prototype.EVENT_CLICK=a.CLICK,t.prototype.EVENT_OPENED=a.OPENED,t.prototype.EVENT_CLOSED=a.CLOSED,t.prototype.EVENT_DELEGATE=a.DELEGATE,t.prototype.CONTROLLED_OPEN=a.CONTROLLEDOPEN,t.prototype.DELAYED_LOAD=a.DELAYED_LOAD,t.prototype.getAdConfig=function(){return this.settings},t.prototype.getAd=function(){return this.getAdConfig().ads[0]},t.prototype.getAdTemplate=function(){return this.template},t.prototype.getTemplateParams=function(){var e=this.getAdTemplate();return e?e.params:null},t.prototype.getTemplateHookParams=function(){var e=this.getAdTemplate();return e?e.hook:null},t.prototype.getDiyValues=function(){return this.getAd().creative.diyValues||{}},t.prototype.getMergedCreativeParams=function(){return this.mergedCreativeParams||{}},t.prototype.getPosition=function(){return d.getPosition(this.outerBox)},t.prototype.getWidth=function(){return this.creative.getWidth()},t.prototype.getHeight=function(){return this.creative.getHeight()},t.prototype.getClickDelay=function(){var e=this.getDiyValues();return e.clickdelay&&parseInt(e.clickdelay,10)||0},t.prototype.getBodyContainer=function(){return this.outerBox?this.outerBox.querySelector(e):null},t.prototype.saveValuesToCache=function(e,t,i){this.adUnitCache={top:parseFloat(e),width:parseFloat(t),height:parseFloat(i)}},t.prototype.resetSize=function(){var e=this.getBodyContainer(),t=this.outerBox,i=t.getElementsByTagName("iframe")[0];this.specsForExpand.reset?t.style.top=this.specsForExpand.reset+"px":t.style.top=this.adUnitCache.top+"px",e.style.height=this.adUnitCache.height+"px",i.style.cssText="position: relative; width:"+this.adUnitCache.width+"px; height: "+this.adUnitCache.height+"px;",i.height=this.adUnitCache.height+"",i.width=this.adUnitCache.width+"",this.specsForExpand.expanded=!1},t.prototype.resizeImageAd=function(){var e=this.visibleRect.height,t=this.visibleRect.width,i=this.getBodyContainer(),o=this.outerBox,n=o.getElementsByTagName("iframe")[0];this.saveValuesToCache(o.style.top,n.width,n.height),this.specsForExpand={expanded:!0,topForExpanded:e-this.adUnitCache.height},o.style.top=this.adUnitCache.top-(e-this.adUnitCache.height)+"px",i.style.height=e+"px",n.style.cssText="position: relative; width:"+t+"px; height: "+e+"px;",n.height=e+"",n.width=t+""},t.prototype.resizeIframe=function(e,t,i){var o=e||this.visibleRect.width,n=t||this.visibleRect.height,r=this.getBodyContainer(),a=this.outerBox,s=a.getElementsByTagName("iframe")[0];i&&(this.saveValuesToCache(a.style.top,s.width,s.height),this.specsForExpand={expanded:!0,topForExpanded:n-this.adUnitCache.height},a.style.top=this.adUnitCache.top-(n-this.adUnitCache.height)+"px"),r.style.height=n+"px",s.style.cssText="position: relative; width:"+o+"px; height: "+n+"px;",s.height=n+"",s.width=o+""},t.prototype.getOpenCount=function(){return this.openCount},t.prototype.isOpen=function(){return this.status===s.OPEN||this.status===s.OPENING},t.prototype.isReady=function(){return this.status===s.OPEN},t.prototype.isResponsive=function(){return!!(this.template&&this.template.params&&this.template.params.responsive)&&1===parseInt(this.template.params.responsive,10)},t.prototype.isInViewport=function(){return d.isInViewport(this.outerBox)},t.prototype.cancelScheduledClose=function(){this.closeTimer&&(c.clearTimeout(this.closeTimer),this.closeTimer=null),this.scheduledClose=!1},t.prototype._render=function(){var t=this;this.fire(a.RENDERING),this.render(this,function(e){e||t.fire(a.RENDERED)})},t.prototype._open=function(e){var i=isNaN(e.data)?client.Log.viewSource.LOAD:e.data,o=this;this.status===s.CLOSED&&(this.status=s.OPENING,this.fire(a.OPENING),this.once(a.LOADED,function(e){var t=e.data;t?(o.body=t,o.once(a.RENDERED,function(){o.open(o,i,function(e){e||(o.status=s.OPEN,o.openTime=+new Date,++o.openCount,o.registerEngagement(i),o.fire(a.OPENED,i))})}),o.fire(a.RENDER)):o.status=s.CLOSED}),this.creative?this.creative.fire(a.LOAD,this.template):this.templateLoad(this.templateSettings,this.settings,function(e,t){o.template=t,o.creative=o.creativeLoad(o),o.creative?(o.creative.connect(a.LOADED,o),o.creative.connect(a.LOAD,o),o.creative.fire(a.LOAD,t)):r.warn("Adinstance open: Failed to create creative")}))},t.prototype._close=function(e){var t=isNaN(e.data)?client.Log.closeSource.AUTO:e.data,i=this;this.status===s.OPEN&&(this.status=s.CLOSING,this.fire(a.CLOSING),this.close(this,t,function(e){e||(i.status=s.CLOSED,i.openTime=null,i.fire(a.CLOSED,t))}),this.cancelScheduledClose())},t.prototype.registerEngagement=function(e){var s=this,t=(this.settings||{}).ads?(((this.settings.ads[0]||{}).creative||{}).diyValues||{}).iframe:void 0,i=this.mergedCreativeParams||{};if(t){var o=(((this.settings.ads[0]||{}).creative||{}).payload||{}).id;u.engagement({product:this.product,hookId:this.settings.vibrantParameters.hookId,source:e,creativeId:o})}t&&!i.disableBannerClickLogging&&function(){var n=!1,r=!1;if(this.outerBox){var a=this.outerBox.id;l.bind(this.outerBox,"mouseenter",function(){n=!0}),l.bind(this.outerBox,"mouseleave",function(){n=!1}),c.addEventListener("blur",function e(){for(var t=document.querySelectorAll(":hover"),i=0;i<t.length;i++)t[i].id===a&&(r=!0);if(n&&r){var o={product:s.product,hookId:s.settings.vibrantParameters.hookId,setId:s.settings.vibrantParameters.setId,keyword:encodeURIComponent(s.settings.term&&s.settings.term.keyword||""),source:101,timestamp:Date.now()};u.clickThrough(o,!0),c.removeEventListener("blur",e)}})}}.bind(this)()},t.prototype._scheduleClose=function(e){var t=e.data,i=this;function o(){i.closeTimer=c.setTimeout(function(){i.fire(a.CLOSE,t)},i.closeDelay)}switch(this.cancelScheduledClose(),this.status){case s.OPEN:o(),this.scheduledClose=!0;break;case s.OPENING:this.once(a.OPENED,function(){i.scheduledClose&&o()}),this.scheduledClose=!0}},t.prototype.scaleToFit=function(e){var t=p.getBoolean("partner."+this.product+".scaletofit",!0),i=this.getHeight(),o=this.getWidth();if(t&&e&&o&&i&&!(o<=e)){var n=e/o,r=Math.floor(o*n),a=Math.floor(i*n),s=this.getBodyContainer();s&&(d.transformOrigin(s,"top left"),d.transformScale(s,n,n),s.style.height=a+"px",s.style.width=r+"px",this.creative.height=a,this.creative.width=r)}},t.prototype.show=function(){this.outerBox&&(this.outerBox.style.visibility="visible")},t.prototype.hide=function(){this.outerBox&&(this.outerBox.style.visibility="hidden")},{AdInstance:t,create:function(e){return new t(e)}}};var adunit=adunit||{};adunit.CPEUnit=function(e,v,o,d,f,l,n){var u,p,m,y,w;function t(e,t,i){return e.VM=e.VM||{},new n(e,t,v,o,d,f,l,i)}function b(e){return{config:v,dom:o,events:d,log:f,utils:l,adInstance:e.adInstance,template:e.templateData,videoplayer:t}}return{load:function(n,e){var h,g,r,a;y=function(a,s,i,c){var r={WIDTH:150,ADHESION_WIDTH:320,ADHESION_HEIGHT:50,INTEXT_HEIGHT:35,IMAGE_HEIGHT:70,INVIEW_HEIGHT:100};function d(e,t,i){s.Observable.call(this);var o=this;this.options=e,this.adInstance=e.adInstance,this.launchCallback=i,this.product=e.adInstance.product,this.wrapper=document.createElement("wrapper"),this.wrapper.className="vm_creativeComponents_progressWrapper",this.width=e.width,this.height=e.height,"image"!==this.product&&"inview"!==this.product||(this.width=this.adInstance.settings.container.width,"image"===this.product&&e.scaleToHeight&&(this.height=this.adInstance.settings.container.height)),this.adInstanceSetup(),this.channelEvents(),setTimeout(function(){t({element:o.wrapper,width:o.width,height:o.height})},1)}return(d.prototype=new s.Observable).channelEvents=function(){var t=this.options.api.channel,e=c.events.mouse,i=c.events.adunit,o=a.debounce(function(){t.fire("start")},150),n=a.debounce(function(){t.fire("stop")},150),r=a.debounce(function(e){e instanceof Event?s.stopPropagation(e):e&&e.event instanceof Event&&s.stopPropagation(e.event),t.fire("click")},150);"intext"===this.product&&this.adInstance.on(i.open,o),this.adInstance.on(i.close,n),this.adInstance.on(e.in,o),this.adInstance.on(e.out,n),this.adInstance.on("delegate",function(e){"hover"===e.data.triggerSource?o():"click"===e.data.triggerSource&&r()}),this.adInstance.connect(e.adClick,this,e.click),this.on(e.click,r)},d.prototype.adInstanceSetup=function(){var t=this,e=this.options.api.channel;this.adInstance.on("opened",function(){e.on("launch",function(e){t.launchCallback(e.data.source)}),t.progressFrame=i.nativeIframe({className:"vm_creativeComponents_progressBar",width:t.width,height:t.height,creative:t.options.progressCreative,api:t.options.api}),t.wrapper.appendChild(t.progressFrame)}),this.adInstance.on("closed",function(){t.options.api.channel.unbindAll(),t.progressFrame.parentNode.removeChild(t.progressFrame)})},{create:function(e,t,i){var o=e.params,n=e.adInstance.product;return e.api.channel=new s.Observable,e.width="adhesion"===n?r.ADHESION_WIDTH:parseInt(o.intextBarWidth,10)||r.WIDTH,e.height=parseInt(o[n+"BarHeight"],10)||r[n.toUpperCase()+"_HEIGHT"],e.scaleToHeight=o.imageScaleToHeight||!1,e.decoration=a.extend({},{type:"cpeProgressBar",settings:{}},e.params.decoration),new d(e,t,i)},Progress:d}}(h=l,g=d,p={nativeIframe:function(e){var t,i=document.createElement("iframe");i.className=e.className||"vm_creativeComponents_iframe",i.width=e.width||"100%",i.height=e.height||"100%",i.frameBorder=0,i.scrolling="no";var o=e.api.adInstance,n=e.api.template,r=o.getAd(),a=o.getAdConfig(),s=h.extend({},{product:o.product,hookId:a.vibrantParameters.hookId,setId:a.vibrantParameters.setId,keyword:encodeURIComponent(a.term&&a.term.keyword||""),timestamp:+new Date,clickUrl:r.clickUrl,source:client.Log.clickSource.AD},r.creative.diyValues||{});o.mergedCreativeParams=h.extend({},r.creative.diyValues||{},r.creative.setValues||{},n.params);var c=h.extend({},o.mergedCreativeParams,{clickUrl:f.getUrl("clickThrough",s)});if(e.api.template.params.customSrc&&"vm_TakeOver_Wrapper"===e.className){var d={};v.apiHost&&(d.apiHost=encodeURIComponent(v.apiHost));var l=v.get("cdn.videoplayerjs",null);l&&(d.videoPlayerUrl=l),v.ipid&&(d.ipid=v.ipid),v.urlHash&&(d.urlHash=v.urlHash),v.pvu&&(d.pvu=v.pvu);var u=h.parseQueryString(c.customSrc);h.extend(u.params,d,c);var p=u.url+"?"+h.toQueryString(u.params);i.src=p}else t=g.bind(i,"load",h.once(function(){t(),i.contentWindow.contents=e.creative,i.creativeAPI=e.api||{},i.src="javascript:decodeURIComponent(window['contents'])"}));return i}},u={logEvents:{progressBar:{start:1,stop:2,fin:3,click:4},cpe:{click:1,close:2},launchSource:{progressBar:1,dropin:2}},events:{adunit:{open:"opened",close:"closed"},cpe:{started:"cpe:started",engagement:"engagement",destroyed:"cpe:destroyed",clickThrough:"cpe:clickThrough"},mouse:{in:"adunit:mousein",out:"adunit:mouseout",adClick:"adunit:click",click:"click"}},progressCreative:"%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Cstyle%3Ebody%7Bmargin%3A0%7Diframe%7Bz-index%3A-1%3Bposition%3Aabsolute%7D.VM_progressArea%7Bposition%3Arelative%3Bcursor%3Apointer%7D.VM_progressComponents%7Bposition%3Aabsolute%3Bwidth%3Ainherit%3Bbottom%3A15px%7D.VM_progressWrapper%7Bposition%3Aabsolute%3Bheight%3A5px%3Bwidth%3A130px%3Bmargin%3Aauto%3Bbottom%3A5px%3Bright%3A2px%3Bleft%3A0%3Bcolor%3A%23090%3Bpadding-top%3A5px%3Bpadding-bottom%3A5px%7D.VM_progressContainer%7Bdisplay%3Ablock%3Bwidth%3A100%25%3Bheight%3A5px%3Bborder%3Asolid%201px%3Bborder-radius%3A25px%3B-moz-border-radius%3A25px%3B-webkit-border-radius%3A25px%3B-o-border-radius%3A25px%7D.VM_progressImage%7Bposition%3Aabsolute%3Bbottom%3A20px%3Bwidth%3Aauto%3Bheight%3Aauto%3Bmargin-left%3Aauto%3Bmargin-right%3Aauto%3Bdisplay%3Ablock%7D.VM_progressText%7Bfont-size%3A10px%3Bfont-family%3AVerdana%2Carial%2Csans-serif%3Bcolor%3A%23333%3Btext-align%3Acenter%7D.VM_progressBackground%7Bposition%3Aabsolute%3Bwidth%3Ainherit%3Bheight%3A35px%3Bbottom%3A-15px%3Bbackground-color%3A%23F0F0F0%3Bopacity%3A.8%3Bz-index%3A-1%3Bborder-radius%3A5px%3B-webkit-border-radius%3A5px%3B-o-border-radius%3A5px%3B-moz-border-radius%3A5px%7D.VM_progressBar%7Bbackground%3A%23090%3Boverflow%3Ahidden%3Bwidth%3A0%3Bheight%3Ainherit%7D.VM_progressArea_image%7Bposition%3Aabsolute%3Bz-index%3A500%3Bcursor%3Apointer%3Bvisibility%3Ahidden%7D.VM_progressBackground_image%7Bposition%3Aabsolute%3Bwidth%3Ainherit%3Bbottom%3A-15px%3Bbackground-color%3A%23F0F0F0%3Bopacity%3A.8%3Bz-index%3A-1%7D.VM_progressWrapper_image%7Bposition%3Aabsolute%3Bheight%3A15px%3Bwidth%3A130px%3Bmargin%3Aauto%3Bbottom%3A0%3Btop%3A0%3Bright%3A2px%3Bleft%3A0%3Bcolor%3A%23090%3Bpadding-top%3A5px%3Bpadding-bottom%3A5px%7D.VM_progressWrapper_inview%7Bposition%3Aabsolute%3Bheight%3A5px%3Bwidth%3A130px%3Bmargin%3Aauto%3Bbottom%3A0%3Btop%3A0%3Bright%3A2px%3Bleft%3A0%3Bcolor%3A%23090%3Bpadding-top%3A5px%3Bpadding-bottom%3A5px%7D.image-adchoice%2C.image-close%7Bposition%3Aabsolute%3Bright%3A0%3Bwidth%3A18px%3Bheight%3A18px%3Bcursor%3Apointer%3Bz-index%3A2147483646%3Bvisibility%3Avisible%7D.image-close%7Bbackground-image%3Aurl(https%3A%2F%2Fimages.intellitxt.com%2Fast%2F4c58aae9-0570-dc11-96c8-005056c00008%2Fvmxt47032%2Fclose-btn-18px.png)%3Bbottom%3A18px%7D.image-adchoice%7Bbackground-image%3Aurl(https%3A%2F%2Fimages.intellitxt.com%2Fast%2F4c58aae9-0570-dc11-96c8-005056c00008%2Fvmxt47032%2Fadchoice-btn-18px.png)%3Bbottom%3A0%7D%3C%2Fstyle%3E%0A%3C%2Fhead%3E%0A%0A%3Cbody%3E%0A%0A%20%20%20%20%3Cscript%3E%22use%20strict%22%3Bfunction%20decoration()%7Bfunction%20e(e%2Ca)%7Bvar%20n%3Ddocument.createElement(%22div%22)%2Co%3Dt%5Be%5D%2Cd%3Da.adInstance%2Cc%3Dd.outerBox.querySelector(%22.vm-adunit-body%22)%3Bif(c%26%26(c.style.backgroundColor%3D%22transparent%22)%2C%22intext%22%3D%3D%3De%26%26a.image%26%26o.splice(s%2C0%2C'%3Cimg%20id%3D%22VM_progressImage_%7Bid%7D%22%20class%3D%22VM_progressImage%22%20%20src%3D%22%7Bimage%7D%22%20%2F%3E')%2Cn.innerHTML%3Do.join(%22%5Cn%22).replace(%2F%5C%7Bid%5C%7D%2Fg%2Cd.id).replace(%2F%5C%7Bimage%5C%7D%2Fg%2Ca.image).replace(%2F%5C%7Btext%5C%7D%2Fg%2Ca.text).replace(%2F%5C%7Bheight%5C%7D%2Fg%2Ci).replace(%2F%5C%7Bwidth%5C%7D%2Fg%2Cr)%2Cn.className%3D%22VM_progressBarWrapper_%22%2Be%2Cn.style.width%3D%22100%25%22%2Cn.style.height%3Di%2B%22px%22%2C%22image%22%3D%3D%3De%7C%7C%22inview%22%3D%3D%3De)%7Bvar%20p%3Ddocument.createElement(%22iframe%22)%3Bp.className%3D%22VM_progressImageBar%22%2Cp.src%3Dparams%5Be%2B%22BarCreative%22%5D%2Cp.width%3D%22100%25%22%2Cp.height%3D%22100%25%22%2Cp.scrolling%3D%22no%22%2Cp.frameBorder%3D%220%22%2Cn.appendChild(p)%7Dreturn%20n%7Dvar%20r%3Dwindow.innerWidth%2Ci%3Dwindow.innerHeight%2Cs%3D2%2Ct%3D%7Bintext%3A%5B'%3Cdiv%20id%3D%22VM_progressArea_%7Bid%7D%22%20class%3D%22VM_progressArea%22%20style%3D%22width%3A%7Bwidth%7Dpx%3Bheight%3A%7Bheight%7Dpx%3B%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressComponents_%7Bid%7D%22%20class%3D%22VM_progressComponents%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressText_%7Bid%7D%22%20class%3D%22VM_progressText%22%3E%7Btext%7D%3C%2Fdiv%3E'%2C'%3Cdiv%20id%3D%22VM_progressBackground_%7Bid%7D%22%20class%3D%22VM_progressBackground%22%3E%3C%2Fdiv%3E'%2C%22%3C%2Fdiv%3E%22%2C'%3Cdiv%20id%3D%22VM_progressWrapper_%7Bid%7D%22%20class%3D%22VM_progressWrapper%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressContainer_%7Bid%7D%22%20class%3D%22VM_progressContainer%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressBar_%7Bid%7D%22%20class%3D%22VM_progressBar%22%3E%3C%2Fdiv%3E'%2C%22%3C%2Fdiv%3E%22%2C%22%3C%2Fdiv%3E%22%2C%22%3C%2Fdiv%3E%22%5D%2Cimage%3A%5B'%3Cdiv%20id%3D%22VM_progressArea_%7Bid%7D%22%20class%3D%22VM_progressArea_image%22%20style%3D%22width%3A%7Bwidth%7Dpx%3Bheight%3A%7Bheight%7Dpx%3B%22%3E'%2C'%3Cdiv%20class%3D%22image-close%22%3E%3C%2Fdiv%3E'%2C'%3Cdiv%20class%3D%22image-adchoice%22%3E%3C%2Fdiv%3E'%2C'%3Cdiv%20id%3D%22VM_progressComponents_%7Bid%7D%22%20class%3D%22VM_progressComponents%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressBackground_%7Bid%7D%22%20class%3D%22VM_progressBackground_image%22%20style%3D%22height%3A%7Bheight%7Dpx%3B%22%3E%3C%2Fdiv%3E'%2C%22%3C%2Fdiv%3E%22%2C'%3Cdiv%20id%3D%22VM_progressWrapper_%7Bid%7D%22%20class%3D%22VM_progressWrapper_image%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressText_%7Bid%7D%22%20class%3D%22VM_progressText%22%3E%7Btext%7D%3C%2Fdiv%3E'%2C'%3Cdiv%20id%3D%22VM_progressContainer_%7Bid%7D%22%20class%3D%22VM_progressContainer%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressBar_%7Bid%7D%22%20class%3D%22VM_progressBar%22%3E%3C%2Fdiv%3E'%2C%22%3C%2Fdiv%3E%22%2C%22%3C%2Fdiv%3E%22%2C%22%3C%2Fdiv%3E%22%5D%2Cinview%3A%5B'%3Cdiv%20id%3D%22VM_progressArea_%7Bid%7D%22%20class%3D%22VM_progressArea_image%22%20style%3D%22width%3A%7Bwidth%7Dpx%3Bheight%3A%7Bheight%7Dpx%3B%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressComponents_%7Bid%7D%22%20class%3D%22VM_progressComponents%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressBackground_%7Bid%7D%22%20class%3D%22VM_progressBackground_image%22%20style%3D%22height%3A%7Bheight%7Dpx%3B%22%3E%3C%2Fdiv%3E'%2C%22%3C%2Fdiv%3E%22%2C'%3Cdiv%20id%3D%22VM_progressWrapper_%7Bid%7D%22%20class%3D%22VM_progressWrapper_image%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressText_%7Bid%7D%22%20class%3D%22VM_progressText%22%3E%7Btext%7D%3C%2Fdiv%3E'%2C'%3Cdiv%20id%3D%22VM_progressContainer_%7Bid%7D%22%20class%3D%22VM_progressContainer%22%3E'%2C'%3Cdiv%20id%3D%22VM_progressBar_%7Bid%7D%22%20class%3D%22VM_progressBar%22%3E%3C%2Fdiv%3E'%2C%22%3C%2Fdiv%3E%22%2C%22%3C%2Fdiv%3E%22%2C%22%3C%2Fdiv%3E%22%5D%7D%3Breturn%7Bdecorate%3Ae%7D%7Dfunction%20progress()%7Bfunction%20e(e)%7Bthis.time%3De.time%2Cthis.animating%3D!1%2Cthis.adInstance%3De.adInstance%2Cthis.product%3Dthis.adInstance.product%2Cthis.unit%3De.unit%2Cthis.progressArea%3Dthis.unit.querySelector(%22.VM_progressArea%22)%2Cthis.progressBar%3Dthis.unit.querySelector(%22.VM_progressBar%22)%2Cthis._handleEvents()%2Cdocument.body.appendChild(this.unit)%7Dfunction%20r(r)%7Breturn%20new%20e(r)%7Dvar%20i%3D16.66%2Cs%3D0%2Ct%3D100%2Ca%3D250%2Cn%3D%22http%3A%2F%2Fwww.vibrantmedia.com%2FwhatisIntelliTXT.asp%22%3Breturn%20e.prototype%3Dnew%20creativeAPI.events.Observable%2Ce.prototype.animate%3Dfunction()%7Bfunction%20e()%7Bvar%20a%3D(new%20Date).getTime()%2Cn%3DMath.round((a-s)%2Fr.time*100)%2Co%3Dr.progressBar.style.width%3Dn%2B%22%25%22%3Br.allowProgress%26%26parseInt(o%2C10)%3C%3Dt%3F(r.animating%3D!0%2CsetTimeout(e%2Ci))%3Ar.allowProgress%3F(r.allowProgress%3D!1%2Cr.animating%3D!1%2Cr.fire(%22progFin%22))%3Ar.animating%3D!1%7Dif(this.animating)return!1%3Bvar%20r%3Dthis%2Cs%3D(new%20Date).getTime()%3Be()%7D%2Ce.prototype.start%3Dfunction()%7Bthis.resetDelay%26%26clearTimeout(this.resetDelay)%2Cthis.allowProgress%3D!0%2Cthis.animate()%7D%2Ce.prototype.stop%3Dfunction()%7Bvar%20e%3Dthis%3Bthis.allowProgress%3D!1%2Cthis.resetDelay%3DsetTimeout(function()%7Be.reset()%7D%2Ca)%7D%2Ce.prototype.reset%3Dfunction()%7Bthis.progressBar.style.width%3Ds%2B%22%25%22%7D%2Ce.prototype._handleEvents%3Dfunction()%7Bfunction%20e(e)%7Blog.progressBar(%7Bproduct%3Ai.adInstance.product%2Cevent%3Ae%2ChookId%3Ai.adInstance.settings.vibrantParameters.hookId%7C%7C0%2CcreativeId%3Ai.adInstance.settings.ads%5B0%5D.creative.value%7D)%7Dfunction%20r(e)%7Bchannel.fire(%22launch%22%2C%7Bsource%3Ae%7D)%7Dvar%20i%3Dthis%2Cs%3D%7Bstart%3A1%2Cstop%3A2%2Cfin%3A3%2Cclick%3A4%7D%2Ct%3D%7BprogressBar%3A1%7D%3Bif(config.mobile%7C%7C(channel.on(%22start%22%2Cfunction()%7Bi.start()%2Ce(s.start)%7D)%2Cchannel.on(%22stop%22%2Cfunction()%7Bi.stop()%2Ce(s.stop)%7D)%2Cthis.on(%22progFin%22%2Cfunction()%7Bi.reset()%2Cr(t.progressBar)%2Ce(s.fin)%7D))%2C%22inview%22%3D%3D%3Dthis.product%7C%7C%22image%22%3D%3D%3Dthis.product)%7Bvar%20a%3Dthis.unit.querySelector(%22.VM_progressArea_image%22)%3Bchannel.on(%22start%22%2Cfunction()%7Bconfig.mobile%7C%7C(a.style.visibility%3D%22visible%22)%7D)%2Cchannel.on(%22stop%22%2Cfunction()%7Bconfig.mobile%7C%7C(a.style.visibility%3D%22hidden%22)%7D)%7Dif(channel.on(%22click%22%2Cfunction()%7Bi.stop()%2Cr(t.progressBar)%2Ce(s.click)%7D)%2Cchannel.on(%22close%22%2Cfunction()%7Bi.stop()%7D)%2CcreativeAPI.events.bind(document.body%2CDEVICE_CLICK%2Cfunction()%7Bchannel.fire(%22click%22)%7D)%2C%22image%22%3D%3D%3Dthis.product)%7Bvar%20o%3Dthis.unit.querySelector(%22.image-close%22)%2Cd%3Dthis.unit.querySelector(%22.image-adchoice%22)%3Bevents.bind(o%2CDEVICE_CLICK%2Cfunction(e)%7BcreativeAPI.events.stopPropagation(e)%2Ci.adInstance.resetDecoration%3Fi.adInstance.close()%3Ai.adInstance.fire(%22close%22)%7D)%2Cevents.bind(d%2CDEVICE_CLICK%2Cfunction(e)%7BcreativeAPI.events.stopPropagation(e)%2Ci.stop()%2Clog.adChoiceClick(%7Bproduct%3Ai.product%2ChookId%3Ai.adInstance.settings.vibrantParameters.hookId%7C%7C0%7D)%2CcreativeAPI.dom.openUrl(n)%7D)%7D%7D%2C%7Bcreate%3Ar%7D%7Dvar%20creativeAPI%3Dwindow.frameElement.creativeAPI%2Cchannel%3DcreativeAPI.channel%2Cevents%3DcreativeAPI.events%2Clog%3DcreativeAPI.log%2Cparams%3DcreativeAPI.template.params%2Cconfig%3DcreativeAPI.config%2CDEVICE_CLICK%3Dconfig.mobile%3F%22touchstart%22%3A%22click%22%3Bwindow.setTimeout(function()%7Bprogress().create(%7Btime%3AparseInt(params.progressBarTime%2C10)%7C%7C3e3%2CadInstance%3AcreativeAPI.adInstance%2Cunit%3Adecoration().decorate(creativeAPI.adInstance.product%2C%7Bimage%3Aparams.progressBarImage%7C%7C!1%2CadInstance%3AcreativeAPI.adInstance%2Ctext%3Aparams.progressBarText%3FcreativeAPI.utils.truncate(decodeURIComponent(params.progressBarText)%2C25)%3A%22Click%20Or%20Hover%20To%20Expand%22%7D)%7D)%7D%2C0)%3C%2Fscript%3E%0A%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A",adhesionCreative:"%3C!DOCTYPE%20html%3E%3Chtml%3E%20%3Chead%3E%20%3Cstyle%3Ebody%7Bmargin%3A%200%3B%7Diframe%7Bposition%3A%20relative%3B%7Ddiv%7Bposition%3A%20absolute%3B%20margin%3A%200%3B%20top%3A%200px%3B%20left%3A%200px%3B%7D%3C%2Fstyle%3E%20%3C%2Fhead%3E%20%3Cbody%3E%20%3Cscript%3Evar%20creativeAPI%3Dwindow.frameElement.creativeAPI%3B%20var%20channel%3DcreativeAPI.channel%3B%20var%20events%3DcreativeAPI.events%3B%20var%20params%3DcreativeAPI.template.params%3B%20var%20dom%3DcreativeAPI.dom%3B%20var%20DEFAULTS%3D%7BWIDTH%3A%20320%2C%20HEIGHT%3A%2050%7D%3B%20var%20creative%3Ddom.createIFrame(%7Bwidth%3A%20DEFAULTS.WIDTH%2C%20height%3A%20DEFAULTS.HEIGHT%7D%2C%20function%20(err%2C%20iframe)%7Biframe.src%3Dparams.adhesionBarCreative%3B%7D)%3B%20var%20overlay%3Ddocument.createElement('div')%3B%20overlay.style.width%3DDEFAULTS.WIDTH%20%2B%20'px'%3B%20overlay.style.height%3DDEFAULTS.HEIGHT%20%2B%20'px'%3B%20document.body.appendChild(creative)%3B%20document.body.appendChild(overlay)%3B%20events.bind(overlay%2C%20'click'%2C%20function%20(e)%7Bevents.stopPropagation(e)%3B%20launch(1)%3B%7D)%3B%20channel.on('click'%2C%20function%20(e)%7Bevents.stopPropagation(e)%3B%20launch(1)%3B%7D)%3B%20function%20launch%20(source)%7Bchannel.fire('launch'%2C%7Bsource%3A%20source%7D)%3B%7D%3C%2Fscript%3E%20%3Cbody%3E%3C%2Fhtml%3E"}),r=l,a=u,w={spawn:function(e,t,i){var o=e.adInstance,n=r.debounce(function(){i(a.logEvents.launchSource.dropin)},250);o.resetDecoration&&o.resetDecoration({decorationType:"cpeDropIn"}),o.on(a.events.mouse.click,n),o.on(a.events.mouse.in,n),o.on("delegate",function(e){"click"===e.data.triggerSource&&n()}),t({element:document.createElement("div"),width:0,height:0})}};var s=n.adInstance,c=n.templateData,t=c.params;s.setBehaviour&&s.setBehaviour("clickThrough",!1);var i,o=function(e){var t,a,i,o;if(t=d,a=f,i=p,(o=function(e){this.options=e,this.creativeAPI=e.api,this.events(),this.takeover=i.nativeIframe({className:"vm_TakeOver_Wrapper",width:"100%",height:"100%",creative:e.creative,api:e.api})}).prototype.launch=function(){this.creativeAPI.adInstance.companion=this.takeover,document.body.appendChild(this.takeover)},o.prototype.destroy=function(){delete this.creativeAPI.adInstance.companion,this.takeover.parentNode.removeChild(this.takeover)},o.prototype.events=function(){var e=this,t=this.creativeAPI.channel,i=this.options.adInstance,o=i.product,n=i.settings.vibrantParameters.hookId,r=i.settings.ads[0].creative.value;t.on("open",function(){e.openTime=+new Date,i.fire("engagement"),a.engagement({product:o,hookId:n,source:e.options.source,creativeId:r})}),t.on("close",function(){e.destroy(),a.cpeClose({product:o,hookId:n,dwell:+new Date-e.openTime,creativeId:r})})},m={create:function(e){return e.api.channel=new t.Observable,new o(e)},Takeover:o},!e)throw f.auditError({message:"source not defined"});"intext"===s.product&&setTimeout(function(){s.fire("close")},1),m.create({creative:c.template,adInstance:s,source:e,api:b(n)}).launch()};"adhesion"!==s.product&&"intext"!==s.product||"desktop"===v.platform||(t.progressBar=!1),t.progressBar?(i=t.progressCreative?t.progressCreative:"adhesion"===s.product?u.adhesionCreative:u.progressCreative,y.create({progressCreative:i,params:t,adInstance:s,api:b(n)},e,o)):w.spawn({adInstance:s},e,o)}}};var adunit=adunit||{};adunit.Creative=function(e,t){var i={LOADED:"loaded",LOAD:"load"};function o(){e.Observable.call(this);var t=this;this.on(i.LOAD,function(e){t.load(e)},this)}return(o.prototype=new e.Observable).getWidth=function(){return this.width},o.prototype.getHeight=function(){return this.height},o.prototype.load=function(){throw new Error("not implemented")},{CreativeInterface:o,create:function(e){return t.extend(new o,e)}}};var adunit=adunit||{};adunit.CustomUnit=function(w,b,k,C,E,I,o,x){var A=100,D="vm-hook";function S(e,t,i){return e.VM=e.VM||{},new o(e,t,b,k,C,E,I,i)}return{load:function(e,t){var g=e.adInstance,v=e.templateData,f=e.channel||new C.Observable,i=g.getAd(),o=g.getAdConfig(),m=I.extend({},{product:g.product,hookId:o.vibrantParameters.hookId,setId:o.vibrantParameters.setId,keyword:encodeURIComponent(o.term&&o.term.keyword||""),timestamp:+new Date,clickUrl:i.clickUrl,source:client.Log.clickSource.AD},i.creative.diyValues||{});g.mergedCreativeParams=I.extend({},i.creative.diyValues||{},i.creative.setValues||{},v.params);var y=I.extend({},g.mergedCreativeParams,{clickUrl:E.getUrl("clickThrough",m)}),n=g.isResponsive()?{}:{width:y.width,height:y.height},r=k.createIFrame(n,function(e,t){var o,n,i,r,a,s,c,d="";try{d=decodeURIComponent(v.template)}catch(e){console.log("decodeURIComponent failed:"+e)}if(y.customSrc){var l={};b.apiHost&&(l.apiHost=encodeURIComponent(b.apiHost));var u=b.get("cdn.videoplayerjs",null);u&&(l.videoPlayerUrl=u),b.ipid&&(l.ipid=b.ipid),b.urlHash&&(l.urlHash=b.urlHash),b.pvu&&(l.pvu=b.pvu);var p=I.parseQueryString(y.customSrc);I.extend(p.params,l,y);var h=p.url+"?"+I.toQueryString(p.params);t.src=h}else t.creativeAPI={adInstance:g,channel:f,config:b,dom:k,events:C,log:E,utils:I,videoplayer:S,template:{id:v.id,params:y,template:v.template},window:w,document:document},g.delayLoad?(t.contentWindow.contents=x.getIframeLoadingSrc(),t.src="javascript:window['contents']",g.on(g.DELAYED_LOAD,function(){t.contentWindow.contents=d,t.src="javascript:window['contents']",g.delayLoad=!1})):(t.contentWindow.contents=d,t.src="javascript:window['contents']");g.mergedCreativeParams.customHookClick||g.on(g.EVENT_CLICK,function(){g.getDiyValues().nohookclick||I.timeDeltaPassed(g.openTime,g.getClickDelay(),function(){E.clickThrough(I.extend(m,{source:client.Log.clickSource.HOOK}))})}),o=g,n=f,i=t,r=I.debounce(function(){n.fire("start")},A),a=I.debounce(function(){n.fire("stop")},A),s=o.getDiyValues().nohookclick||!1,c=I.debounce(function(e,t){var i;t===client.Log.clickSource.HOOK&&s||(i=o.getClickDelay(),o.mergedCreativeParams.customHookClick&&(e instanceof Event?C.stopPropagation(e):e&&e.event instanceof Event&&C.stopPropagation(e.event),I.timeDeltaPassed(o.openTime,i,function(){n.fire("click")})))},A),o.on(o.EVENT_OPENED,r),o.on(o.EVENT_MOUSEIN,r),o.on(o.EVENT_CLOSED,a),o.on(o.EVENT_MOUSEOUT,a),o.on(o.EVENT_CLICK,function(e){var t=e.data instanceof MouseEvent?e.data:e.data.event,i=t.target.className===D?client.Log.clickSource.HOOK:client.Log.clickSource.AD;c(t,i)}),o.on(o.EVENT_CLOSED,function(){n.unbindAll(),i.parentNode&&i.parentNode.removeChild(i)}),o.on(o.EVENT_DELEGATE,function(e){"hover"===e.data.triggerSource?r():"click"===e.data.triggerSource&&c()})});t({width:y.width,height:y.height,element:r})}}};var adunit=adunit||{};adunit.Decoration=function(e,y,w,b,k,C,E){var I="https://www.vibrantmedia.com/",x="https://www.vibrantmedia.com/whats-intellitxt/",t=w.getBoolean("partner.inview.headerclose",!1),A={intext:w.getInteger("partner.intext.zindex",5999999),image:w.getInteger("partner.image.zindex",1999999),daw:w.getInteger("partner.daw.zindex",5e6),adhesion:w.getInteger("partner.adhesion.zindex",5e6),adbar:w.getInteger("partner.adbar.zindex",5e6),inline:w.getInteger("partner.inline.zindex",4999),instory:w.getInteger("partner.instory.zindex",4999),inview:w.getInteger("partner.inview.zindex",4999),fallback:w.getInteger("partner.fallback.zindex",1e6)},D={standard:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer">','<div class="vm-adunit-close vm-close-top"></div>','<div class="vm-adunit-adchoice vm-adchoice-top"></div>','<div id="vm-adunit-inner-{id}" class="vm-adunit-inner">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-head-{id}" class="vm-adunit-head"></div>','<div id="vm-adunit-body-{id}" class="vm-adunit-body vm-adunit-loading">',"</div>",'<div id="vm-adunit-foot-{id}" class="vm-adunit-foot"></div>',"</div>","</div>","</div>"].join("\n"),legacyadhesion:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer legacyadhesion">','<div class="vm-adunit-close" style="background-position: -60px 0px;"></div>','<div class="vm-adunit-adchoice vm-adchoice-top"></div>','<div id="vm-adunit-inner-{id}" class="vm-adunit-inner">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-head-{id}" class="vm-adunit-head"></div>','<div id="vm-adunit-body-{id}" class="vm-adunit-body vm-adunit-loading">',"</div>",'<div id="vm-adunit-foot-{id}" class="vm-adunit-foot"></div>',"</div>","</div>","</div>"].join("\n"),image:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer">','<div class="vm-adunit-close vm-close-base"></div>','<div class="vm-adunit-adchoice vm-adchoice-base"></div>','<div id="vm-adunit-inner-{id}" class="vm-adunit-inner vm-no-shadow">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-head-{id}" class="vm-adunit-head"></div>','<div id="vm-adunit-body-{id}" class="vm-adunit-body vm-body-clear">',"</div>",'<div id="vm-adunit-foot-{id}" class="vm-adunit-foot"></div>',"</div>","</div>","</div>"].join("\n"),cpeProgressBar:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer">','<div id="vm-adunit-inner-{id}">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-head-{id}" class="vm-adunit-head"></div>','<div id="vm-adunit-body-{id}" class="vm-adunit-body"></div>','<div id="vm-adunit-foot-{id}" class="vm-adunit-foot"></div>',"</div>","</div>","</div>"].join("\n"),cpeDropIn:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer" style="display: none">','<div id="vm-adunit-inner-{id}">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-head-{id}" class="vm-adunit-head"></div>','<div id="vm-adunit-body-{id}" class="vm-adunit-body"></div>','<div id="vm-adunit-foot-{id}" class="vm-adunit-foot"></div>',"</div>","</div>","</div>"].join("\n"),chrome:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer">','<div id="vm-tt-header-{id}" class="vm-tt-header" style="height: 30px;">','<div class="vm-tt-sprite-header">','<div class="vm-tt-sprite12-tlc vm-tt-sprite12"></div>','<div class="vm-tt-sprite12-tm vm-tt-sprite12"></div>','<div class="vm-tt-sprite12-trc vm-tt-sprite12"></div>',"</div>",'<div class="vm-tt-hdr-lft">','<a target="_blank" class="vm-tt-vmlogo-a">','<div class="vm-tt-vmlogo12"></div>',"</a>",'<div class="vm-tt-priv12 vm-adunit-adchoice" style="display: block;">','<div class="vm-tt-adchoices12"></div>','<div class="vm-tt-adchoices12-txt">{adChoicesText}</div>',"</div>","</div>",'<div class=" vm-tt-hdr-rt">','<div class="vm-adunit-close" style="background-position: -60px 0px;"></div>',"</div>","</div>",'<div style="background-color: rgb(240, 240, 240);" class="vm-tt-content-bg">','<div class="vm-tt-sprite12-lft-edge" style="display: block;"></div>','<div class="vm-tt-sprite12-rt-edge" style="display: block;"></div>',"</div>",'<div id="vm-adunit-inner-{id}" class="vm-adunit-inner" style="padding-left: 5px;padding-right: 5px;padding-top: 30px;">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-head-{id}" class="vm-adunit-head"></div>','<div id="vm-adunit-body-{id}" class="vm-adunit-body vm-adunit-loading">',"</div>",'<div id="vm-adunit-foot-{id}" class="vm-adunit-foot"></div>',"</div>","</div>",'<div id="vm-tt-footer" style="width: 100%; height: 6px; background-color: transparent;">','<div class="vm-tt-footer12">','<div class="vm-tt-footer12-left vm-tt-sprite12"></div>','<div class="vm-tt-footer12-mid vm-tt-sprite12"></div>','<div class="vm-tt-footer12-right vm-tt-sprite12"></div>',"</div>","</div>","</div>"].join("\n"),inview:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer vm-inview">','<div class="vm-inview-header '+(t?"vm-inview-close":"")+'">',"{hdrText}",'<div class="vm-adunit-close">','<div class="vm-close-icon"></div>',"</div>","</div>",'<div id="vm-adunit-inner-{id}" class="vm-adunit-inner">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-body-{id}" class="vm-adunit-body">',"</div>","</div>","</div>",'<div class="vm-inview-footer">','<div class="vm-adunit-adchoice"></div>','<div class="vm-inview-poweredby"></div>',"</div>","</div>"].join("\n"),instory:['<div id="vm-adunit-outer-{id}" class="vm-adunit-outer vm-instory">','<div class="vm-instory-header '+(t?"vm-instory-close":"")+'">',"{hdrText}",'<div class="vm-adunit-close">','<div class="vm-close-icon"></div>',"</div>","</div>",'<div id="vm-adunit-inner-{id}" class="vm-adunit-inner">','<div id="vm-adunit-content-{id}" class="vm-adunit-content">','<div id="vm-adunit-body-{id}" class="vm-adunit-body">',"</div>","</div>","</div>",'<div class="vm-instory-footer">','<div class="vm-adunit-adchoice"></div>','<div class="vm-instory-poweredby"></div>',"</div>","</div>"].join("\n")},i=["<html>","<head>","<style>",".loaderOuter {","       width: 100%;","       height: 100%;","       display: flex;","       justify-content: center;","       align-items: center;","background:#f3f3f3;","}",".loaderInner {","        border: 16px solid #dadada;","        border-radius: 50%;","        border-top: 16px solid #3498db;","        width: 30%;","        padding-top: 30%;","        -webkit-animation: spin 2s linear infinite;","        animation: spin 2s linear infinite;","}","@-webkit-keyframes spin {0% { -webkit-transform: rotate(0deg); }100% { -webkit-transform: rotate(360deg); }}","@keyframes spin {0% { transform: rotate(0deg); }100% { transform: rotate(360deg); }}","</style>","</head>","<body>",'<div class="loaderOuter">','<div class="loaderInner"></div>',"</div>","</body>","</html>"].join("\n"),o=["<body>",'<div class="vm_loading_outer">','<div class="vm_loading_inner"></div>',"</div>","</body>","</html>"].join("\n");return{decorate:function(e,t){var i,o,n,r,a=y.createElement("div");(t=t||{}).settings=t.settings||e.settings;var s,c,d,l,u=(s=t.decorationType,D[s]||D.standard);if(u){u=u.replace(/\{id\}/g,e.id);var p=constants.LanguageMap().map.default.adChoicesText,h=constants.LanguageMap().map.default.hdrText;if(w){var g=w.get("geo",{});if(g&&g.cc){"de"===g.cc&&(x="https://www.vibrantmedia.com/de/whats-intellitxt/"),"uk"===g.cc&&(x="https://www.vibrantmedia.com/en/privacy-policy/");var v=constants.LanguageMap().map[g.cc];v&&v.adChoicesText&&(p=v.adChoicesText),v&&v.hdrText&&(h=v.hdrText)}}u=(u=u.replace(/\{adChoicesText\}/g,p)).replace(/\{hdrText\}/g,h)}return a.innerHTML=u,n=(r=a.firstChild).querySelector(".vm-tt-vmlogo12"),i=r.querySelectorAll(".vm-adunit-close, .vm-inview-close"),o=r.querySelector(".vm-adunit-adchoice"),r.querySelector(".vm-adunit-body").appendChild(e.body),c=r,d=t.decorationType,l=e.product,"inview"===d&&(l="inview"),A.hasOwnProperty(l)?c.style.zIndex=A[l]:c.style.zIndex=A.fallback,r=c,e.outerBox=e.position.placeOuterBox(e,r),f=e,m={outerBox:r,adunitClose:i,adunitAdChoice:o,vmLogo:n},b.bindConnect(m.outerBox,"mouseenter",f,f.EVENT_MOUSEIN),b.bindConnect(m.outerBox,"mouseleave",f,f.EVENT_MOUSEOUT),C.isEmpty(m.adunitClose)||C.forEach(m.adunitClose,function(e){b.bind(e,"click",function(e){b.stopPropagation(e),f.fire("close",client.Log.closeSource.AD)})}),m.adunitAdChoice&&b.bind(m.adunitAdChoice,"click",function(e){b.stopPropagation(e),E.adChoiceClick({product:f.product,hookId:f.settings.vibrantParameters.hookId}),k.openUrl(x)}),m.vmLogo&&b.bind(m.vmLogo,"click",function(e){b.stopPropagation(e),E.clickThrough({product:f.product,source:300,hookId:f.settings.vibrantParameters.hookId,clickUrl:encodeURI(I)})}),e=f;var f,m},getIframeLoadingSrc:function(){return i},getPageLoadingSrc:function(){return o}}};var adunit=adunit||{};adunit.Position=function(S,r,N,O,B,T){var a="-9999px";function e(e){this.positionFunc=e}function P(e,t,i,o,n,r){var a;if(e.body)try{if(a=e.body.contentDocument){var s=a.body?a.body.clientHeight:0;if(s){var c=s+i;e.body.setAttribute("height",c.toString()),e.body.style.height=c+"px";var d=e.getBodyContainer();d&&(d.style.height=c+"px"),t.style.height=c+"px",t.style.maxHeight=c+o+"px",n&&n.style.setProperty("margin-bottom",c+"px","important"),r&&r(c)}}}catch(e){a=null}}function t(e,t){this.position=e,this.animate=t.animate,this.controlledOpen=t.controlledOpen,this.animationTime=500}function i(e,t){if(this.element=e,this.openTransitionEnabled=!0,this.closeTransitionEnabled=!0,this.useSimpleElement=!1,t&&t.get("partner.inline",null)){var i=t.get("partner.inline");i&&(this.useSimpleElement=i.getBoolean("usesimpleelement",!1))}}function o(e){this.hook=e,this.openTransitionEnabled=!0,this.closeTransitionEnabled=!0}function n(e){this.hook=e}return e.prototype.placeOuterBox=function(t,i){var o=this;i.className+=" vm-adunit-absolute",i.style.top=a,i.style.left=a,i.style.visibility="hidden",i.style.opacity=0;var e=i.querySelector(".vm-adunit-body");e.style.width=t.getWidth()+"px",e.style.height=t.getHeight()+"px";var n=B.debounce(function(){var e=o.positionFunc();t.specsForExpand&&t.specsForExpand.expanded?(t.specsForExpand.reset=e.top,i.style.top=e.top-t.specsForExpand.topForExpanded+"px"):i.style.top=e.top+"px",i.style.left=e.left+"px"},100,{leading:!0});return t.once("opened",function(){i=r.body.appendChild(i),n(),o.unbindResizeEvent=O.bind(S,"resize",n),t.on("domChange",n),i.style.visibility="visible",i.style.opacity=1}),t.once("closing",function(){o.unbindResizeEvent&&(o.unbindResizeEvent(),delete o.unbindResizeEvent),t.unbind("domChange",n),i.style.visibility="hidden",i.style.opacity=0}),t.once("closed",function(){i.style.top=a,i.style.left=a,r.body.removeChild(i)}),t.on("resizeHeight",function(){P(t,i,0,0,void 0,function(){i.style.height="auto",i.style.maxHeight="initial"})}),i},t.prototype.placeOuterBox=function(t,i){var o,n=this;i.className+=" vm-adunit-fixed",i.style.top=a,i.style.left=a,i.style.bottom="",i.style.right="",i.style.visibility="hidden",i.style.opacity=0;var e=i.querySelector(".vm-adunit-body");return e.style.width=t.getWidth()+"px",e.style.height=t.getHeight()+"px",t.once("opened",function(){function e(){n.animate?(o=N.getStyle(i).height,i.style.bottom="-"+o,i.style.visibility="visible",i.style.opacity=1,S.setTimeout(function(){i.className+=" vm-adunit-fixed-animate",i.style.bottom="0px"},n.animationTime)):(i.style.visibility="visible",i.style.opacity=1)}B.forEach(["top","left","bottom","right"],function(e){n.position.hasOwnProperty(e)?i.style[e]=n.position[e]+"px":i.style[e]=""}),""===i.style.left&&""===i.style.right&&(i.style.left="50%",i.style.marginLeft=-t.getWidth()/2+"px"),i=r.body.appendChild(i),n.controlledOpen?t.on(t.CONTROLLED_OPEN,e):e()}),t.once("closing",function(){n.animate?i.style.bottom="-"+o:(i.style.visibility="hidden",i.style.opacity=0)}),t.once("closed",function(){n.animate?S.setTimeout(function(){i.style.visibility="hidden",i.style.top=a,i.style.left=a,r.body.removeChild(i)},n.animationTime):(i.style.top=a,i.style.left=a,r.body.removeChild(i))}),i},i.prototype.placeOuterBox=function(e,i){var t=e.isResponsive(),o=(i=this.useSimpleElement?this.element.appendChild(i):this.element.parentNode.insertBefore(i,this.element.nextSibling)).querySelector(".vm-adunit-body");function n(){i.style.maxHeight="initial",T.fire(client.app.inline.animationEnd),t&&(i.style.height="100%",o.style.height="100%")}return e.on("resizeHeight",function(){P(e,i,0,10,void 0,void 0)}),T.fire(client.app.inline.animationStart),i.className+=" vm-adunit-inline",o.style.width=t?i.style.width="100%":(i.style.width=e.getWidth()+"px",e.getWidth()+"px"),this.openTransitionEnabled?(i.style.maxHeight="0px",S.setTimeout(n,1)):n(),O.bind(S,"scroll",function(){n()}),e.once("closed",function(){var e,t=B.once(function(){e&&e(),i.parentNode.removeChild(i)});this.closeTransitionEnabled?(i.style.maxHeight="0px",i.style.height="0px",B.isIE?S.setTimeout(t,300):e=O.bind(i,"transitionend",t)):t()},this),i},o.prototype.placeOuterBox=function(n,r){var e,a=this,s=this.hook.getDomNode(),t=n.getHeight()+60,c=r.querySelector(".vm-adunit-body"),d=15,l=60;function i(){e&&e(),T.fire(client.app.inview.animationEnd)}T.fire(client.app.inview.animationStart),B.isIE?S.setTimeout(i,300):e=O.bind(r,"transitionend",i);var o=" vm-hook-inview";s&&-1===s.className.indexOf(o)&&(s.className+=o),r.className+=" vm-adunit-inview",c.style.width=n.getWidth()+"px",c.style.height=n.getHeight()+"px",r.style.maxHeight="0px",s.style.setProperty("margin-bottom","0px","important");var u=0,p=!1;function h(){var e,t=(p?u:n.getHeight())+d+l,i=N.getPosition(s),o=a.hook.getParagraphPosition();r.style.top=i.bottom-i.top+"px",r.style.left=o.left-i.left+"px",r.style.position="absolute",r.style.width=o.right-o.left+"px",e=t,a.hook.hidden?s.style.marginBottom=0:s.style.marginBottom=e+"px",r.style.height=e+"px",c.style.width=n.getWidth()+"px"}return n.on("resizeHeight",function(){P(n,r,d,l,s,function(e){p=!0,u=e,h()})}),S.setTimeout(function(){t=n.getHeight()+60,r.style.maxHeight=t+"px",s.style.setProperty("margin-bottom",t+"px","important")},1),O.bind(S,"resize",B.debounce(function(){h()}),300),h(),n.once("opened",function(){a.hook.hidden=!1}),n.once("closed",function(){var e;T.fire(client.app.inview.animationStart);var t=B.once(function(){e&&e(),T.fire(client.app.inview.animationEnd),r.parentNode.removeChild(r)});r.style.maxHeight="0px",s.style.marginBottom="0px",a.hook.hidden=!0,B.isIE?S.setTimeout(t,300):e=O.bind(r,"transitionend",t)},this),s.appendChild(r)},n.prototype.placeOuterBox=function(g,v){var f=this,m=10,y=80,w=10,b=75,k=behaviour.InstoryHeightCalc(N),C=this.hook.getDomNode(),E=0,I=v.querySelector(".vm-adunit-body"),x=g.product,A=B.once(function(){g.fire("slidingopened")}),e=" vm-hook-instory";C&&-1===C.className.indexOf(e)&&(C.className+=e),v.className+=" vm-adunit-instory";var D=!1;function t(e){var t,i,o=(D?E:g.getHeight())+m+y;if("instory"===x){var n=N.getPosition(C),r=f.hook.getParagraphPosition();v.style.top=n.bottom-n.top+"px",v.style.left=r.left-n.left+"px",v.style.position="absolute",v.style.width=r.right-r.left+"px",t=n.bottom-N.getScrollY(),i=k(v,o,t),i=e?Math.min(i,e):i,i=w<i?i:0,f.hook.hidden?C.style.marginBottom=0:C.style.marginBottom=i+"px"}else{var a,s=f.hook.getDomNode(),c=N.getPosition(s);a="SimpleElementNode"===f.hook.constructor.name?c.top-N.getScrollY():c.bottom-N.getScrollY(),v.style.top=0,v.style.left=0,v.style.position="static",i=k(v,o,a),i=e?Math.min(i,e):i,i=w<i?i:0,C.style.marginBottom=0}v.style.height=i+"px";var d=N.getAbsoluteViewport(),l=d.bottom-d.top,u=Math.min(l,o),p=N.pixelHeightInViewport(v),h=0<u?Math.round(100*p/u):0;g.fire("slidingopen",h),b<h&&(A(),g.delayLoad&&g.fire(g.DELAYED_LOAD,h)),I.style.width=g.getWidth()+"px"}if(O.bind(S,"resize",B.debounce(function(){t()}),300),O.bind(v,"mouseenter",function(){v.setAttribute("data-mouse","in"),t()}),O.bind(v,"click",function(){v.setAttribute("data-mouse","in"),t()}),O.bind(S,"scroll",function(){t()}),t(),g.on("resize",function(){t()}),g.on("contentLoaded",function(){P(g,v,m,y,C,function(e){D=!0,t(E=e)})}),g.on("resizeHeight",function(){P(g,v,m,y,C,function(e){D=!0,t(E=e)})}),g.once("closed",function(){var e;T.fire(client.app.inview.animationStart);var t=B.once(function(){e&&e(),T.fire(client.app.inview.animationEnd),v.parentNode.removeChild(v)});v.style.maxHeight="0px",C.style.marginBottom="0px",f.hook.hidden=!0,B.isIE?S.setTimeout(t,300):e=O.bind(v,"transitionend",t)},this),"inline"===x)if("SimpleElementNode"===f.hook.constructor.name)C.appendChild(v);else{var i=f.hook.getDomNode();i&&i.parentNode.insertBefore(v,i.nextSibling)}else C.appendChild(v);return v},{Absolute:e,Fixed:t,Inline:i,Inview:o,Instory:n}};var adunit=adunit||{};adunit.Template=function(r,t){var a={};function s(e){this.id=e.id,this.params=e.params||{},this.hook=e.hook||{},this.template=e.template||""}return s.prototype.clone=function(){var e={id:this.id,params:{},hook:{},template:this.template};return this.params&&(e.params=t.extend({},this.params)),this.hook&&(e.hook=t.extend({},this.hook)),new s(e)},s.prototype.execute=function(e){return e=t.extend({},this.params,e||{},{source:window.location,timestamp:+new Date,creativeId:this.id}),t.replaceUrlParams(this.template,e)},{CachedTemplate:s,load:function(i,e,o){var t,n;void 0!==a[i.id]?(n=a[i.id].clone(),o(null,n)):"c2s"===e.ads[0].creative.creativeType?(t=new s({id:i.id,params:{c2s:!0}}),n=t.clone(),o(null,n)):e.ads[0].creative.payload?(t=new s(e.ads[0].creative.payload),a[i.id]=t,n=t.clone(),o(null,n)):r.jsonp({scope:"template",url:i.cdnUrl,id:i.id}).on("data",function(e){var t=new s(e.data);a[i.id]=t,n=t.clone(),o(null,n)})}}};var adunit=adunit||{},BASE_APP_SCOPE=BASE_APP_SCOPE||"VM";adunit.VideoUnit=function(s,c,r,a,d,l,u,p){var h,g=!1,v=[],e=r.get("cdn.videoplayerjs",null),f="//"+e;if((p=null)&&p.keyVersion&&(p={activePlayer:"jwPlayer",jwPlayer:{url:"images.intellitxt.com/k/jwplayer/8.2.2",keyVersion:8}}),p=p||r.get("videoPlayerSettings",null),e){if(p)return{load:function(e,t,i,o){var n,r,a;h?m(e,t,i,o):(v.push({args:e,id:t,callback:i,unit:o}),g||(n=function(e){h=e,u.forEach(v,function(e){m(e.args,e.id,e.callback,e.unit)}),g=!1,v=[]},r=c.head||c.getElementsByTagName("head")[0],a=c.createElement("script"),s.VM.videoplayer=s.VM.videoplayer||{},s.VM.videoplayer.settings=p,s.VM.videoplayer.initialise=n,a.type="text/javascript",a.async=!0,a.src=f,r.appendChild(a),g=!0))}};console.log("Video player settings are not defined")}else console.log("Video player URL is not defined");function m(e,t,i,o){var n=h({config:r,dom:a,events:d,log:l,utils:u,debugLog:s[BASE_APP_SCOPE].debugLog});return"function"==typeof t&&void 0===o&&(o=i,i=t),"videoFrame"===o?n.videoFrame.create(e,i):n.player.create(e,t,i)}};var behaviour=behaviour||{};behaviour.AdBarLegacy=function(t,e,i){var o=e.getInteger("partner.adbar.cuid",!1),n="//aka-cdn-ns.adtech.de/dt/common/DACLoader.js";return function(){var e;o&&((e=document.createElement("div")).id=o,e.setAttribute("data-adtech",""),document.body.appendChild(e),t.ADTECH=t.ADTECH||{},i.appendScript(n,function(){t.ADTECH.loadAd&&t.ADTECH.loadAd({protocol:t.location.protocol.split(":")[0],server:"adserver.adtech.de",network:"82.0",placement:o})}))}};var behaviour=behaviour||{};behaviour.AdBar=function(t,d,l,i,e,u,p){var h="adbar",g=l.getInteger("partner.adbar.width",480),v=l.getInteger("partner.adbar.height",270),f=l.get("partner.adbar.position",!1),m="standard";function o(){}return(o.prototype=new e.Observable).invoke=function(o){var n=document.body.clientWidth,e=g<=n?g:n;function r(e){var t=i.waterfall.select(e,"adbar",m);return m=t.decoration,t.creative}function a(e,t){var i={bottom:0},o=e.template.params,n=e.getAd().creative.diyValues||{};f&&!o.scaleToWidth&&(i[f]=10),e.position=new d.position.Fixed(i,{animate:!0,controlledOpen:!!n.controlledOpen}),t(null,e)}function s(e,t,i){var o=e.getAd().creative.diyValues||{};function n(){u.adImpression({product:e.product,hookId:e.settings.vibrantParameters.hookId,setId:e.settings.vibrantParameters.setId,source:t})}e=d.decoration.decorate(e,{decorationType:m}),o.controlledOpen?e.on(e.CONTROLLED_OPEN,n):n(),i()}function c(e,t,i){u.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||client.Log.closeSource.AUTO}),i()}t.request(h,{ids:["1:"+e+":"+v],count:1},function(e){var t,i;e.hasOwnProperty(1)&&((i=e[1][0]).container={width:n},t=d.adunit.create({product:h,settings:i,templateSettings:{cdnUrl:"//"+l.cdn.internal,id:i.ads[0].creative.value},creativeLoad:r,render:a,open:s,close:c}),u.hookLoad({product:h,hookIds:i.vibrantParameters.hookId}),p.track(t,i.trackers,i.term),t.connect("opened",t,"impression"),t.connect(t.EVENT_CLICK,t,"click"),t.fire("open",o.viewSource))})},o};var behaviour=behaviour||{};behaviour.AdhesionBackfill=function(e,t,i,n,o){var r=o.getBoolean("partner.adhesion.refresh",!0),a=o.getInteger("partner.adhesion.refreshtime",3e4),s=!0;function c(e){i.Observable.call(this),this.fetchFormat=e.fetchFormat}return(c.prototype=new i.Observable).invoke=function(t){var i=this;function o(){s=!1}s&&(e.request("adhesion",{ids:[n.replaceUrlParams(i.fetchFormat,{id:1})],count:1},function(e){e.hasOwnProperty(1)&&i.fire("adsReady",{ads:e[1][0],product:"adhesion",viewSource:t.viewSource,disableAdCallback:o,refresh:{enabled:r,interval:a,delay:1500}})}),t.forceFlush&&e.forceFlush())},c};var behaviour=behaviour||{};behaviour.AdhesionPlacement=function(s,c,d,h,g,v,l,e){var u,f=!0,m="standard",y="hide";function t(){g.Observable.call(this);var t=this;this.isUserTouchingTheScreen=!1;var i=e.debounce(function(e){u&&!t.isUserTouchingTheScreen&&u.fire("redraw",e&&e.data||{})},250,{leading:!1});this.on(client.app.trigger.resize,i),this.on(client.app.trigger.zoom,i),this.on(client.app.trigger.scroll,i),this.on(client.app.trigger.touchend,function(e){t.isUserTouchingTheScreen=!1,setTimeout(function(){i(e)},250)}),this.on(client.app.trigger.touchstart,function(e){t.isUserTouchingTheScreen=!0,u&&!u.outerBox.contains(e.data.target)&&setTimeout(function(){u.fire(y)},80)})}return(t.prototype=new g.Observable).invoke=function(o){var e,i,n,t,r,a=this;o.hook?t=(e=o.hook.getAdConfig()).ads[0].creative.value:o.ads&&(t=(e=o.ads).ads[0].creative.value),n=o.product||"intext",r=o.refresh||{},u&&"adhesion"!==u.product&&"adhesion"===n?o.disableAdCallback():(i=s.adunit.create({product:n,settings:e,templateSettings:{cdnUrl:"//"+c.cdn.internal,id:t},creativeLoad:function(e){var t=d.waterfall.select(e,"adhesion",m);return m=t.decoration,t.creative},render:function(e,t){e.position=new s.position.Fixed({bottom:0,left:0},{animate:!0}),t(null,e)},open:function(d,e,t){if(f){var l=(d=s.decoration.decorate(d,{decorationType:m})).outerBox,u=l.querySelector(".vm-adunit-content"),p=l.querySelector(".vm-adunit-body");g.bindConnect(u,"click",i,i.EVENT_CLICK),u.style.backgroundColor="rgba(0, 0, 0, 0.3)",u.style.width=window.innerWidth+"px",p.style.margin="auto",d.on(y,function(){l.style.display="none",l.style.visibility="hidden"}),d.on("redraw",function(){var e=h.getWinWidth(),t=h.getWinHeight(),i=window.screen&&window.screen.availHeight||t,o=h.getScrollX(),n=h.getScrollY(),r=h.getStyle(l),a=parseFloat(r.height).toFixed(1),s=window.outerWidth/window.innerWidth,c={width:e,height:a};1.45<s?d.fire(y):(u.style.width=s<1.1?(l.style.position="fixed",l.style.top="auto",l.style.left="0px",l.style.bottom="0px",l.style.transform="",window.innerWidth+"px"):(l.style.position="absolute",l.style.left=o+"px",l.style.bottom="auto",l.style.transform=["scaleY(",parseFloat(Math.pow(t,1.1)/(1.1*i)).toFixed(3),")"].join(""),l.style.top=[8+t+n-1.3*c.height,"px"].join(""),c.width+"px"),l.style.width=c.width+"px",l.style.height=c.height+"px",l.style.display="block",l.style.visibility="visible",p.style.margin="auto")})}v.adImpression({product:n,hookId:d.settings.vibrantParameters.hookId,setId:d.settings.vibrantParameters.setId,source:e}),t(),r.enabled&&window.setTimeout(function(){d.fire("close")},r.interval)},close:function(e,t,i){t===client.Log.closeSource.AD&&(f=!1,o.disableAdCallback&&o.disableAdCallback());t===client.Log.closeSource.FORCE&&o.disableAdCallback&&o.disableAdCallback();v.adClose({product:n,hookId:e.settings.vibrantParameters.hookId,source:t||client.Log.closeSource.AUTO}),r.enabled&&t===client.Log.closeSource.AUTO&&window.setTimeout(function(){a.fire("fetchAd",{viewSource:o.viewSource,forceFlush:!0})},r.delay);i()}}),v.hookLoad({product:n,hookIds:e.vibrantParameters.hookId}),u&&"adhesion"===u.product&&"adhesion"!==n?u.fire("close",client.Log.closeSource.FORCE):u&&u.fire("close",client.Log.closeSource.AUTO),l.track(i,e.trackers,e.term),i.connect("opened",i,"impression"),i.connect(i.EVENT_CLICK,i,"click"),o.triggerSource&&i.once("opened",function(){i.fire("delegate",{triggerSource:o.triggerSource,source:client.Log.clickSource.HOOK})}),i.fire("open",o.viewSource),u=i)},t};var behaviour=behaviour||{};behaviour.AutoReveal=function(e,t,i,o){var s,n="VM_AUTOREVEAL",c=e.getInteger("global.autoreveal.maxpersession",1),r=e.getInteger("global.autoreveal.maxpertimeframe",2),a=1e3*e.getInteger("global.autoreveal.timeframe",180),d=e.get("mobile",!1),l=0,u=(new RegExp(/^()/),new RegExp(/^internal/),new RegExp(/^(?!internal)/));switch(e.getInteger("partner.autoreveal",0)){case 1:s=!0;break;case 2:s=!d;break;case 3:s=d;break;default:s=!1}function p(e){"undefined"!=typeof Storage&&(localStorage[n]=e)}function h(){if("undefined"!=typeof Storage)return localStorage[n]}function g(){"undefined"!=typeof Storage&&localStorage.removeItem(n)}function v(){var e=-1,t=h();if(!t)return 0;var i=t.split(",");if(2===(i||[]).length){var o=Date.now()-parseInt(i[1],10);e=parseInt(i[0],10),isNaN(o)||isNaN(e)||(r<=e&&o<a&&(e=-1),a<o&&g())}return e}function f(e){var t=e.getAdConfig().ads[0].creative,i=parseInt((t.diyValues||{}).autoreveal,10),o=u.test(t.creativeType)?0!==i:1===i;return e.isInViewport()&&!e.autoOpened&&o&&!e.isKeywordOnly}return o.on(client.app.trigger.load,function(){l=0}),{autoOpen:function(e,t){var i,o=t.hooks||[],n=t.viewSource;if(s&&!(c<=l)&&o.length&&!((i=v())<0))for(var r=0;r<o.length;r++){var a=o[r];if(f(a)){e.invoke({hook:a,viewSource:n}),a.autoOpened=!0,l++,"undefined"!=typeof Storage&&p([++i,Date.now()].join(","));break}}},revealsAllowed:function(){return s&&l<c},parseCookie:v,testOpenConditions:f,setAutorevealData:p,getAutorevealData:h,removeAutorevealData:g}};var behaviour=behaviour||{};behaviour.Daw=function(d,l,u,p,e,h,g){var t=window.innerWidth/2<300?300:Math.round(window.innerWidth/2),i=window.innerHeight,v=u.getInteger("partner.daw.width",t),f=u.getInteger("partner.daw.height",i),m=u.getBoolean("partner.daw.refresh",!0),y=u.getInteger("partner.daw.refreshtime",3e4);function o(){}return(o.prototype=new e.Observable).invoke=function(o){var n=u.get("partner.decorationtype","chrome");function r(){d.request("daw",{ids:["1:"+v+":"+f],count:1},function(e){var t,i;e.hasOwnProperty(1)&&(i=e[1][0],t=l.adunit.create({product:"daw",settings:i,templateSettings:{cdnUrl:"//"+u.cdn.internal,id:i.ads[0].creative.value},creativeLoad:function(e){var t=p.waterfall.select(e,"daw",n);return n=t.decoration,t.creative},render:s,open:c,close:a}),h.hookLoad({product:"daw",hookIds:i.vibrantParameters.hookId}),g.track(t,i.trackers,i.term),t.connect("opened",t,"impression"),t.connect(t.EVENT_CLICK,t,"click"),t.fire("open",o.viewSource))})}function a(e,t,i){h.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||client.Log.closeSource.AUTO}),m&&t===client.Log.closeSource.AUTO&&window.setTimeout(function(){r(),d.forceFlush()},1500),i()}function s(e,t){e.position=new l.position.Fixed({bottom:0,right:10},{animate:!0}),t(null,e)}function c(e,t,i){e=l.decoration.decorate(e,{decorationType:n}),h.adImpression({product:e.product,hookId:e.settings.vibrantParameters.hookId,setId:e.settings.vibrantParameters.setId,source:t}),i(),m&&window.setTimeout(function(){e.fire("close")},y)}r()},o};var behaviour=behaviour||{};behaviour.DropInPlacement=function(r,a,s,e,c,d){var l="dropin";function t(){}return(t.prototype=new e.Observable).invoke=function(o){var e=o.hook,t=e.getAdConfig(),i=e.getProduct(),n=r.adunit.create({product:i,settings:t,templateSettings:{cdnUrl:"//"+a.cdn.internal,id:t.ads[0].creative.value},creativeLoad:function(e){var t=s.waterfall.select(e,"dropin",l);return l=t.decoration,t.creative},render:function(e,t){e.position=new r.position.Fixed({bottom:0},{animate:!1}),t(null,e)},open:function(e,t,i){e=r.decoration.decorate(e,{decorationType:l}),c.adImpression({product:e.product,hookId:e.settings.vibrantParameters.hookId,setId:e.settings.vibrantParameters.setId,source:t}),i()},close:function(e,t,i){t===client.Log.closeSource.AD&&o.disableAdCallback&&o.disableAdCallback();c.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||client.Log.closeSource.AUTO}),i()}});c.hookLoad({product:n.product,hookIds:t.vibrantParameters.hookId}),d.track(n,t.trackers,t.term),n.connect("opened",n,"impression"),n.connect(n.EVENT_CLICK,n,"click"),o.triggerSource&&n.once("opened",function(){n.fire("delegate",{triggerSource:o.triggerSource,source:client.Log.clickSource.HOOK})}),n.fire("open",o.viewSource)},t};var behaviour=behaviour||{};behaviour.Inline=function(i,u,p,h,e,g,v,f){function t(){this.adConfig=p.get("partner.inline",{})}return(t.prototype=new e.Observable).invoke=function(n){var r=p.get("partner.inline.useinstorybehaviour",!1),a=n.hook,e=a.getWidth(),t=a.getId()+":"+this.adConfig.get("adwidth",e)+":"+this.adConfig.get("adheight",360),s="standard";function c(e,t,i){g.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||client.Log.closeSource.AUTO}),i()}function d(e,t){e.position=r?new u.position.Instory(a,p):new u.position.Inline(a.getDomNode(),p),t(null,e)}function l(e,t,i){e=u.decoration.decorate(e,{decorationType:s}),g.adImpression({product:e.product,hookId:e.settings.vibrantParameters.hookId,setId:e.settings.vibrantParameters.setId,source:t}),i()}i.request("inline",{ids:[t],count:1},function(e){var t,i,o=a.getId();e[o]?(t=e[o][0],r&&"function"==typeof a.getWidth&&(t.container={width:a.getWidth()}),i=u.adunit.create({product:"inline",settings:t,templateSettings:{cdnUrl:"//"+p.cdn.internal,id:t.ads[0].creative.value},creativeLoad:function(e){var t=h.waterfall.select(e,"inline",s);return s=r?"instory":"standard",t.creative},render:d,open:l,close:c}),g.hookLoad({product:"inline",hookIds:t.vibrantParameters.hookId}),v.track(i,t.trackers,t.term),i.connect("opened",i,"impression"),i.connect(i.EVENT_CLICK,i,"click"),i.fire("open",n.viewSource)):f.notifyFailure("inline")})},t};var behaviour=behaviour||{};behaviour.InstoryHeightCalc=function(c){return function(e,t,i){var o=c.getWinHeight();if(t&&o){var n=.55*(o+t),r=0<n?n:500,a=t;if(a=(a=t<(a=i<r?r-i:0)?t:a)<0?0:a,"in"===e.getAttribute("data-mouse")&&a<t){var s=t-a;window.scrollBy(0,s),a=t,e.setAttribute("data-mouse","out")}return a}}};var behaviour=behaviour||{};behaviour.ScriptsLoader=function(e,t){for(var o,i=e.getJSON("scripts",[]),n=document.head||document.getElementsByTagName("head")[0],r=0;r<i.length;r++)if("captify"===i[r].source){o=i[r].pixel;break}var a=t.once(function(e){var t=(e||[]).map(function(e){return e.getAdConfig().term.keyword}).join(" "),i=document.createElement("script");i.type="text/javascript",i.async=!0,i.text=o.replace("${KEYWORDS}",t),n.appendChild(i)});return{invoke:function(e){o&&a(e.hooks)}}};var behaviour=behaviour||{};behaviour.Tooltip=function(d,l,i,o,p,u,h,g,v,t,n){var f=i.get("partner.intext",{}),m=f.get("coverhook",!1),y=i.get("partner.decorationtype","chrome"),w=[],b={},k={placeAboveHook:function(e,t,i){var o=e.clone();switch(o.setCenter(t.getCenter()),i){case"cover":case"1":o.shiftY(-(e.getHeight()-t.getHeight())/2-7);break;case"center":case"centre":break;default:o.shiftY(-(e.getHeight()+t.getHeight())/2)}return o},placeBelowHook:function(e,t,i){var o=e.clone();switch(o.setCenter(t.getCenter()),i){case"cover":case"1":o.shiftY((e.getHeight()-t.getHeight())/2+11);break;case"center":case"centre":break;default:o.shiftY((e.getHeight()+t.getHeight())/2)}return o}};function e(){var e=this;u.Observable.call(this),t.on(client.app.inview.animationStart,function(){e.closeOpenTooltips()})}return e.prototype=new u.Observable,e.isAnyOpen=function(){return g.some(w,function(e){return e.isOpen()})},e.prototype.closeOpenTooltips=function(){t.fire(client.app.intext.tooltipClose),g.forEach(w,function(e){e.isOpen()&&e.fire("close",client.Log.closeSource.AUTO)})},e.prototype.invoke=function(r){var e,a=this,s=r.hook,c=s.getAdConfig();s===this.activeHook&&this.activeUnit.isOpen()||(i.getInteger("programmaticOverride",0)&&s.getWaterfallOverrideAllowed()?n.getAdForHook(s,function(e){if(e){var t=s.id,i=c.vibrantParameters.adProviderId,o=e.vibrantParameters.hookId,n=e.vibrantParameters.adProviderId;h.hookLoad({product:"intext",hookIds:o}),h.hookReplacement({product:"intext",oldHookId:t,newHookId:o,oldAdProviderId:i||-1,newAdProviderId:n||-1,reason:client.Log.hookReason.OVERRIDE}),s.adConfig=e,s.id=o,r.adConfig=e}(e||s.liveLookupFailsShowUnderlyingAd)&&(s.resetWaterfallOverrideAllowed(),a.invoke(r),s.hookClickActive=!0)}):(e=b[s.getId()]||function(e,r,t){var n=y,a=l.adunit.create({product:"intext",settings:e,openDelay:f.getInteger("opendelay",null),closeDelay:f.getInteger("closedelay",null),templateSettings:{cdnUrl:"//"+i.cdn.internal,id:e.ads[0].creative.value},creativeLoad:function(e){var t=o.waterfall.select(e,"tooltip",n);return n=t.decoration,t.creative},render:function(e,t){var i,o=e.getTemplateHookParams()||{},n=(e.getMergedCreativeParams()||{}).coverHook;e.position=new l.position.Absolute(function(){return function(e,t,i,o){var n,r,a,s=p.getAbsoluteViewport(),c=i.coverhook||o||m,d=[],l=0;for(var u in k)if(k.hasOwnProperty(u)){if(n=k[u](e,t,c),s.contains(n))return n;d.push(n)}if(g.forEach(d,function(e){var t=s.getIntersection(e);t&&t.pixels()>l&&(l=t.pixels(),r=e,a=t)}),r)return r.shiftY(a.top-r.top||a.bottom-r.bottom),r.shiftX(a.left-r.left||a.right-r.right),r;return t.top>s.bottom?d[0]:d[1]}(a.getPosition(),r.getPosition(),o,n)}),i=p.onPositionChange(r.getDomNode(),function(){e.fire("domChange")},100),e.on("close",i),t(null,e)},open:function(e,t,i){e=l.decoration.decorate(e,{decorationType:n}),h.adImpression({product:e.product,hookId:e.settings.vibrantParameters.hookId,setId:e.settings.vibrantParameters.setId,source:t});var o=e.getTemplateHookParams()||{};r&&o.cursorStyle&&r.setCursorStyle(o.cursorStyle);i()},close:function(e,t,i){var o;r.disconnectAll(a),delete b[r.getId()];var n=g.once(function(){o&&o(),h.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||client.Log.closeSource.AUTO}),i()});g.isIE?d.setTimeout(n,300):o=u.bind(e.outerBox,"transitionend",n)}});v.track(a,e.trackers,e.term),a.connect("opened",a,"impression"),a.connect(a.EVENT_CLICK,a,"click"),r.connect(pagecontent.Hook.EVENT_HOOKIN,a,a.EVENT_MOUSEIN),r.connect(pagecontent.Hook.EVENT_HOOKOUT,a,a.EVENT_MOUSEOUT),r.connect(pagecontent.Hook.EVENT_CLICK,a,a.EVENT_CLICK),t.triggerSource&&a.once("opened",function(){a.fire("delegate",{triggerSource:t.triggerSource,viewSource:t.viewSource,source:client.Log.clickSource.HOOK})});return a.on(a.EVENT_MOUSEOUT,function(){a.fire("scheduleClose",client.Log.closeSource.AUTO)}),a.on(a.EVENT_MOUSEIN,function(){a.cancelScheduledClose()}),r.on(pagecontent.Hook.EVENT_HOOKOUT,function(){a.isOpen()&&a.fire("scheduleClose",client.Log.closeSource.AUTO)}),w.push(a),b[r.getId()]=a}(c,s,r)).isOpen()?e.cancelScheduledClose():(this.closeOpenTooltips(),e.fire("open",r.viewSource||client.Log.viewSource.MOUSE_OVER)))},e};var behaviour=behaviour||{};behaviour.VibrantView=function(e,t,i,o){var n,r,a=e.get("geo"),s=e.get("partner.vibrantview",{}),c=!o.includes(s.getArray("geoblock",[]),a.cc),d=!(0!==(n=s.getInteger("minutes",5))&&(r=parseInt(t.get("VM_VVTIME"),10))&&+new Date-r<6e4*n),l=s.getBoolean("onload",e.getBoolean("mobile",!1)),u=s.getBoolean("onscroll",e.getBoolean("mobile",!1)),p=s.get("maxviews",1);function h(){i.Observable.call(this),this.hookBucket=[],this.openedHooks={},this.views=0,this._allowOnLoad=l,this._allowOnScroll=u,this._hasLoaded=!1,this._lastTiggeredHook=null,this._isBlocked=!1,c&&d&&(l||u)?this.on("scroll",function(e){var t=!(0===e.data.direction&&this._allowOnLoad),i=!(0<e.data.direction&&this._allowOnScroll);t&&i||(this.views>=p?this.fire("maxViewsReached"):this._lastTiggeredHook&&this._lastTiggeredHook.isInViewport()||e.data.viewSource)},this):this._isBlocked=!0}return(h.prototype=new i.Observable).invoke=function(e){if(this._isBlocked)return!0;this.hookBucket=this.hookBucket.concat(e.hooks),this._allowOnLoad&&!this._hasLoaded&&client.Log.viewSource.LOAD,this._hasLoaded=!0},h.prototype.maxViews=p,h};var behaviour=behaviour||{};behaviour.Wordflip=function(i,t,e,n,r,o,a,s){var c="highlight",d="-1000px",l=!1;function u(){var t=this;o.Observable.call(this),this.partnerControl=e.getBoolean("partner.intext.wordflip",!!e.mobile),this.triggerFlip=t.partnerControl?function(e){e._wordflip.flip()}:function(e){t.fire(e.getProduct()+":"+c,{hook:e,viewSource:client.Log.viewSource.MOUSE_OVER})},this.hookBucket=[],this.firstFlipped=!1,this.on("doflip",function(){n.some(t.hookBucket,function(e){if(e.isInViewportArea(.75)&&!e.triggered&&!e._wordflip.flipped&&!l)return t.triggerFlip(e),!0})}),this.connect("scroll",this,"doflip"),this.on("resize",function(){n.forEach(t.hookBucket,function(e){e._wordflip.positionWordflip()})}),s.on(client.app.inview.animationStart,function(){l&&l._wordflip.closeFlip()})}function p(e,t){this.hook=e,this.channel=t,this.boxWidth=0,this.textNode=this.hook.getDomNode().firstChild,this.hookStyling=this.hook.adConfig.ads[0].hook||{},this.wordflipSetup(),this.hookStyling.text||this.hookStyling.icon?(this.hookText(),this.hookIcon()):this.defaultStyle(),this.positionWordflip(),this.flipEvents()}return(u.prototype=new o.Observable).invoke=function(e){var o=this;function i(e,t,i){return function(){o.fire(t,{hook:e,viewSource:i,triggerSource:t})}}this.hooks=e.hook&&[e.hook]||e.hooks||a.getVisibleHooks(),this.hooks.length&&(n.forEach(this.hooks,function(e){var t=(((((e.adConfig||{}).ads[0]||{}).creative||{}).payload||{}).params||{}).keywordOnly;e.eventsBound||t||(e.eventsBound=!0,e._wordflip=new p(e,o),o.hookBucket.push(e),e.on(pagecontent.Hook.EVENT_CLICK,function(){i(e,"click",client.Log.viewSource.MOUSE_OVER)}),e.on(pagecontent.Hook.EVENT_HOOKIN,function(){i(e,"hover",client.Log.viewSource.MOUSE_OVER),o.triggerFlip(e)}),e.on(pagecontent.Hook.EVENT_HOOKOUT,i(e,"mouseleave",client.Log.viewSource.MOUSE_OVER)),r.onPositionChange(e.getDomNode(),function(){e._wordflip.positionWordflip()},250))}),o.fire("doflip"))},p.prototype.flip=function(){if(l&&this.hook!==l)l._wordflip.closeFlip();else if(this.hook===l)return;l=this.hook,this.openFlip(),this.channel.fire(this.hook.getProduct()+":"+c,{hook:this.hook,viewSource:client.Log.viewSource.MOUSE_OVER}),this.flipped=!0},p.prototype.openFlip=function(){var e=this;this.box.style.visibility="visible",this.box.style.opacity=1,n.isIE&&(this.box.style.filter="alpha(opacity = 100)"),this.closeDelay=i.setTimeout(function(){e.closeFlip()},1800)},p.prototype.closeFlip=function(){var e,t;this.closeDelay&&i.clearTimeout(this.closeDelay),e=n.once(function(){t&&t(),l=!1}),n.isIE?(i.setTimeout(e,550),this.box.style.filter="alpha(opacity = 0)"):(t=o.bind(this.box,"transitionend",e),i.setTimeout(e,550)),this.box.style.opacity=0},p.prototype.wordflipSetup=function(){this.box=t.createElement("div"),this.box.className="vm-wordflip",this.box.style.position="absolute",this.box.style.top=d,this.box.style.left=d,this.box.style.visibility="hidden",this.box.style.opacity=0,this.box.style.height=this.textNode.offsetHeight+2+"px"},p.prototype.positionWordflip=function(){this.box.style.width=this.boxWidth+"px",t.body.appendChild(this.box),this.hookCenter=r.getPosition(this.textNode).getCenter(),this.boxPos=r.getPosition(this.box),this.boxPos.setCenter(this.hookCenter),r.setPosition(this.box,this.boxPos)},p.prototype.hookIcon=function(){this.hookStyling.icon&&(this.icon=t.createElement("img"),this.icon.src=this.hookStyling.icon,this.box.appendChild(this.icon),this.boxWidth+=24)},p.prototype.hookText=function(){var e=this.hookStyling.text||this.hook.adConfig.term.keyword;this.textBox=t.createElement("span"),r.setTextContent(this.textBox,e),this.box.appendChild(this.textBox),this.box.className+=" vm-wordflip-styled",this.boxWidth=r.getTextDimensions(e).getWidth()+2},p.prototype.defaultStyle=function(){this.box.className+=" vm-wordflip-default",this.boxWidth=this.textNode.offsetWidth+4},p.prototype.flipEvents=function(){o.bindConnect(this.box,"click",this.hook,pagecontent.Hook.EVENT_CLICK),e.mobile||(o.bindConnect(this.box,"mouseenter",this.hook,pagecontent.Hook.EVENT_HOOKIN),o.bindConnect(this.box,"mouseleave",this.hook,pagecontent.Hook.EVENT_HOOKOUT))},u};var bidding=bidding||{};bidding.Mediator=function(n,e,d,l,r,t,a,s){var u,i=d.getArray("partner.exAdProviders",[]),o=d.get("headerBidders",[]),p=[],h={},c=d.getArray("partner.products",[]),g=null,v=x(o,i);function f(e){g=e}function m(){u=Date.now()}function y(){return c}var w={daw:!0};function b(e){for(var t=0;t<p.length;t++)if(p[t].getName()===e)return p[t]}function k(e,t){var i=b(e);i&&(i.bids=l.filter(i.getBids(),function(e){return e.product!==t}))}function C(e,t){var i=b(e);if(i)for(var o=0;o<i.bids.length;o++)if(i.bids[o].zoneId===t){var n=i.bids[o];n.impressions++,s.info("HeaderBid Impression:  Bidder"+n.bidderName+" Product:"+n.product+" Width:"+n.width+" Height:"+n.height+" ZoneId: "+n.zoneId+" Impressions: "+n.impressions+" ImpressionCap: "+n.impressionCap);break}}var E=l.once(function(e){var i=[];s.info("HEADER BIDDERS");var o=0;if(l.forOwn(e,function(e,t){e&&e.length&&(s.info("PRODUCT "+t+":"),l.forEach(e,function(e){i.push({bidderName:e.bidderName,product:a.hash[e.product],width:e.width,height:e.height,cpm:e.cpm}),s.info(e.bidderName+"  "+e.zoneId+" "+a.hash[e.product]+" "+e.width+"x"+e.height+" "+e.cpm),o++}))}),0<o)g.headerBid(i);else if(p.length){var t=p.reduce(function(e,t){return e+t.name+" "},"");s.warn("** No bids for "+t)}else s.info("No header bidders enabled");p.forEach(function(e){e.bids&&e.bids.length||g.noHeaderBid(e.name)}),s.info("END HEADER BIDDERS")});function I(e,t,i){var o;switch(e.name){case"criteo":o=new CriteoBidder(e.group,t,i);break;case"freewheel":o=new FreewheelBidder(t)}o&&(o.load(n,r),p.push(o))}function x(e,t){var i=[];return l.forEach(e,function(e){-1===t.indexOf(e.id)&&i.push(e)}),i}return t.on(client.app.bid.impression,function(e){var t=e.data.product,i=e.data.bidder,o=e.data.zoneId;w[t]&&k(i,t),C(i,o)}),{init:function(e){for(var t in f(e),a.hash)a.hash.hasOwnProperty(t)&&(h[a.hash[t]]=parseInt(t,10),"adhesion"===a.hash[t]&&(h.daw=parseInt(t,10)));var i=y();m(),v.map(function(e){I(e,i,d.ipid)})},setLogModule:f,setStartTime:m,getBiddersByProduct:function(c){setTimeout(function e(){for(var t,i,o=!0,n=0;n<p.length;n++)if("completed"!==p[n].getStatus()){o=!1;break}if(o||1e3<Date.now()-u){t=p,(i=d.get("headerBids",null))&&l.forEach(t,function(t){t.bids=i.filter(function(e){return t.getName()===e.bidderName})});var r={};l.forEach(p,function(i){if("completed"===i.getStatus()){var e=i.getBids();l.forEach(e,function(e){if(r[e.product]||(r[e.product]=[]),e){var t=l.extend({},{bidderName:i.name,product:h[e.product],cpm:e.cpm,height:e.height,width:e.width,zoneId:e.zoneId});r[e.product].push(t)}})}});var a=y(),s=[];return l.forEach(["intext","inview","instory"],function(e){-1<a.indexOf(e)&&(s=s.concat(r[e]||[]))}),r.intext=s,delete r.inview,delete r.instory,E(r),c(null,r)}setTimeout(e,10)},0)},getBid:function(t,e){var i,o=p.find(function(e){return e.getName()===t});if(o&&"completed"===o.getStatus()){var n=o.getBidByZoneId(e);if(n)if(n.impressions>=n.impressionCap)for(var r=o.getBids()||[],a=0;a<r.length;a++){var s=r[a];if(s.zoneId!==n.zoneId&&s.product===n.product&&s.width===n.width&&s.height===n.height&&s.impressions<s.impressionCap){i=s;break}}else i=n}return i},removeBidder:function(t){p=l.filter(p,function(e){return e.getName()!==t})},removeBidderProduct:k,bidImpression:C,getActiveBidders:function(){return p},createBidder:I,findActiveBidderByName:b,getAvailableBidders:x,getSupportedProducts:y}};var client=client||{};client.AdFetcher=function(h,i,g,e,t,v){var f=e.get("articleHash",e.get("urlHash")),m=g.values(t.hash),n={},r={},y=function(e,t){i.fire(client.app.ads.newAds,{product:e,ads:t})},o=function(e){if(!g.isEmpty(n)){(e=e||{}).liveLookup=!1;var o=r;h.getAds(n,e,function(i){g.forOwn(o,function(e,t){y(t,i[t]),o[t](i[t])})}),n={},r={}}};return i.on(client.app.context.key,function(e){f=e.data.contextKey}),{request:function(e,t,i){n[e]=t,r[e]=i},flush:o,forceFlush:function(){o({contextKey:f})},getAdForHook:function(e,r){var a=e.textNodeId,t=a,s=!1,i=e.getAdConfig(),c=i?i.product:"",o=i&&i.term?[i.term.keyword]:[];if(-1===["intext","inview"].indexOf(c))return r();if("inview"===c){var n=e.domNode?v.findParentParagraph(e.domNode):null;if(!n)return r();var d=v.getTextNodeBounds(n).getWidth(),l=Math.floor(d);if(!l)return r();t+=":"+l+":inview"}var u={contextKey:f,keywordOverrideList:o.join(),liveLookup:!0},p={intext:{ids:[t],count:1,internal:!0,autoreveal:!1}};setTimeout(function(){s||(s=!0,r())},2e3),h.getAds(p,u,function(e){var t,i;if(!s){s=!0;for(var o=Object.keys(e),n=0;n<o.length;n++)if(-1!==m.indexOf(o[n])){i=e[o[n]];break}i&&i[a]&&i[a].length&&(y(c,i),t=g.extend({},i[a][0],{product:c})),r(t)}},function(){s||(s=!0,r())})}}};var client=client||{};client.AdsMonitor=function(e,d){var l={},u=[],p={},h={},g={};function t(e){var t=g[e];return t?[t]:[]}return e.on(client.app.ads.newAds,function(e){var t,i,o,n,r=e.data,a=r.product,s=r.ads;for(i in s)if(s.hasOwnProperty(i)&&s[i][0]&&s[i][0].vibrantParameters){t=(o=s[i][0]).vibrantParameters.keywordId,n=o.vibrantParameters.setId,t&&!l[t]&&(l[t]=1,u.push(t)),p[a]=p[a]||{},h[a]=h[a]||[],(g[a]=n)&&!p[a][n]&&(p[a][n]=1,h[a].push(n));var c=o.ads[0].creative||{};d.info("AD: Product:"+o.vibrantParameters.product+" keyword: "+(o.term||{}).keyword+" creativeId: "+c.value+" setId: "+n)}}),{getUsedSets:function(e){return"image"===e?t(e):h[e]||[]},getUsedKeywords:function(){return u||[]},getLastUsedSet:t}};var client=client||{};client.Api=function(c,d,l,a,u,p,h,n,e){var s=1,g=l.getBoolean("partner.norepetitive",!1);function v(e,t,i,o){var n=i+"_"+s++,r="//"+l.apiHost+e+"?callback="+n+"&"+p.toQueryString(t);c[n]=function(){o.apply(this,arguments);try{delete c[n]}catch(e){c[n]=void 0}},a.appendScript(r)}return{contextualise:function(e,t,i){var o=p.map(e,function(e){return{id:e.getId(),text:e.getTextContent()}}),n=p.extend({ipid:l.ipid,pvu:l.pvu,urlHash:l.urlHash,nodes:o},t);!function(e,t,i){var o=new XMLHttpRequest,n="//"+l.apiHost+e;function r(){i(JSON.parse(o.responseText))}function a(){i({success:!1,errors:["There was an error sending the request"]})}function s(){i({success:!1,errors:["Request timed out"]})}"withCredentials"in o?(u.bind(o,"load",r),u.bind(o,"error",a),u.bind(o,"timeout",s),o.open("POST",n,!0),o.setRequestHeader("Content-Type","application/json"),o.withCredentials=!0,o.send(JSON.stringify(t))):c.XDomainRequest?((o=new XDomainRequest).onprogress=function(){},o.onload=r,o.onerror=a,o.ontimeout=s,o.open("POST",n),setTimeout(function(){o.send(JSON.stringify(t))},0)):i({success:!1,errors:["Browser does not support CORS requests"]})}("/context/"+d.context,n,function(e){e&&e.success&&i(e)})},logContext:function(e,t){var i={ipid:l.ipid,contextKey:e,pvu:l.pvu};v("/context/"+d.context,i,"ctx_log",function(e){e&&t(e)})},getAds:function(o,a,s,c){e.getAudienceData(function(e,t){var i=t||[];n.getBiddersByProduct(function(e,t){var n=t||{},r=p.extend({ipid:l.ipid,pvu:l.pvu,kw:h.getUsedKeywords().join(","),audiences:i.join(",")},a);p.forOwn(o,function(e,o){p.forOwn(e,function(e,t){r[o+"."+t]=e,r[o+".sets"]=g?h.getUsedSets(o).join(","):"";var i=n[o]||[];r[o+".bidders"]=encodeURIComponent(JSON.stringify(i))})}),v("/ad/"+d.ad,r,"vib",function(e){e&&e.success?s(e):c&&c(e)})})})},log:function(e,t,i){v(e,i,"log",function(e){e&&t&&t(e)})},jsonpRequest:v}};var client=client||{};client.AppChannel=function(e){return client.app={},client.app.main={initialise:"initialise"},client.app.ads={newAds:"newAds"},client.app.context={key:"contextKey"},client.app.trigger={newContent:"newContent",load:"load",scroll:"scroll",resize:"resize",zoom:"zoom",touchstart:"touchstart",touchend:"touchend",contextComplete:"contextComplete",dmpBehaviourDrop:"dmpBehaviourDrop"},client.app.intext={tooltipClose:"inText:closeTooltips"},client.app.inview={animationStart:"inView:AnimationStart",animationEnd:"inView:AnimationEnd"},client.app.instory={animationStart:"inStory:AnimationStart",animationEnd:"inStory:AnimationEnd",openPc:"inStory:openPc"},client.app.inline={animationStart:"inline:AnimationStart",animationEnd:"inline:AnimationEnd"},client.app.bid={impression:"headerBidding:Impression"},new e.Observable};var client=client||{};client.CmdMessenger=function(e,t,r,i,o,n,a,s){var c=["http://images.intellitxt.com","https://images.intellitxt.com","http://mymachine.intellitxt.com","https://mymachine.intellitxt.com","http://localhost","*"];function d(e){switch(e.cmdType){case"LOG":!function(e,t,i){var o=a.getParamsByHookId(t);if(o){var n=r.extend({},i,o||{});switch(e){case"CLICK_THROUGH":a.clickThrough(n)}}else s.error("processLogCommand: No registered params for this hookId")}(e.cmd,e.hookId,e.params);break;case"TRIGGER":"VM_TRIGGER"===e.cmd?t.fire(client.app.trigger.manual):s.error("processTriggerCommand: Invalid cmd")}}function l(e){var t;if(-1!==c.indexOf(e.origin)||-1!==c.indexOf("*"))try{(t=JSON.parse(e.data))&&d(t)}catch(e){}}return window.addEventListener?window.addEventListener("message",l,!1):window.attachEvent&&window.attachEvent("onmessage",l),{}};var client=client||{};client.Config=function(i,n,e){var r={},o={};return r.get=function(t,i){var o=this;return n.some(t.split("."),function(e){if(!o.hasOwnProperty(e)){if(void 0!==i)return o=i,!0;throw new Error('Config item "'+t+'" not found')}o=o[e]}),n.isObject(o)&&n.extend(o,r),o},r.getArray=function(e,t){var i=this.get(e,t);return"string"==typeof i?i.split(","):i},r.getBoolean=function(e,t){var i=this.get(e,t);return"string"==typeof i?"1"===i:i},r.getInteger=function(e,t){var i=this.get(e,t);return"string"==typeof i?parseInt(i,10):i},r.getJSON=function(e,t){var i=this.get(e,t);return"string"==typeof i?JSON.parse(i):i},o.execute=function(t,e){n.forEach(e,function(e){e(t)})},i=n.extend(i,r),e&&n.forEach(e,function(e){var t=[i].concat(e.args);o[e.type].apply(this,t)}),i};var client=client||{};client.ContentMonitor=function(r,a,s,c,e,d,l,u){var p,t=a.getBoolean("mobile",!1)?"mobile":"desktop",h=a.getArray("partner.gallery.selectors",!1),g={},n=!0,v={};function f(e,t){var i={primary:e.primary};i.primary&&a.get("articleHash",!1)?i.articleHash=a.get("articleHash"):e.hasOwnProperty("articleId")&&(i.articleId=e.articleId);var o=l.findTextNodes(e.textNodes),n=h?u.filter(c.findImages(e.imageNodes),function(e){return!s.parentHasSelector(e.image,h)}):c.findImages(e.imageNodes);o.length&&(g[e.articleId]=!0),d.contextualise(o,i,function(e){e&&(p.fire(client.app.main.initialise,{pubXReached:e.pubXReached}),p.fire(client.app.trigger.newContent,{textNodes:o,images:n}),e.articleHash&&p.fire(client.app.context.key,{contextKey:e.articleHash}),t(e.articleHash))})}return v.dynamicStrategy=function(t,i){({debounce:function(){var e=u.debounce(function(){i(),s.onViewportChange(e)},t.interval);s.onViewportChange(e)},polling:function(){u.poll(function(){return!0},i,t.interval)},click:function(){}})[t.type](),i()},v.parseNewContent=function(e,t,i){var o=i.innerText||e.getAttribute(i);g.hasOwnProperty(o)||(f({textNodes:e.childNodes,imageNodes:e.childNodes,articleId:o,primary:n},function(e){t.contextKey=e||a.get("articleHash",a.get("urlHash")),p.fire(client.app.trigger.load),r.flush(t)}),n=!1)},v.standardPage=function(){var e=a.get("partner.intext.selectors"),t=a.get("partner.image.selectors"),i={};f({textNodes:e,imageNodes:t,primary:!0},function(){i.contextKey=a.get("urlHash"),p.fire(client.app.trigger.load),r.flush(i),s.onViewportChange(function e(){p.fire(client.app.trigger.scroll),r.flush(i),s.onViewportChange(e)})})},v.run=function(e){var o={},n=a.getJSON("partner.dynamic",{});p=e,n.get("selector",!1)?(a.get("partner.intext",!1)&&(a.partner.intext.selectors=n.get("selector.css")),v.dynamicStrategy(n.getJSON("strategy."+t,{type:"debounce",interval:200}),function(){var i=n.get("selector.identifier",!1);p.fire(client.app.trigger.scroll),u.forEach(document.querySelectorAll(n.get("selector.css")),function(e){var t=i?document.querySelector(i):n.get("selector.property","id");v.parseNewContent(e,o,t)}),r.flush(o)})):v.standardPage()},v};var client=client||{};client.CookieSync=function(n,r,a,s,c,d,l){var t=/\:(\w+)/g,e=window.location.protocol,u=-1<e.indexOf("s");r.syncDetails&&s.forOwn(r.syncDetails,function(e){e.url=e.url.replace(t,"{{$1}}")});var p=e+"//"+r.cookieSyncHost+"/csync/"+n.csync+"/{{provider}}/",i=r.get("readConsentLocation","");return{sync:function(){void 0!==r.userId&&l.cookiesAllowed()&&s.forOwn(r.syncDetails,function(e,t){var i=s.replaceUrlParams(p,{provider:t}),o=u&&e.secureUrl?e.secureUrl:e.url;i+=e.userIdPlaceholder;var n=s.replaceUrlParams(o,{userId:r.userId,redirect:i});switch(e.type){case"image":a.dropImage(n);break;case"iframe":a.appendIFrame(n);break;default:throw c.auditError({message:"[CookieSync] Unknown cookie sync type for "+t+": "+e.type})}})},syncConsent:function(){if(r.get("consent",{}).gdprApplies&&(window.addEventListener("message",function(e){var t=e.data.vmReadConsent;if(t&&t.consentStr){var i="/csync/"+n.csync,o=s.replaceUrlParams(i,{consentStr:t.consentStr});d.jsonpRequest(o,{consentStr:t.consentStr},"csync",function(e){e&&e.consentData&&l.updateConsent(e.consentData)})}}),r.getBoolean("partner.syncconsent",!0))){var e=document.createElement("iframe");e.setAttribute("style","width:1px;height:1px;position:absolute;left:-99px;top:-99px;"),e.setAttribute("src",i),document.body&&document.body.appendChild(e)}}}};var client=client||{};client.Cookie=function(o,n){var t=new RegExp("^"+(n.cookiesNS||"VM_"));return{get:function(e){return e&&t.test(e)&&decodeURIComponent(o.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},set:function(e,t,i){n.dnt||(o.cookie=e+"="+encodeURIComponent(t)+";path=/"+(i?";max-age="+i:""))}}};var client=client||{};client.debugLog=function(t,e){var n=1,r=2,a=3,i=t.get("debugMode",0);function s(){return i}function o(e,t,i){if(s()&&!i){var o;switch(t){case n:o="color:green;";break;case r:o="color:orange;";break;case a:o="color:red;";break;default:o="color:green;"}console.log("%cVM: %c"+e,o,"color:black")}}return function(){if(s()){var e="IPID: "+t.ipid;e+=" PVU: "+t.pvu,e+=" PRODUCTS: "+t.partner.products,o(e+=" EXCLUDE ADPROVIDERS: "+t.partner.exAdProviders)}}(),{info:function(e,t){o(e,n,t)},warn:function(e,t){o(e,r,t)},error:function(e,t){o(e,a,t)}}};var client=client||{};client.Debug=function(e,t,i,o,n,r){if(i.debugHost){var a="//"+i.get("cdn.debugjs"),s="//"+i.get("cdn.debugcss");e.VM.DEBUG=e.VM.DEBUG||{},e.VM.DEBUG.api={config:i,dom:o,events:n,utils:r},o.appendStyleSheet(s),o.appendScript(a)}};var client=client||{};client.Dom=function(d,s,n,a){var r,c=s.head||s.getElementsByTagName("head")[0];client.Dom.ELEMENT_NODE=1,client.Dom.TEXT_NODE=3;var l="-1000px",i=["<img src","<span ","<iframe "],o=["html"];function e(){return void 0!==d.innerWidth?d.innerWidth:s.documentElement.clientWidth}function t(){return void 0!==d.innerHeight?d.innerHeight:s.documentElement.clientHeight}function u(){return void 0!==d.pageXOffset?d.pageXOffset:s.documentElement.scrollLeft}function p(){return void 0!==d.pageYOffset?d.pageYOffset:s.documentElement.scrollTop}function h(){return new E({top:p(),left:u(),bottom:p()+t(),right:u()+e()})}function g(e,t,i){var o=s.createElement("script");return o.type="text/javascript",o.async=!0,o.src=e,i=i||c,s.addEventListener?n.bind(o,"load",function(){t&&t()}):o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,t&&t())},i.appendChild(o),o}function v(e,t){!0===t?v.sameWindow(e):v.newWindow(e)}function f(e){return e instanceof HTMLElement&&e.nodeType===client.Dom.ELEMENT_NODE}function m(e,t){var i;if(e&&"function"==typeof e.getBoundingClientRect){if(void 0===(i=e.getBoundingClientRect()).top||void 0===i.right||void 0===i.bottom||void 0===i.left)return console.error("getPosition: invalid rect"),null;var o=t?0:u(),n=t?0:p();return new E({top:i.top+n,right:i.right+o,bottom:i.bottom+n,left:i.left+o})}}function y(e,t){if(!f(e))throw new Error("Not an element");t=t||0;var i=m(e,!0),o=i.left+t,n=i.right+t,r=i.top+t,a=i.bottom+t;return[s.elementFromPoint(o,r),s.elementFromPoint(n,r),s.elementFromPoint(o,a),s.elementFromPoint(n,a)]}function w(e){return"function"==typeof d.getComputedStyle?d.getComputedStyle(e):e.currentStyle}function b(e,t){var n,i=w(e);return t=t||{},"none"!==i.display&&"hidden"!==i.visibility&&"0"!==i.opacity&&(!t.overflowCheck||(n=m(e),!function e(t){var i=t.parentNode;if(null===i||i.nodeType!==client.Dom.ELEMENT_NODE)return!1;var o=w(i);return"hidden"===o.overflow&&0<parseInt(o.opacity,10)&&!n.getIntersection(m(i))||e(i)}(e)))}function k(e,t){a.isIE?e.innerText=t:e.textContent=t}function C(e,t){return e.matches?e.matches(t):a.includes(s.querySelectorAll(t),e)}function E(e){if(!(e&&"object"===_typeof(e)&&a.isFiniteNumber(e.top)&&a.isFiniteNumber(e.left)&&a.isFiniteNumber(e.bottom)&&a.isFiniteNumber(e.right)))throw new Error("Coord: obj is not valid");this.top=e.top,this.left=e.left,this.bottom=e.bottom,this.right=e.right}return v.newWindow=function(e){d.open(e)},v.sameWindow=function(e){s.location.href=e},r=s.createRange&&Range.prototype.getBoundingClientRect?function(e){var t=s.createRange();return t.selectNodeContents(e),new E(t.getBoundingClientRect()).shiftX(u()).shiftY(p())}:function(e){var t=e.parentNode,i=s.createElement("span");t.replaceChild(i,e),i.appendChild(e);var o=i.getBoundingClientRect();return t.replaceChild(e,i),new E(o).shiftX(u()).shiftY(p())},E.prototype.equals=function(e){var t=e instanceof E?e:new E(e);return this.top===t.top&&this.left===t.left&&this.bottom===t.bottom&&this.right===t.right},E.prototype.clone=function(){return new E(this)},E.prototype.getIntersection=function(e){var t,i;return i=e instanceof E?e:new E(e),(t=this).equals(i)?t.clone():t.bottom<=i.top||t.top>=i.bottom||t.right<=i.left||t.left>=i.right?void 0:new E({top:Math.max(t.top,i.top),left:Math.max(t.left,i.left),bottom:Math.min(t.bottom,i.bottom),right:Math.min(t.right,i.right)})},E.prototype.getCenter=function(){return{x:this.left+(this.right-this.left)/2,y:this.top+(this.bottom-this.top)/2}},E.prototype.setCenter=function(e){var t=this.getCenter();if(e&&"object"===_typeof(e)&&a.isFiniteNumber(e.x)&&a.isFiniteNumber(e.y))return this.top+=e.y-t.y,this.left+=e.x-t.x,this.bottom+=e.y-t.y,this.right+=e.x-t.x,this},E.prototype.pixels=function(){return(this.right-this.left)*(this.bottom-this.top)},E.prototype.shiftX=function(e){if(a.isFiniteNumber(e))return this.left+=e,this.right+=e,this},E.prototype.shiftY=function(e){if(a.isFiniteNumber(e))return this.top+=e,this.bottom+=e,this},E.prototype.contains=function(e){var t=e instanceof E?e:new E(e),i=this.getIntersection(t);return!!i&&i.equals(t)},E.prototype.getWidth=function(){return this.right-this.left},E.prototype.getHeight=function(){return this.bottom-this.top},E.prototype.getArea=function(){return this.getWidth()*this.getHeight()},{appendIFrame:function(e,t,i){var o=s.createElement("iframe");return o.src=e,o.style.display="none",i=i||s.body,n.bind(o,"load",function(){t&&t(null,o)}),o=i.appendChild(o)},appendDisposableIFrame:function(e,t,i){var o=s.createElement("iframe");return o.src=e,o.style.display="none",i=i||s.body,n.bind(o,"load",function(){i.removeChild(o),t&&setTimeout(t)}),o=i.appendChild(o)},appendScript:g,appendTextScript:function(e,t){var i=s.createElement("script");return i.type="text/javascript",i.async=!0,i.text=e,(t=t||c).appendChild(i),i},appendDisposableScript:function(e,t,i){var o=g(e,function(){t&&t(),i=i||c;try{i.removeChild(o)}catch(e){}},i);return o},appendStyleSheet:function(e){var t=s.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=e,c.appendChild(t),t},appendInlineStyle:function(e){var t=s.createElement("style");return t.type="text/css",k(t,e),c.appendChild(t),t},createIFrame:function(e,t){var i,o=s.createElement("iframe");return o.frameBorder=0,o.scrolling="no",o.marginWidth=0,o.marginHeight=0,o.hspace=0,o.vspace=0,o.style.position="static",e.width?(o.width=e.width,o.style.width=e.width+"px",e.fixMaxDimensions&&o.style.setProperty("max-width",e.width+"px","important")):(o.width="100%",o.style.width="100%"),e.height?(o.height=e.height,o.style.height=e.height+"px",e.fixMaxDimensions&&o.style.setProperty("max-height",e.height+"px","important")):(o.height="100%",o.style.height="100%"),t&&(i=n.bind(o,"load",function(){i(),t(null,o)})),o},dropImage:function(e,t){var i=s.createElement("img");return i.src=e,f(t)&&(i.style.setProperty("width","1px","important"),i.style.setProperty("height","1px","important"),t.appendChild(i)),i},findParentParagraph:function(e){for(var t;e.parentNode;)if("p"===(t=(e=e.parentNode).nodeName.toLowerCase())||"div"===t)return e;return null},elementHasNodes:function(t,e){return a.isArray(e)||(e=[e]),a.some(e,function(e){return t.querySelector(e)})},getTextNodeBounds:r,getTextDimensions:function(e,t){var i,o=s.createElement("span");return t=t||s.body,k(o,e),o.style.position="absolute",o.style.visibility="hidden",o.style.top=l,o.style.left=l,o.style.width="auto",o.style.height="auto",o.style.whiteSpace="nowrap",t.appendChild(o),i=r(o),o.parentNode.removeChild(o),i},isElement:f,isDocFragment:function(e){return!!e&&e.constructor===s.createDocumentFragment().constructor},getPosition:m,setPosition:function(t,i){a.forEach(["top","left","bottom","right"],function(e){i.hasOwnProperty(e)&&(t.style[e]=i[e]+"px")})},getDimension:function(e){var t;if(f(e))return{width:(t=e.getBoundingClientRect()).right-t.left,height:t.bottom-t.top}},getElementsAtPoints:y,detectCollisions:function(r,e){if(!f(r)||!b(r))return!1;var t=y(r,e);return a.some(t,function(n){if(!n||n===r)return!1;var e=n.nodeName.toLowerCase();return-1===o.indexOf(e)&&!(!f(n)||!b(n)||n.contains(r))&&a.some(i,function(e){var t=-1!==n.innerHTML.indexOf(e);if(t){var i=(n.innerHTML||n.outerHTML||"").substr(0,100),o=(r.innerHTML||r.outerHTML||"").substr(0,100);console.debug("Hook collision   : "+e),console.debug("Between paragraph: "+o),console.debug("And visible tag  : "+i)}return t})})},parentHasSelector:function(e,i){var t=!1;if(!f(e))throw new Error("Not an element");function o(t){return a.some(i,function(e){return C(t,e)})}for(;e&&"BODY"!==e.tagName;){if(o(e)){t=!0;break}e=e.parentNode}return t},getStyle:w,getAbsoluteViewport:h,getWinWidth:e,getWinHeight:t,getScrollX:u,getScrollY:p,nextElementSibling:function(e){var t=e.nextElementSibling;if(void 0===t)for(e=e.nextSibling,t=null;null!==e;){if(e.nodeType===client.Dom.ELEMENT_NODE){t=e;break}e=e.nextSibling}return t},matchesSelector:C,onViewportChange:function(e){var t,i;function o(){i(),t=void 0,e()}i=n.bind(d,"scroll",function(){t&&d.clearTimeout(t),t=d.setTimeout(o,50)})},onPositionChange:function(t,e,i){var o=m(t);return i=i||2500,a.poll(function(){var e=m(t);return!o.equals(e)&&(o=e,!0)},e,i)},openUrl:v,setTextContent:k,smoothScrollY:function(r,a){var s=+new Date,c=0;d.setTimeout(function e(){var t,i=+new Date,o=(i-s)/a;t=0<r?Math.min(r,c+o*r):Math.max(r,c+o*r);var n=Math.round(t-c);0!==n&&d.scrollBy(0,n),s=i,c=t,0<r?t<r&&d.setTimeout(e,10):r<t&&d.setTimeout(e,10)},10)},waitForReadyState:function(e){var t,i;function o(){t&&t(),i&&i(),e()}"interactive"===s.readyState||"complete"===s.readyState?o():(t=n.bind(d,"load",o),i=s.addEventListener?n.bind(s,"DOMContentLoaded",o):(s.onreadystatechange=function(){"interactive"!==s.readyState&&"complete"!==s.readyState||o()},function(){s.onreadystatechange=null}))},isInViewport:function(e){var t;if(e.nodeType===client.Dom.ELEMENT_NODE)t=m(e);else{if(e.nodeType!==client.Dom.TEXT_NODE)throw new Error("Node type not supported: "+e.nodeType);t=r(e)}return!!t.getIntersection(h())},pixelHeightInViewport:function(e){var t;if(e.nodeType===client.Dom.ELEMENT_NODE)t=m(e);else{if(e.nodeType!==client.Dom.TEXT_NODE)throw new Error("Node type not supported: "+e.nodeType);t=r(e)}var i=h(),o=t.getIntersection(i);return o?Math.max(o.bottom-o.top,0):0},isVisible:b,getVisibleRect:function(e){for(var t,i,o,n={height:e.height,width:e.width},r=e.offsetTop||0,a=e.offsetLeft||0,s=e.offsetParent;null!==(e=e.parentNode);)if(t=e&&e.tagName?w(e):null){var c=t&&("hidden"===t.overflow||"hidden"===t.overflowX);t&&("hidden"===t.overflow||"hidden"===t.overflowY)&&(i=e.offsetHeight-r,e!==s&&(i+=e.offsetTop||0),i<n.height&&(n.height=i<0?0:i)),c&&(o=e.offsetWidth-a,e!==s&&(o+=e.offsetLeft||0),o<n.width&&(n.width=o<0?0:o))}return n},transformOrigin:function(e,t){e.style.webkitTransformOrigin=t,e.style.MozTransformOrigin=t,e.style.transformOrigin=t,e.style.msTransformOrigin=t,e.style.OTransformOrigin=t},transformScale:function(e,t,i){e.style.webkitTransform="scale("+t+","+i+")",e.style.MozTransform="scale("+t+","+i+")",e.style.transform="scale("+t+","+i+")",e.style.msTransform="scale("+t+","+i+")",e.style.OTransform="scale("+t+","+i+")"},Coord:E}};var client=client||{};client.Events=function(a){var r="CustomEventsStore__",n=document.addEventListener?function(e,t,i){return e.addEventListener(t,i,!1),function(){e.removeEventListener(t,i,!1)}}:function(e,t,i){return t="on"+t,e.attachEvent(t,i),function(){e.detachEvent(t,i)}};function e(){return this[r]={},this.connections=[],this}function s(e){this.data=e||{}}return e.prototype.on=function(e,t,i,o){return this[r][e]||(this[r][e]=[]),o=o||[],this[r][e].push([t,i,o]),this},e.prototype.once=function(e,t,i,o){var n=this,r=!1;return this.on(e,function e(){n.unbind(e),r||(r=!0,t.apply(i,arguments))},i,o)},e.prototype.fire=function(e,n){var t=this[r][e];if(t)return a.forEach(t.slice(),function(e){var t=e[0],i=e[1],o=e[2];t.apply(i,[new s(n)].concat(o))}),this},e.prototype.connect=function(e,t,i){i=i||e;var o=function(e){t.fire(i,e.data)};return this.connections.push({leftEvent:e,rightObservable:t,rightEvent:i,callback:o}),this.on(e,o)},e.prototype.disconnect=function(i,o,n){var r=[];a.forEach(this.connections,function(e,t){i===e.leftEvent&&o===e.rightObservable&&n===e.rightEvent&&(this.unbind(i,e.callback),r.push(t))},this),a.forEach(r,function(e){this.connections.splice(e,1)},this)},e.prototype.disconnectAll=function(i){var o=[];a.forEach(this.connections,function(e,t){i===e.rightObservable&&(this.unbind(e.leftEvent,e.callback),o.push(t))},this),a.forEach(o,function(e){this.connections.splice(e,1)},this)},e.prototype.unbind=function(e,i){var o=this[r][e];o&&a.some(o,function(e,t){if(e[0]===i)return o.splice(t,1),!0})},e.prototype.unbindAll=function(){this[r]={}},{bind:n,bindConnect:function(e,t,i,o){return o=o||t,n(e,t,function(e){i.fire(o,e)})},connect:function(e,t,i,o){return e.connect(t,i,o)},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():(e.cancelBubble=!0,e.returnValue=!1)},Observable:e,VMEvent:s}};var client=client||{};client.Log=function(e,r,a,s,c,d,i){var n="/log/"+e.log,l="//"+r.apiHost+n,u={},t=r.get("articleHash",r.get("urlHash","")),p={ipid:r.ipid,urlHash:r.urlHash,pvu:r.pvu,postcode:r.geo&&r.geo.pc||"",contextKey:t},h={hookLoad:"/hl/{{ipid}}/{{product}}/{{hookIds}}/{{urlHash}}/{{pvu}}",hookFailure:"/hf/{{ipid}}/{{product}}/{{hookId}}/{{reason}}/{{urlHash}}/{{pvu}}",hookReplacement:"/hr/{{ipid}}/{{product}}/{{oldHookId}}/{{newHookId}}/{{oldAdProviderId}}/{{newAdProviderId}}/{{reason}}/{{pvu}}",adImpression:"/ai/{{ipid}}/{{product}}/{{hookId}}/{{source}}/{{urlHash}}/{{pvu}}/{{setId}}",clickThrough:"/ck/{{ipid}}/{{product}}/{{hookId}}/{{source}}/{{urlHash}}/{{pvu}}?url={{clickUrl}}",adChoiceClick:"/ac/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}",adClose:"/cl/{{ipid}}/{{product}}/{{hookId}}/{{source}}/{{urlHash}}/{{pvu}}",firstHook:"/mt/tfh/{{timestamp}}/{{ipid}}",auditError:"/adt/{{urlHash}}/{{ipid}}/{{pvu}}/{{timestamp}}/I/{{message}}",pageTracking:"/ptr/{{urlHash}}/{{ipid}}/{{pvu}}/{{referrer}}",videoEvent:"/ve/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}/{{event}}/{{position}}/{{duration}}/{{videoId}}/{{creativeId}}",cpeInteraction:"/cpei/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}/{{event}}/{{element}}/{{creativeId}}",cpeClickThrough:"/cpeck/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}/{{element}}/{{creativeId}}?url={{clickUrl}}",cpeClose:"/cpec/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}/{{dwell}}/{{creativeId}}",engagement:"/eng/{{ipid}}/{{product}}/{{hookId}}/{{source}}/{{urlHash}}/{{pvu}}/{{creativeId}}",progressBar:"/prg/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}/{{event}}/{{creativeId}}",headerBid:"/hdrb/{{ipid}}/{{pvu}}/{{geo}}?bids={{bids}}",noHeaderBid:"/nohdrb/{{ipid}}/{{pvu}}/{{geo}}/{{platform}}/{{bidderName}}",behaviour:"/beh/{{ipid}}/{{product}}/{{hookId}}/{{urlHash}}/{{pvu}}/{{setId}}/{{contextKey}}"},o=["clickThrough","cpeClickThrough","auditError","headerBid","adImpression","videoEvent","cpeInteraction","engagement"],g={};function v(e,t,i){var o=i?n+e:l+e;return s.replaceUrlParams(o,s.extend({},p,t))}function f(i){return function(e){var t=v(h[i],e);a.dropImage(t),w(i,e.product)}}for(var m in h)h.hasOwnProperty(m)&&!s.includes(o,m)&&(g[m]=f(m));function y(t,e,i){t.setId||(t.setId=u[t.hookId]?u[t.hookId].setId:0);var o=v(h.behaviour,t,!0),n={action:encodeURIComponent(e)};c.log(o,function(e){d.fire(client.app.trigger.dmpBehaviourDrop,{action:i,setId:t.setId,behaviours:e})},n)}function w(e,t){i.info("Log Event: "+e+":"+t)}return g.adImpression=function(e){y(e,"Ad View","adImpression");var t=v(h.adImpression,e);a.dropImage(t),u[e.hookId]||(u[e.hookId]=e),w("adImpression",e.product)},g.clickThrough=function(e,t){var i;y(e,"Click","clickThrough"),e.clickUrl&&e.clickUrl.length&&!t?(e.clickUrl=s.replaceUrlParams(e.clickUrl,s.extend({},p,e)),i=v(h.clickThrough,e),a.openUrl(i)):(delete e.clickUrl,i=v(h.clickThrough,e),a.dropImage(i)),w("clickThrough",e.product)},g.cpeClickThrough=function(e){e.clickUrl=s.replaceUrlParams(e.clickUrl,s.extend({},p,e)),y(e,"Click","cpeClickThrough"),a.openUrl(v(h.cpeClickThrough,e)),w("cpeClickThrough",e.product)},g.cpeInteraction=function(e){y(e,"Interaction","cpeInteraction");var t=v(h.cpeInteraction,e);a.dropImage(t),w("cpeInteraction",e.product)},g.engagement=function(e){y(e,"Engagement","engagement");var t=v(h.engagement,e);a.dropImage(t),w("engagement",e.product)},g.videoEvent=function(e){var t=v(h.videoEvent,e);a.dropImage(t),w("videoEvent",e.product+":"+e.event)},g.headerBid=function(e){var t=r.geo&&r.geo.cc||"",i=JSON.stringify(e||{}),o=s.extend({},p,{bids:i,geo:t}),n=v(h.headerBid,o);a.dropImage(n)},g.noHeaderBid=function(e){var t=r.geo&&r.geo.cc||"",i=r.platform,o=s.extend({},p,{bidderName:e,geo:t,platform:i}),n=v(h.noHeaderBid,o);a.dropImage(n)},g.auditError=function(e){if(e.message)return e.timestamp=e.timestamp||+new Date,a.dropImage(v(h.auditError,e)),w("auditError",e.product),new Error(e.message)},g.getUrl=function(e,t){if(h[e])return t.clickUrl&&(t.clickUrl=s.replaceUrlParams(t.clickUrl,s.extend({},p,t))),v(h[e],t)},d.on(client.app.context.key,function(e){t=e.data.contextKey}),g.getParamsByHookId=function(e){if(e)return u[e]},g},client.Log.hookReason={TERM_NOT_FOUND:100,OVERLAPPING_TERM:101,OVERRIDE:102},client.Log.viewSource={LOAD:100,MOUSE_OVER:200,SCROLL:300},client.Log.clickSource={AD:100,HOOK:200},client.Log.closeSource={AD:100,AUTO:200,FORCE:300},client.Log.headerBid={SUCCESS:100,FAILURE:200};var client=client||{};client.Net=function(s,e,r,c,d){var t="__default_VM_scripts__",a=s[e],l={image:"image",script:"script",iframe:"iframe"},u=0,p={},h={};return h[t]={},{jsonp:function(e){var t,i,o=e.scope,n=e.id;return o?(p[o]=p[o]||{},h[o]=h[o]||{},a[o]=p[o],t=a[o]):(p[o="__default_VM_jsonp__"]=p[o]||{},h[o]=h[o]||{},t=s,n=n||"vib_"+u++),i=d.replaceUrlParams(e.url,{callbackId:n,callbackScope:o,id:n}),p[o][n]||(p[o][n]=d.once(function(e){t[n]=void 0,p[o][n]=void 0,h[o][n].fire("data",e),h[o][n]=void 0}),t[n]=p[o][n],h[o][n]=new c.Observable,r.appendDisposableScript(i)),h[o][n]},loadScript:function(e){return h[t][e]||(h[t][e]=new c.Observable,setTimeout(function(){r.appendScript(e+"",function(){h[t][e].fire("load"),h[t][e]=void 0})},1)),h[t][e]},xhr:function(t,i){var e,o,n,r=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(!t.url)throw new Error("[Net] No URL was specified");function a(){if(t.headers)for(var e in t.headers)t.headers.hasOwnProperty(e)&&r.setRequestHeader(e,t.headers[e]);"POST"===t.method&&r.setRequestHeader("Content-Type","application/json"),r.withCredentials=!0}t.async=!1!==t.async,t.method=t.method||"POST",e=d.once(function(){i(null,JSON.parse(r.responseText))}),o=d.once(function(){i(new Error("[Net] There was an error sending the request"))}),n=d.once(function(){i(new Error("[Net] Request timed out"))});try{try{c.bind(r,"load",e),c.bind(r,"error",o),c.bind(r,"timeout",n),r.open(t.method,t.url,t.async),a()}catch(e){s.XDomainRequest?((r=new XDomainRequest).onprogress=function(){},r.onload=onload,r.onerror=o,r.open(t.method,t.url,t.async),a()):i(new Error("[Net] CORS not supported: "+e))}t.data?r.send(JSON.stringify(t.data)):r.send()}catch(e){i(new Error("[Net] Unable to perform XHR: "+e))}return r.onreadystatechange=function(){4===r.readyState&&200<=r.status&&r.status<300?e():400<=r.status&&o()},r},notify:function(e,t,i,o){var n;if(!l[i])throw new Error("[Net] Wrong method was used to notify: "+i);return(n="iframe"===i?r.appendIFrame(d.replaceUrlParams(e,t||{}),null,o):"script"===i?r.appendScript(d.replaceUrlParams(e,t||{}),null,o):r.dropImage(d.replaceUrlParams(e,t||{}),o)).style.display="none",n.style.visibility="hidden",n.style.width="1px",n.style.height="1px",n.width=1,n.height=1,n},openUrl:function(e,t){return r.openUrl(d.replaceUrlParams(e,t||{}))},compileUrl:function(e,t){return d.replaceUrlParams(e,t||{})}}};var client=client||{},NODES_DIFFERENCE=2;client.Page=function(n,r,a,s){return{contextualise:function(i,e,o){"function"==typeof e&&(o=e,e={});var t=!r.nodes||Math.abs(i.length-r.nodes.length)>NODES_DIFFERENCE;t||(t=a.some(r.nodes,function(e,t){return!i[t]||i[t].getId()!==e})),t?n.contextualise(i,e,function(e){var t=e&&e.behaviours?e.behaviours:[];s.fire(client.app.trigger.contextComplete,{behaviours:t}),o(e)}):(n.logContext(r.get("articleHash",r.get("urlHash")),function(e){var t=e&&e.behaviours?e.behaviours:[];s.fire(client.app.trigger.contextComplete,{behaviours:t})}),o({articleHash:r.get("articleHash",null),pubXReached:!!r.pubXReached}))}}};var client=client||{};client.PubXBuilder=function(e){client.PubX=e.serviceVersion?client.PubXNEW:client.PubXOLD},client.PubXNEW=function(t){var i=client.PubXNEW.ALLOW_ALL;return{set:function(e){i=parseInt(e,10)},isAllowed:function(e){switch(i){case client.PubXNEW.ALLOW_ALL:case client.PubXNEW.BACKFILL_ONLY:return!0;case client.PubXNEW.BLOCK_ALL:return!1;case client.PubXNEW.BLOCK_IN_CONTENT:return e!==client.PubXNEW.IN_CONTENT;default:throw new t.auditError({message:"Unknown PubX action "+i})}}}},client.PubXNEW.OTHER=0,client.PubXNEW.IN_CONTENT=1,client.PubXNEW.ALLOW_ALL=0,client.PubXNEW.BLOCK_ALL=1,client.PubXNEW.BLOCK_IN_CONTENT=2,client.PubXNEW.BACKFILL_ONLY=3,client.PubXOLD=function(t){var i=client.PubXOLD.ALLOW_ALL;return{set:function(e){i=parseInt(e,10)},isAllowed:function(e){switch(i){case client.PubXOLD.ALLOW_ALL:case client.PubXOLD.BACKFILL_ONLY:return!0;case client.PubXOLD.BLOCK_ALL:return!1;case client.PubXOLD.BLOCK_IN_CONTENT:return e!==client.PubXOLD.IN_CONTENT;default:throw new t.auditError({message:"Unknown PubX action "+i})}}}},client.PubXOLD.OTHER=0,client.PubXOLD.IN_CONTENT=1,client.PubXOLD.ALLOW_ALL=1,client.PubXOLD.BLOCK_ALL=2,client.PubXOLD.BLOCK_IN_CONTENT=3,client.PubXOLD.BACKFILL_ONLY=4;var client=client||{};client.Tracking=function(e,r,a,s,c,d){var l={image:"image",script:"script",iframe:"iframe"},u={ipid:e.ipid,urlHash:e.urlHash,pvu:e.pvu,postcode:e.geo&&e.geo.pc||""};return{track:function(o,e,n){var t,i;i=!!(t=o).getAd&&t.getAd().creative.diyValues,a.isObject(i)&&i.hasOwnProperty("bidder")&&t.on("impression",function(){c.fire(client.app.bid.impression,{bidder:i.bidder,zoneId:i.zoneId,product:t.product})}),e&&e.length&&d.trackingAllowed()&&a.forEach(e,function(e){var t=l[e.trackerType],i=a.extend({timestamp:+new Date},u,e.params||{},n||{});if(!t)throw s.auditError({message:"[Tracking] Unrecognised tracker type: "+e.trackerType});o.on(e.onEvent,function(){r.notify(e.actionUrl,i,t,o.companion||o.outerBox)})})}}};var client=client||{};client.Utils=function(){var n,e,t,o,i,r,a,s,c,d,l=/[.*+?^${}()|[\]\/\\]/g,u=/{{([A-Za-z]\w*)}}/g;function p(e,t,i){for(var o in e)e.hasOwnProperty(o)&&t.call(i,e[o],o)}function h(e){return"[object Array]"===Object.prototype.toString.call(e)}n=Array.prototype.forEach?function(e,t,i){e?Array.prototype.forEach.call(e,t,i):console.log("Utils forEach: null items")}:function(e,t,i){if(e)for(var o=0,n=e.length;o<n;++o)t.call(i,e[o]);else console.log("Utils forEach: null items")},Array.prototype.find=null,Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=arguments[1],n=0;n<i;){var r=t[n];if(e.call(o,r,n,t))return r;n++}}}),e=Object.keys?function(e){return Object.keys(e)}:function(e){var i=[];return p(e,function(e,t){i.push(t)}),i},t=Object.values?function(e){return Object.values(e)}:function(i){var o=[];return p(i,function(e,t){o.push(i[t])}),o},o=Array.prototype.indexOf?function(e,t){return-1!==Array.prototype.indexOf.call(e,t)}:function(e,t){return r(e,function(e){return e===t})},i=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t)}:function(e,t){for(var i=[],o=0,n=e.length;o<n;++o)i.push(t(e[o]));return i},r=Array.prototype.some?function(e,t,i){return Array.prototype.some.call(e,t,i)}:function(e,t,i){for(var o=0,n=e.length;o<n;++o)if(t.call(i,e[o],o))return!0;return!1},a=Array.prototype.filter?function(e,t,i){return Array.prototype.filter.call(e,t,i)}:function(e,t,i){for(var o=[],n=0;n<e.length;n++)t.call(i,e[n],n,e)&&o.push(e[n]);return o},s=String.prototype.trim?function(e){return e.trim()}:function(e){return e=e.replace(/^\s+|\s+$/g,"")},c=function(){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(e){if(!e)return"";for(var t,i,o,n,r,a,s,c="",d=0;d<e.length;)n=(t=e.charCodeAt(d++))>>2,r=(3&t)<<4|(i=e.charCodeAt(d++))>>4,a=(15&i)<<2|(o=e.charCodeAt(d++))>>6,s=63&o,isNaN(i)?s=a=64:isNaN(o)&&(s=64),c+=l.charAt(n)+l.charAt(r)+l.charAt(a)+l.charAt(s);return c}return{encode:t,encodeURI:function(e){return e?encodeURIComponent(t(e)):""}}}(),d=function(){var e,t,i;if(-1<window.navigator.userAgent.indexOf("MSIE")){for(e=3,i=(t=document.createElement("div")).all||[];t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><br><![endif]--\x3e",i[0];);return 4<e&&e}return!1}();return{debounce:function(t,i,e){var o;return(e=e||{}).leading?function(){o?clearTimeout(o):t.apply(null,arguments),o=window.setTimeout(function(){o=void 0},i)}:function(){var e=arguments;o&&clearTimeout(o),o=window.setTimeout(function(){o=void 0,t.apply(null,e)},i)}},escapeRegExp:function(e){return e.replace(l,"\\$&")},extend:function(e){for(var t=1,i=arguments.length;t<i;++t){var o=arguments[t];if("object"!==_typeof(o))break;for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n])}return e},forEach:n,forOwn:p,keys:e,values:t,hashString:function(e){for(var t=0,i=0,o=e.length;i<o;++i)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t},includes:o,includesAll:function(t,e){var i=!0;return e=h(e)?e:[e],n(e,function(e){i&&(i=o(t,e))}),!!i},isEmpty:function(e){if(Object.keys)return 0===Object.keys(e).length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},isObject:function(e){return"object"===_typeof(e)&&null!==e&&!h(e)},map:i,once:function(e,t){var i=!1;return function(){i||(i=!0,e.apply(t,arguments))}},some:r,filter:a,replaceUrlParams:function(e,i){return e.replace(u,function(e,t){return i.hasOwnProperty(t)?encodeURIComponent(String(i[t])):""})},toQueryString:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+"="+encodeURIComponent(e[i]));return t.join("&")},parseQueryString:function(e){var t,i={params:{}};if(-1!==e.indexOf("?"))t=e.split("?"),i.url=t[0],e=0!==(e=(e=t[1]).replace(/&amp;/g,"&")).indexOf("&")?"&"+e:e,n(e.split("&"),function(e){e&&(t=e.split("="),i.params[t[0]]=decodeURIComponent(t[1]))});else{for(var o=e;o.length&&"/"===o.slice(-1);)o=o.slice(0,-1);i.url=o}return i},trim:s,truncate:function(e,t){return e.length>t?e.substr(0,t-3)+"":e},isFiniteNumber:function(e){return"number"==typeof e&&window.isFinite(e)},isArray:h,poll:function(t,i,o){var n;return o=o||1e3,n=window.setTimeout(function e(){t()&&i(),n=window.setTimeout(e,o)},o),function(){n&&window.clearTimeout(n)}},timeDeltaPassed:function(e,t,i){t<=+new Date-e&&i()},Base64:c,isIE:d,isNodeList:!d?function(e){return e instanceof NodeList}:function(e){return e&&"number"==typeof e.length&&void 0!==e.item&&void 0===e.push&&void 0===e.pop},Timer:function(){var e=Date.now();this.elapsed=function(){return Date.now()-e},this.reset=function(){e=Date.now()}}}};var client=client||{};client.Waterfall=function(n,r,a,t,s){return{isBlocked:function(e){var t,i,o=a.get("partner."+e+".runcheck",null);if(null===o)return!1;switch(t=o.get("type"),i=o.get("value"),t){case"css":return null!==r.querySelector(i);case"var":return n.hasOwnProperty(i);default:throw s.auditError({message:"[Waterfall] Unknown run check type: "+t})}},notifyFailure:function(e){if(t.isObject(n.VMNoAds)&&"function"==typeof n.VMNoAds[e])try{s.auditError({message:"[Waterfall] Failed loading product: "+e}),n.VMNoAds[e]()}catch(e){}}}};var constants=constants||{};constants.CompatibilityRules=function(o){return[{type:"execute",args:[[function(e){var t=e.get("partner.intext.inview",{}),i=e.partner.inview=e.partner.inview||{};o.extend(i,t)}]]}]};var constants=constants||{};constants.LanguageMap=function(){var e={uk:{adChoicesText:"AdChoices",hdrText:"ADVERTISEMENT"},us:{adChoicesText:"AdChoices",hdrText:"ADVERTISEMENT"},de:{adChoicesText:"Werbung",hdrText:"WERBUNG"}};return e.default=e.uk,{map:e}};var constants=constants||{};constants.ProductMap=function(){return{hash:{1:"intext",2:"image",3:"inline",4:"adhesion",5:"inview",6:"adbar",9:"instory"}}};var creative=creative||{};creative.Banner=function(i,u,r,p,h,o,a,g){return{create:function(d){var l=d.template.params,n=d.getDiyValues().nohookclick||!1;if(d.getDiyValues().bidder&&d.getDiyValues().zoneId){var e=o.getBid(d.getDiyValues().bidder,d.getDiyValues().zoneId);if(!e)return void a.info("Header bidding: No valid impressions available for: Bidder: "+d.getDiyValues().bidder+"ZoneId: "+d.getDiyValues().zoneId);l.width=e.width,l.height=e.height;var t=d.getAd();t&&(t.creative.diyValues.iframe=e.scriptTag,t.creative.diyValues.zoneId=e.zoneId)}return i.create({width:parseInt(l.width,10),height:parseInt(l.height,10),load:function(){var s=d.getAd(),e=d.getAdConfig(),c=1,i={product:d.product,hookId:e.vibrantParameters.hookId,setId:e.vibrantParameters.setId,keyword:encodeURIComponent(e.term&&e.term.keyword||""),timestamp:+new Date,clickUrl:s.clickUrl},t=u.createIFrame({width:l.width,height:l.height,fixMaxDimensions:!0},function(e,t){var i=h.getBoolean("partner.image.scaletofit",!0);if("image"===d.product&&d.settings&&d.settings.container&&i){var o=d.settings.container.width,n=s.width;o&&n&&o<n&&(c=o/n)}1!==c&&(u.transformOrigin(t,"bottom left"),u.transformScale(t,c,c));var r=s.creative.diyValues.iframe;if(r=r?p.replaceUrlParams(r,l):"",d.delayLoad){var a=g.getIframeLoadingSrc();t.contentWindow.contents=a,t.src="javascript:window['contents']",d.on(d.DELAYED_LOAD,function(){t.contentWindow.contents=r,t.src="javascript:window['contents']",d.delayLoad=!1})}else t.contentWindow.contents=r,t.src="javascript:window['contents']"});function o(e){var t;e===client.Log.clickSource.HOOK&&n||(t=d.getClickDelay(),p.timeDeltaPassed(d.openTime,t,function(){r.clickThrough(p.extend(i,{source:e}))}))}s.clickUrl&&(d.on(d.EVENT_CLICK,function(){o(client.Log.clickSource.AD)}),d.on("delegate",function(e){"click"===e.data.triggerSource&&o(e.data.source)})),d.fire("loaded",t)}})}}};var creative=creative||{};creative.C2S=function(e,t){var s=3,c=500,d=3;return{create:function(a){return e.create({width:parseInt(a.settings.ads[0].width,10),height:parseInt(a.settings.ads[0].height,10),load:function(){var r=document.createElement("script");r.type="text/javascript",r.src=a.template.id;var e=t.createIFrame({width:a.settings.ads[0].width,height:a.settings.ads[0].height},function(e,t){var i,o,n;t.contentWindow.contents=r.outerHTML,t.src="javascript:window['contents']",setTimeout((i=a,o=t,n=0,function e(){window.setTimeout(function(){if(o.contentWindow&&o.contentWindow.pbCall)i.fire("close",client.Log.closeSource.FORCE);else if(o.contentDocument&&o.contentDocument.body&&o.contentDocument.body.childNodes.length>=s)return;++n<d?e():i.fire("close",client.Log.closeSource.FORCE)},c)}),1)});a.fire("loaded",e)}})}}};var creative=creative||{};creative.CPE=function(e,o){return{create:function(i){return e.create({load:function(){var t=this;o.load({adInstance:i,templateData:i.template},function(e){t.width=parseInt(e.width,10),t.height=parseInt(e.height,10),i.fire("loaded",e.element)})}})}}};var creative=creative||{};creative.Custom=function(o,n){return{create:function(i){var e=i.template.params,t=e.scaleToWidth?!!parseInt(e.scaleToWidth,10):null;return"image"===i.product&&!1!==t||t?(e.width=i.settings.container&&i.settings.container.width||parseInt(e.width,10),e.scaleToHeight?e.height=i.settings.container&&i.settings.container.height||parseInt(e.height,10):e.height=parseInt(e.height,10)):(e.width=parseInt(e.width,10),e.height=parseInt(e.height,10)),o.create({load:function(){var t=this;n.load({adInstance:i,templateData:i.template},function(e){t.width=parseInt(e.width,10),t.height=parseInt(e.height,10),i.fire("loaded",e.element)})}})}}};var creative=creative||{};creative.Standard=function(t,g,v,f,m){return{create:function(d){var l,u,p=d.template.params,e=p.scaleToWidth?!!parseInt(p.scaleToWidth,10):null,h=d.getDiyValues().nohookclick||!1;return u="image"===d.product&&!1!==e||e?(l=d.settings.container&&d.settings.container.width||parseInt(p.width,10),p.scaleToHeight&&d.settings.container&&d.settings.container.height||parseInt(p.height,10)):(l=parseInt(p.width,10),parseInt(p.height,10)),t.create({width:l,height:u,load:function(){var e=d.getAd(),t=d.getAdConfig(),i=document.createElement("div");i.setAttribute("data","container-div");var o=d.isResponsive();d.mergedCreativeParams=f.extend({},e.creative.diyValues||{},e.creative.setValues||{},p);var n={product:d.product,hookId:t.vibrantParameters.hookId,setId:t.vibrantParameters.setId,keyword:encodeURIComponent(t.term&&t.term.keyword||""),timestamp:+new Date,clickUrl:e.clickUrl},r=f.extend({},n,d.mergedCreativeParams,{clickUrl:v.getUrl("clickThrough",f.extend(n,{source:client.Log.clickSource.AD}))});r.hasOwnProperty("description")&&r.description&&(r.description=f.truncate(r.description,200));var a=document.createElement("div");if(a.setAttribute("data","contents-div"),a.innerHTML=d.template.execute(r),a.firstChild.width=l,a.firstChild.height=u,a.firstChild.style&&(o&&"intext"!==d.product?(a.firstChild.style.width="100%",a.firstChild.style.height="100%",a.firstChild.style["max-width"]="100%",a.firstChild.style["max-height"]="100%"):(a.firstChild.style.width=l+"px",a.firstChild.style.height=u+"px",a.firstChild.style["max-width"]=l+"px",a.firstChild.style["max-height"]=u+"px"),a.firstChild.style.margin="0px",a.firstChild.style.padding="0px"),d.delayLoad){var s=document.createElement("div");s.setAttribute("data","loading-div"),s.innerHTML=m.getPageLoadingSrc(),i.appendChild(s),d.on(d.DELAYED_LOAD,function(){i.innerHTML="",i.appendChild(a),d.delayLoad=!1})}else i.appendChild(a);function c(e){var t;e===client.Log.clickSource.HOOK&&h||(t=d.getClickDelay(),f.timeDeltaPassed(d.openTime,t,function(){v.clickThrough(f.extend(n,{source:e}))}))}g.bind(i,"click",function(){c(client.Log.clickSource.AD)}),d.on(d.EVENT_CLICK,function(){c(client.Log.clickSource.HOOK)}),d.on("delegate",function(e){"click"===e.data.triggerSource&&c(e.data.source)}),d.fire("loaded",i)}})}}};var creative=creative||{};creative.Video=function(t,a){return{create:function(o){var e=o.getAd(),n=parseInt(o.template.params.width,10)||e.width,r=parseInt(o.template.params.height,10)||e.height;return t.create({width:n,height:r,load:function(){var e=o.settings.ads[0].creative.diyValues||{},t=e.vpaid||e.VastAdTagUri||e.vast||o.template.params.vast,i=window.top.location.href?encodeURIComponent(window.top.location.href):"";t=(t=t.replace("{{page_url}}",i)).replace("{{timestamp}}",Date.now()),o.template.params.vast=t,o.template.params.width=n,o.template.params.height=r,a.load({adInstance:o,templateData:o.template},function(e){o.fire("loaded",e.element)},"videoFrame")}})}}};var creative=creative||{};creative.Waterfall=function(l){var o={inline:e,daw:e,adhesion:e,image:e,inview:e,instory:e,tooltip:e,adbar:e,fallback:e};function e(e,t,i){var o=e.getAd(),n=o.creative,r=n.diyValues||{},a=i,s=o.hook||{},c=n.creativeType,d=e.template.template?e.template.template.trim():"";return r.VastAdTagUri||r.vpaid||(r.vast||e.template.params.vast)&&!d.length?{creative:l.video.create(e),decoration:a}:"c2s"===c||e.template.params.c2s?{creative:l.c2s.create(e),decoration:a}:e.template.params.isCPE?("inview"!==t&&(a="cpeProgressBar"),{creative:l.cpe.create(e),decoration:a}):e.template.params.isCustom?("adbar"===t&&(a="image"),{creative:l.custom.create(e),decoration:a}):r.iframe||r.bidder?{creative:l.banner.create(e),decoration:a}:(s&&s.isHibu&&(a="legacyadhesion"),"adbar"===t&&(a="image"),{creative:l.standard.create(e),decoration:a})}return{select:function(e,t,i){return(o[t]||o.fallback)(e,t,i)},creatives:l}};var dmp=dmp||{};dmp.audience=function(t,i,e,o){e=e||{};var n,r="pending",a=[],s=o.lotameAudienceExtractionAllowed(),c="cc_auds",l=e.lotame?e.lotame.networkId:null,u=c;return{runAudienceExtraction:function(){if(s){if("pending"===r){n=Date.now(),r="inprogress";var e=function(){if(l){var e=".crwdcntrl.net",t=!0,i=document.cookie.indexOf("_cc_domain");if(-1<i){var o=document.cookie.indexOf("=",i);if(0<o){t=!1,o++;var n=document.cookie.indexOf(";",o);n=0<n?n:document.cookie.length,e=document.cookie.slice(o,n)}}var r,a=!1;if(t&&-1<(i=document.cookie.indexOf("_cc_id"))){var s=document.cookie.indexOf("=",i);if(0<s){a=!0,s++;var c=document.cookie.indexOf(";",s);c=0<c?c:document.cookie.length,r=document.cookie.slice(s,c)}}var d="//ad"+e;return"undefined"!=typeof portNumber&&null!=portNumber&&(d=d+":"+portNumber),d=d+"/5/c="+l+"/pe=y/callback="+u,a&&(d=d+"/pid="+r),d}}();if(!e)return void(r="urlerror");t[c]=function(e){e.Profile&&e.Profile.Audiences&&e.Profile.Audiences.Audience&&(a=e.Profile.Audiences.Audience.map(function(e){return parseInt(e.id,10)})),Date.now()-n,r="complete";try{delete t[c]}catch(e){t[c]=void 0}},i.appendScript(e)}}else r="noconsent"},getAudienceData:function(t){setTimeout(function e(){return"noconsent"===r||"urlerror"===r?t(r,null):"complete"===r?t(null,a):2e3<Date.now()-n?t("audience_extraction_timeout",null):void setTimeout(e,100)},0)}}};var dmp=dmp||{};dmp.collection=function(a,o,e,s,t,i,n,c,d){var l=(s=s||{}).lotame?s.lotame.advancedTagUrl:null,u=s.lotame?s.lotame.behaviourUrl:null,p=s.lotame?s.lotame.vibrantId:"",h=s.lotame?s.lotame.clientSpace:null,g=s.lotame?s.lotame.lotameObject:null,v=d.lotameCollectionAllowed();function f(e,t){var i=a[g];e&&t&&(i?(c.info("LOTAME: Sending: key:value "+e+" : "+t),i.add(e,t)):c.error("dmp.collection: script not loaded"))}function m(e){var t=a[g];if(t)if(v){if((e||{}).length){var i=e.reduce(function(e,t){return e.push("b",t.toString()),e},[]);t.bcpw.apply(null,i)}}else c.warn("Lotame dropBehaviour: Consent not granted");else c.error("LOTAME: not loaded")}function r(r){var e;e=!0,l||(c.error("No advancedTagUrl"),e=!1),u||(c.error("No behaviourUrl"),e=!1),p||(c.error("No vibrantId"),e=!1),g||(c.error("No lotameObject"),e=!1),h||(c.error("No clientSpace"),e=!1),s.userId||(c.error("No userId"),e=!1),e&&d.lotameConsentApiAllowed()&&function(e){var t=o.createElement("script");function i(){e()}(t=o.createElement("script")).type="text/javascript",t.async=!0,t.src=l,t.setAttribute("id","LOTCC_"+p),t.addEventListener?t.addEventListener("load",i,!1):t.onreadystatechange=function(){"loaded"!==t.readyState&&"complete"!==t.readyState||i()},o.head.appendChild(t)}(function(){var e={analytics:v,crossdevice:v,datasharing:v,targeting:v};a.LOTCC.setConsent(function(e){e.error&&c.warn("Lotame setConsent: error: "+e.error);var t,i=s.userId,o=s.ipid,n=s.geo?s.geo.cc:null;c.info("TP: "+h),c.info("TPID: "+i),c.info("IPID: "+o),c.info("COUNTRYCODE: "+n),f("tp",h),f("tpid",i),f("geo","country:"+n),(t=a[g])?t.bcp():c.error("dmp.collection: script not loaded"),m(r)},p,e)})}t.on(client.app.trigger.contextComplete,function(e){var t=e.data.behaviours||[];if(t.length){var i=t.reduce(function(e,t){return e+t+" "},"");c.info("dropping behaviours for contextComplete:"+i),r(t)}else c.warn("No behaviours for contextComplete:")},this),t.on(client.app.trigger.dmpBehaviourDrop,function(e){var t=e.data.behaviours||[];if(m(t),t.length){var i=t.reduce(function(e,t){return e+t+" "},"");c.info("dropping behaviours for "+e.data.action+" (setID "+e.data.setId+"): "+i)}else c.warn("No behaviours for "+e.data.action+" (setID "+e.data.setId+")")},this)};var gdpr=gdpr||{};gdpr.consent=function(t,e,i,o){var n=(i=i||{}).get("consent",{});return{init:function(){if(t.__cmp?o.info("CMP Framework loaded"):o.info("No CMP Framework loaded"),n.hasOwnProperty("consentStr"))for(var e in n)n.hasOwnProperty(e)&&"function"!=typeof n[e]&&o.info("Consent info: "+e+": "+n[e]);else o.error("Consent String not found")},updateConsent:function(e){n=e},trackingAllowed:function(){return!0},cookiesAllowed:function(){return n.vibrantConsent&&n.cookiesAllowed},lotameCollectionAllowed:function(){return n.lotameConsent&&n.measurementAllowed},lotameAudienceExtractionAllowed:function(){return n.lotameConsent&&n.personalisationAllowed},lotameConsentApiAllowed:function(){return!n.gdprApplies||n.consentStr&&n.consentStr.length}}};var pagecontent=pagecontent||{},DEFAULT_OPEN_DELAY=50;pagecontent.Hook=function(f,m,y,l,w,u,p){var h=m.get("partner.intext.opendelay",DEFAULT_OPEN_DELAY),g=m.get("mobile",!1),v=[];function b(e,s,t){var i,o=this,n=null,r={},c={};this.textNodeId=t,this.hookClickActive=!0,this.liveLookupFailsShowUnderlyingAd=!0,this.waterfallOverrideAllowed=!0,s.ads&&s.ads.length&&s.ads[0].creative&&(r=(((s.ads[0]||{}).creative||{}).payload||{}).params,!(c=w.extend({},s.ads[0].creative.diyValues||{},s.ads[0].creative.setValues||{},r)).disableLiveLookup||1!==c.disableLiveLookup&&"1"!==c.disableLiveLookup||(this.waterfallOverrideAllowed=!1)),this.isKeywordOnly=c.keywordOnly,s.product=u.hash[s.vibrantParameters.product];var a=c.clickUrl?c.clickUrl:"",d=(s.ads[0]||{}).clickUrl||a;this.hookClickable=!!d.length,this.createHookElement(s,c,e),this.adConfig=s,this.id=s.vibrantParameters.hookId,this.triggered=!1,this.hookCursorStyle=null,l.Observable.call(this),this.isKeywordOnly?(l.bind(this.domNode,"click",function(e){l.stopPropagation(e);var t=w.extend({},{source:c.keywordOnlySource||301,hookId:(s.vibrantParameters||{}).hookId||"",setId:(s.vibrantParameters||{}).setId||"",keyword:(s.term||{}).keyword||"",clickUrl:s.clickUrl||"",product:s.product||"",timestamp:new Date,pvu:m.pvu,urlHash:m.urlHash,ipid:m.ipid},c||{}),i=p.getUrl("clickThrough",t),o=t.clickUrl.split("?"),n=2===o.length?o[0]+"?params="+btoa(JSON.stringify(t)):"",r=i.split("?");if(2===r.length){var a=r[0]+"?url="+encodeURIComponent(n);y.openUrl(a)}}),l.bind(this.domNode,"mouseenter",function(){o.hookCursorStyle&&o.domNode&&(o.domNode.style.cursor=o.hookCursorStyle)})):g?l.bind(this.domNode,"click",function(e){l.stopPropagation(e),o.hookClickable&&o.hookClickActive&&o.fire(pagecontent.Hook.EVENT_CLICK,{hook:o,event:e})}):(l.bind(this.domNode,"mouseenter",function(e){window.clearTimeout(n),n=window.setTimeout(function(){n=null,o.fire(pagecontent.Hook.EVENT_HOOKIN,{hook:o,event:e}),i||(i=l.bind(o.domNode,"click",function(e){l.stopPropagation(e),o.hookClickable&&o.hookClickActive&&o.fire(pagecontent.Hook.EVENT_CLICK,{hook:o,event:e})}))},h),o.hookCursorStyle&&o.domNode&&(o.domNode.style.cursor=o.hookCursorStyle)}),l.bind(this.domNode,"mouseleave",function(e){i&&(i(),i=null),n?(window.clearTimeout(n),n=null):o.fire(pagecontent.Hook.EVENT_HOOKOUT,{hook:o,event:e})}))}(b.prototype=new l.Observable).createHookElement=function(e,t,i){if(this.domNode=f.createElement("span"),this.domNode.className="vm-hook-outer",t.hookTooltipText){var o,n,r="";try{o=w.extend(e.vibrantParameters,t),n=w.replaceUrlParams(t.hookTooltipText,o),r=decodeURIComponent(n)}catch(e){}this.domNode.title=r}var a=f.createElement("span");a.className="vm-hook",y.setTextContent(a,i),this.domNode.appendChild(a);var s=!0;if("instory"===e.product){var c=m.get("partner.instory.hook.show",null);if(null===c){s=!!t.instoryShowHook}else{var d=parseInt(c,10);s=0!==d&&(1===d||console.log("Warning: Invalid show hook value ("+c+"), defaulting to true"),!0)}}var l=m.get("partner.hook.style.custom",null);if(s&&!l){var u=e.product,p=t["custom"+(u.charAt(0).toUpperCase()+u.slice(1))+"HookStyle"]||t.customIntextHookStyle,h="partner."+u+".hook.customstyle",g=m.get(h,null)||p;if(g&&g.length?a.style.cssText=g:(this.domNode.className+=" vm-hook-default",a.style.color="#009900",a.style.borderColor="transparent transparent #009900"),this.hookClickable){var v=f.createElement("span");v.className="vm-hook-icon",v.style.display="inline-block",this.domNode.appendChild(v),t.customHookIcon&&t.customHookIconWidth&&(v.style.backgroundImage="url("+t.customHookIcon+")",v.style.height="16px",v.style.width=t.customHookIconWidth+"px",v.style.verticalAlign="middle",v.style.marginLeft="2px")}}else!s&&l&&(a.className+=" vm-hook-reset");t.hookCursorStyle?a.style.cursor=t.hookCursorStyle:a.style.cursor=this.hookClickable?"pointer":"text"},b.prototype.getId=function(){return this.id},b.prototype.getProduct=function(){return this.adConfig.product},b.prototype.getDomNode=function(){return this.domNode},b.prototype.getPosition=function(){return y.getPosition(this.domNode)},b.prototype.getAdConfig=function(){return this.adConfig},b.prototype.getCreativePayload=function(){var e;return this.adConfig&&this.adConfig.ads&&this.adConfig.ads.length&&this.adConfig.ads[0].creative&&(e=this.adConfig.ads[0].creative.payload),e},b.prototype.getWaterfallOverrideAllowed=function(){return this.waterfallOverrideAllowed},b.prototype.resetWaterfallOverrideAllowed=function(){this.waterfallOverrideAllowed=!1},b.prototype.removeStyling=function(){this.domNode.classList.remove("vm-hook-default");var e=this.domNode.getElementsByClassName("vm-hook")[0];e&&e.removeAttribute("style");var t=this.domNode.getElementsByClassName("vm-hook-icon")[0];t&&t.removeAttribute("style")},b.prototype.setTriggered=function(){this.triggered=!0},b.prototype.hasBeenTriggered=function(){return this.triggered},b.prototype.isInViewport=function(){return y.getAbsoluteViewport().contains(this.getPosition())},b.prototype.isInViewportArea=function(e){var t=y.getAbsoluteViewport();return e=e||1,t.bottom=y.getWinHeight()*e+y.getScrollY(),t.contains(this.getPosition())},b.prototype.getParagraph=function(){return y.findParentParagraph(this.domNode)},b.prototype.getParagraphPosition=function(){return y.getPosition(this.getParagraph())},b.prototype.setCursorStyle=function(e){this.hookCursorStyle=e,this.hookCursorStyle&&this.domNode&&(this.domNode.style.cursor=this.hookCursorStyle)};return{create:function(e,t){var i,o,n,r,a,s,c,d,l=e.getDomNode(),u=l.data;return u&&l.parentNode?(i=u.toLowerCase(),n="(^|\\s|\\\"|\\')"+(o=w.escapeRegExp(t.term.keyword)).toLowerCase()+"(\\s|$|\\.|\\,|\\?|\\!|\\\"|\\')",(r=new RegExp(n,"m").exec(i))&&0!==r.length?(s=(a=i.charAt(r.index)===o.charAt(0)?r.index:r.index+1)+o.length,c=new b(u.substring(a,s),t,e.id),(d=f.createDocumentFragment()).appendChild(f.createTextNode(u.substring(0,a))),d.appendChild(c.getDomNode()),d.appendChild(f.createTextNode(u.substring(s))),l.parentNode.replaceChild(d,l),e.addHook(c),e.updateDomNode(c.getDomNode()),v.push(c),c):null):null},getVisibleHooks:function(i){return w.filter(v,function(e){var t=y.isInViewport(e.getDomNode());return i?i===e.getAdConfig().product&&t:t})},Hook:b}},pagecontent.Hook.EVENT_CLICK="vm:hookclick",pagecontent.Hook.EVENT_HOOKIN="vm:hookin",pagecontent.Hook.EVENT_HOOKOUT="vm:hookout";var pagecontent=pagecontent||{};pagecontent.Image=function(r,o,a,s){var n=1,c=200,d=150,l={"300x250":!0,"300x600":!0};function u(e){var t,i=this;this.id=n++,this.image=e,this.locked=!1,0<e.width&&0<e.height?this.allowed=p(e):(this.allowed=!1,e.complete||(t=o.bind(e,"load",function(){i.allowed=p(e),t()})))}function p(e){var t=e.width,i=e.height;return e.width>=c&&e.height>=d&&!l[t+"x"+i]}return u.prototype.getId=function(){return this.id},u.prototype.getDomNode=function(){return this.image},u.prototype.getWidth=function(){return this.image.width},u.prototype.getHeight=function(){return this.image.height},u.prototype.isAvailable=function(){return this.allowed&&!this.locked},u.prototype.lock=function(){this.locked=!0},u.prototype.setAdUnit=function(e){this.adUnit=e},u.prototype.hasAdUnit=function(){return!!this.adUnit},u.prototype.getPosition=function(){return r.getPosition(this.image)},u.prototype.getArea=function(){return this.getPosition().getArea()},u.prototype.isInViewport=function(){var e,t;return this.adUnit&&this.adUnit.isReady()?this.adUnit.isInViewport():(e=this.getPosition(),t=this.getHeight(),e.top=e.top+.8*t,!!r.getAbsoluteViewport().contains(e))},u.prototype.isVisible=function(){return r.isVisible(this.image,{overflowCheck:!0})},{ImageNode:u,findImages:function(e){var t,i=[],o=e,n=(0<(t=s.getArray("partner.image.nohooknodes",[])).length&&(t=a.filter(t,function(e){return""!==e})),t);return a.isNodeList(o)||(o=document.querySelectorAll(e)),a.forEach(o,function e(t){if(t.nodeType===client.Dom.ELEMENT_NODE){if(0<n.length&&r.matchesSelector(t,n))return;if("IMG"===t.tagName.toUpperCase())return void i.push(new u(t));a.forEach(t.childNodes,e)}}),i}}};var pagecontent=pagecontent||{};pagecontent.Paragraph=function(a,s){var t=1;function c(e){this.id=t++,this.domNode=e,this.available=!0}function d(e){var t=e.textContent;return void 0===t&&(t=e.nodeType===client.Dom.TEXT_NODE?e.data:e.innerText),t.replace(/\s+/,"").length}return c.prototype.getId=function(){return this.id},c.prototype.getDomNode=function(){return this.domNode},c.prototype.getWidth=function(){return a.getPosition(this.domNode).getWidth()},c.prototype.isBelowWaterline=function(){return a.getPosition(this.domNode).bottom>=a.getAbsoluteViewport().bottom},c.prototype.isAvailable=function(){return this.available},c.prototype.lock=function(){this.available=!1},{findParagraphs:function(n){var e=document.querySelectorAll(n.selectors),r=[];return s.forEach(e,function(e){var t=e.querySelectorAll(n.paragraphselectors);s.forEach(t,function(e){var t,i,o=a.getPosition(e);!o||o.getWidth()<n.adwidth||(i=e,s.some(i.childNodes,function(e){return e.nodeType===client.Dom.TEXT_NODE&&0<d(e)})&&(d(e)<n.mincontentlength.above||null===(t=a.nextElementSibling(e))||d(t)<n.mincontentlength.below||r.push(new c(e))))})}),r},Paragraph:c}};var pagecontent=pagecontent||{};pagecontent.SimpleElement=function(e,o){var t=1;function n(e){this.id=t++,this.domNode=e,this.available=!0}return n.prototype.getId=function(){return this.id},n.prototype.getDomNode=function(){return this.domNode},n.prototype.getWidth=function(){return e.getPosition(this.domNode).getWidth()},n.prototype.isBelowWaterline=function(){return!1},n.prototype.isAvailable=function(){return this.available},n.prototype.lock=function(){this.available=!1},{findElements:function(e){var t=document.querySelectorAll(e.selectors),i=[];return o.forEach(t,function(e){i.push(new n(e))}),i},SimpleElementNode:n}};var pagecontent=pagecontent||{};pagecontent.TextNode=function(i,a){var s={SCRIPT:!0,NOSCRIPT:!0,CANVAS:!0,CODE:!0,OBJECT:!0,PROGRESS:!0,SOURCE:!0,VIDEO:!0,STYLE:!0},c="nointellitxt";function d(e,t,i){this.id=a.hashString(t),this.domNode=e,this.textContent=t,this.hyperlink=i,this.status=d.AVAILABLE,this.hooks=[]}return d.AVAILABLE=0,d.IN_FLIGHT=1,d.LOCKED=2,d.prototype.getId=function(){return this.id},d.prototype.getDomNode=function(){return this.domNode},d.prototype.updateDomNode=function(e){this.domNode=e},d.prototype.isHyperlink=function(){return this.hyperlink},d.prototype.getTextContent=function(){return this.textContent},d.prototype.getStatus=function(){return this.status},d.prototype.setStatus=function(e){this.status=e},d.prototype.getHooks=function(){return this.hooks},d.prototype.addHook=function(e){this.hooks.push(e)},{TextNode:d,findTextNodes:function(e){var r=[],t=e;return a.isNodeList(t)||(t=i.querySelectorAll(e)),a.forEach(t,function(e){!function t(e,i){var o,n;if(e.nodeType===client.Dom.TEXT_NODE)0<(o=a.trim(e.data)).length&&r.push(new d(e,o,i));else if(e.nodeType===client.Dom.ELEMENT_NODE){if(n=e.tagName.toUpperCase(),s[n]||e.className&&e.className.toLowerCase&&a.includes(e.className.toLowerCase().split(/\s+/),c)||e.id&&e.id.toLowerCase&&e.id.toLowerCase()===c)return;a.forEach(e.childNodes,function(e){t(e,i||"A"===n)})}}(e,!1)}),r}}};var platform=platform||{};platform.desktop=function(u,p,t,h,g,i){return{initialise:function(){var r,a,s,c,d,l,e={daw:function(){var e=new h.Scroll,t=new h.Adhesion(p.get("partner.daw",{})),i=new u.Daw;e.initialise(),t.once("trigger",function(e){i.invoke(e.data)}),t.initialise(e)}};return t.isAllowed(client.PubX.IN_CONTENT)&&(e.image=function(e){var t,i=new h.Image(p.get("partner.image",{})),o=h.Gallery.load(p.get("partner.gallery",{})),n=new u.Image;i.on("trigger",function(e){n.invoke(e.data)}),o&&(t=new u.Gallery({api:o.api}),o.on("trigger",function(e){n.invoke(e.data)}),n.on("galleryBehaviour",function(e){t.invoke(e.data)})),i.initialise(e)},e.inline=function(e){var t,i=p.get("partner.inline",{});t=i.usesimpleelement?new h.SimpleElement(i):new h.ParagraphBreak(i);var o=new u.Inline;t.on("trigger",function(e){o.invoke(e.data)}),t.initialise(e)},r=p.getBoolean("partner.inview.mobileonly",!1),a=new h.TextNode,s=new u.Wordflip,c=new u.VibrantView,d=u.ScriptsLoader,l=i.once(function(e){a.initialise(e)}),e.intext=function(e,t){var i=new u.Tooltip,o=new u.Hook({product:t,fetchFormat:"{{id}}",eventCallbacks:{newHooks:function(e){s.invoke(e),c.invoke(e),d.invoke(e)},hover:function(e){i.invoke(e)},click:function(e){i.invoke(e)}}});a.on("trigger",function(e){o.invoke(e.data)}),c.on("trigger",function(e){t===e.data.hook.getProduct()&&i.invoke(e.data)}),l(e)},e.inview=function(e,t){if(!r){var i=new u.InView,o=new u.Hook({product:t,fetchFormat:"{{id}}:{{width}}:"+t,callback:i.processNode,eventCallbacks:{newHooks:function(e){s.invoke(e),c.invoke(e),d.invoke(e),n(e)},hover:function(e){i.invoke(e)},click:function(e){i.invoke(e)}}});a.on("trigger",function(e){o.invoke(e.data)}),c.on("trigger",function(e){t===e.data.hook.getProduct()&&i.invoke(e.data)}),e.on(client.app.trigger.scroll,function(){n({hooks:g.getVisibleHooks(t),viewSource:client.Log.viewSource.SCROLL})}),l(e)}function n(e){u.AutoReveal.autoOpen(i,e)}},e.instory=function(e,t){var i=new u.InStory,o=new u.Hook({product:t,fetchFormat:"{{id}}:{{width}}:"+t,callback:i.processNode,prefilterNodes:i.prefilterNodes,eventCallbacks:{newHooks:function(e){s.invoke(e),c.invoke(e),d.invoke(e),e.hooks.forEach(function(e){i.invoke({hook:e,viewSource:300})})},hover:function(){},click:function(){}}});a.on("trigger",function(e){o.invoke(e.data)}),c.on("trigger",function(e){t===e.data.hook.getProduct()&&i.invoke(e.data)}),e.on(client.app.trigger.scroll,function(){var e;e={hooks:g.getVisibleHooks(t),viewSource:client.Log.viewSource.SCROLL},u.AutoReveal.autoOpen(i,e)}),l(e)},e.adbar=function(){var e=new h.Scroll,t=new h.Adhesion(p.get("partner.adbar",{})),i=new u.AdBar;e.initialise(),t.once("trigger",function(e){i.invoke(e.data)}),t.initialise(e)},e.adbarlegacy=function(){u.AdBarLegacy()}),e}}};var platform=platform||{};platform.mobile=function(f,m,t,a,s,y,w){return{initialise:function(){var e={};if(t.isAllowed(client.PubX.IN_CONTENT)){var r,c,d,l,u,p,h=new a.Resize,g=new a.Scroll,v=new a.Gesture;return h.initialise(),g.initialise(),v.initialise(),e.image=function(e){var t,i=new a.Image(m.get("partner.image",{})),o=a.Gallery.load(m.get("partner.gallery",{})),n=new f.Image;i.on("trigger",function(e){n.invoke(e.data)}),o&&(t=new f.Gallery({api:o.api}),o.on("trigger",function(e){n.invoke(e.data)}),n.on("galleryBehaviour",function(e){t.invoke(e.data)})),i.initialise(e)},e.inline=function(e){var t,i=m.get("partner.inline",{});t=i.usesimpleelement?new a.SimpleElement(i):new a.ParagraphBreak(i);var o=new f.Inline;t.on("trigger",function(e){o.invoke(e.data)}),t.initialise(e)},e.adhesion=function(){var e=new a.Adhesion(m.get("partner.adhesion",{})),t=new f.AdhesionBackfill({fetchFormat:"{{id}}:320:80"}),i=new f.AdhesionPlacement;h.connect("trigger",i,"resize"),g.connect("trigger",i,"scroll"),v.connect("zoom",i,"zoom"),t.on("adsReady",function(e){i.invoke(e.data)}),i.on("fetchAd",function(e){t.invoke(e.data)}),e.once("trigger",function(e){t.invoke(e.data)}),e.initialise(g)},r=m.getBoolean("partner.inview.desktoponly",!1),c=new a.TextNode,d=new f.VibrantView,l=new f.Wordflip,u=f.ScriptsLoader,p=y.once(function(e){c.initialise(e)}),h.connect("trigger",l,"resize"),g.connect("trigger",l,"scroll"),v.connect("zoom",l,"zoom"),v.connect("touchstart",l,"touchstart"),v.connect("touchend",l,"touchend"),h.connect("trigger",d,"resize"),g.connect("trigger",d,"scroll"),v.connect("zoom",d,"zoom"),v.connect("touchstart",d,"touchstart"),v.connect("touchend",d,"touchend"),e.intext=function(e,t){var i,o=t+":",n={newHooks:function(e){l.invoke(e),d.invoke(e),u.invoke(e)},click:function(e){s(e)}},r=m.getBoolean("partner.intext.adhesion",!1);i=r?new f.Hook({product:t,placement:"hooked-adhesion",fetchFormat:"{{id}}:320:80",eventCallbacks:n}):new f.Hook({product:t,placement:"dropin",fetchFormat:"{{id}}:1:1",eventCallbacks:n});var a={};function s(i){var e,o="adhesion";if(i&&i.hook&&(e=i.hook.getAdConfig())){var t={cdnUrl:"//"+m.cdn.internal,id:e.ads[0].creative.value};w.template.load(t,e,function(e,t){!e&&t&&(t.params.isCPE||(o="inview"),a[o].invoke(i))})}}a.adhesion=new f.AdhesionPlacement,a.inview=new f.InView,a.dropin=new f.DropInPlacement,y.forEach(a,function(e){h.connect("trigger",e,"resize"),g.connect("trigger",e,"scroll"),v.connect("zoom",e,"zoom"),v.connect("touchstart",e,"touchstart"),v.connect("touchend",e,"touchend")}),l.on(o+"highlight",function(e){s(e.data)}),c.on("trigger",function(e){i.invoke(e.data)}),p(e)},e.inview=function(e,t){if(!r){var i=new f.InView,o=new f.Hook({product:t,fetchFormat:"{{id}}:{{width}}:"+t,callback:i.processNode,eventCallbacks:{newHooks:function(e){l.invoke(e),d.invoke(e),u.invoke(e),n(e)},click:function(e){i.invoke(e)}}});c.on("trigger",function(e){o.invoke(e.data)}),d.on("trigger",function(e){t===e.data.hook.getProduct()&&i.invoke(e.data)}),e.on(client.app.trigger.scroll,function(){n({hooks:s.getVisibleHooks(t),viewSource:client.Log.viewSource.SCROLL})}),p(e)}function n(e){f.AutoReveal.autoOpen(i,e)}},e.instory=function(e,t){var i=new f.InStory,o=new f.Hook({product:t,fetchFormat:"{{id}}:{{width}}:"+t,callback:i.processNode,prefilterNodes:i.prefilterNodes,eventCallbacks:{newHooks:function(e){d.invoke(e),u.invoke(e),n(e)},click:function(e){i.invoke(e)}}});function n(e){for(var t=0;t<e.hooks.length;t++)e.hooks[t].getAdConfig()&&!e.hooks[t].autoOpened&&(i.invoke({hook:e.hooks[t],viewSource:e.viewSource}),e.hooks[t].autoOpened=!0)}c.on("trigger",function(e){o.invoke(e.data)}),d.on("trigger",function(e){t===e.data.hook.getProduct()&&i.invoke(e.data)}),e.on(client.app.trigger.scroll,function(){n({hooks:s.getVisibleHooks(t),viewSource:client.Log.viewSource.SCROLL})}),p(e)},e}}}};var platform=platform||{};platform.tablet=function(g,v,t,f,m,i){return{initialise:function(){var e={};if(t.isAllowed(client.PubX.IN_CONTENT)){var r,a,s,c,d,l,u=new f.Resize,p=new f.Scroll,h=new f.Gesture;return u.initialise(),p.initialise(),h.initialise(),e.image=function(e){var t,i=new f.Image(v.get("partner.image",{})),o=f.Gallery.load(v.get("partner.gallery",{})),n=new g.Image;i.on("trigger",function(e){n.invoke(e.data)}),o&&(t=new g.Gallery({api:o.api}),o.on("trigger",function(e){n.invoke(e.data)}),n.on("galleryBehaviour",function(e){t.invoke(e.data)})),i.initialise(e)},e.inline=function(e){var t,i=v.get("partner.inline",{});t=i.usesimpleelement?new f.SimpleElement(i):new f.ParagraphBreak(i);var o=new g.Inline;t.on("trigger",function(e){o.invoke(e.data)}),t.initialise(e)},e.adhesion=function(){var e=new f.Adhesion(v.get("partner.adhesion",{})),t=new g.AdhesionBackfill({fetchFormat:"{{id}}:728:90"}),i=new g.AdhesionPlacement;u.connect("trigger",i,"resize"),p.connect("trigger",i,"scroll"),h.connect("zoom",i,"zoom"),t.on("adsReady",function(e){i.invoke(e.data)}),i.on("fetchAd",function(e){t.invoke(e.data)}),e.once("trigger",function(e){t.invoke(e.data)}),e.initialise(p)},r=v.getBoolean("partner.inview.desktoponly",!1),a=new f.TextNode,s=new g.VibrantView,c=new g.Wordflip,d=g.ScriptsLoader,l=i.once(function(e){a.initialise(e)}),u.connect("trigger",c,"resize"),p.connect("trigger",c,"scroll"),h.connect("zoom",c,"zoom"),h.connect("touchstart",c,"touchstart"),h.connect("touchend",c,"touchend"),u.connect("trigger",s,"resize"),p.connect("trigger",s,"scroll"),h.connect("zoom",s,"zoom"),h.connect("touchstart",s,"touchstart"),h.connect("touchend",s,"touchend"),e.intext=function(e,t){var i,o,n=t+":",r={newHooks:function(e){c.invoke(e),s.invoke(e),d.invoke(e)},click:function(e){i.invoke(e)}};v.getBoolean("partner.intext.adhesion",!1)?(i=new g.AdhesionPlacement,o=new g.Hook({product:t,placement:"hooked-adhesion",fetchFormat:"{{id}}:728:90",eventCallbacks:r}),c.on(n+"highlight",function(e){i.invoke(e.data)}),u.connect("trigger",i,"resize"),p.connect("trigger",i,"scroll"),h.connect("zoom",i,"zoom"),h.connect("touchstart",i,"touchstart"),h.connect("touchend",i,"touchend")):(i=new g.DropInPlacement,o=new g.Hook({product:t,placement:"dropin",fetchFormat:"{{id}}:1:1",eventCallbacks:r})),a.on("trigger",function(e){o.invoke(e.data)}),l(e)},e.inview=function(e,t){if(!r){var i=new g.InView,o=new g.Hook({product:t,fetchFormat:"{{id}}:{{width}}:"+t,callback:i.processNode,eventCallbacks:{newHooks:function(e){c.invoke(e),s.invoke(e),d.invoke(e),n(e)},click:function(e){i.invoke(e)}}});a.on("trigger",function(e){o.invoke(e.data)}),s.on("trigger",function(e){t===e.data.hook.getProduct()&&i.invoke(e.data)}),e.on(client.app.trigger.scroll,function(){n({hooks:m.getVisibleHooks(t),viewSource:client.Log.viewSource.SCROLL})}),l(e)}function n(e){g.AutoReveal.autoOpen(i,e)}},e.instory=function(e,t){if(!r){var i=new g.InStory,o=new g.Hook({product:t,fetchFormat:"{{id}}:{{width}}:"+t,callback:i.processNode,prefilterNodes:i.prefilterNodes,eventCallbacks:{newHooks:function(e){s.invoke(e),d.invoke(e),n(e)},click:function(e){i.invoke(e)}}});a.on("trigger",function(e){o.invoke(e.data)}),s.on("trigger",function(e){t===e.data.hook.getProduct()&&i.invoke(e.data)}),e.on(client.app.trigger.scroll,function(){n({hooks:m.getVisibleHooks(t),viewSource:client.Log.viewSource.SCROLL})}),l(e)}function n(e){for(var t=0;t<e.hooks.length;t++)i.invoke({hook:e.hooks[t],viewSource:e.viewSource})}},e}}}};var trigger=trigger||{};trigger.Adhesion=function(t){var n="trigger";function e(e){t.Observable.call(this),this.minScroll=e.getInteger("minscroll",0),this.triggered=!1}return(e.prototype=new t.Observable).initialise=function(e){var o=this;e.on(n,function(e){var t=e.data,i=t.scroll||0;!o.triggered&&i>=o.minScroll&&o.fire(n,{viewSource:t.viewSource||client.Log.viewSource.SCROLL,scroll:i})})},e};var trigger=trigger||{};trigger.Gallery=function(e,t,o,n,r,a,s){var c={TRIGGER:"trigger"};function d(e){var i=this;o.Observable.call(this),this.selectors=e.selectors,this.script=e.script,this.gallery=e.gallery,this.api={channel:new o.Observable,config:t,dom:r,events:o,utils:n,selectors:this.selectors,gallery:this.gallery},this.api.channel.on("newImage",function(e){var t=new a.ImageNode(e.data.image);i.fire(c.TRIGGER,{hooks:[t],maxAds:1,viewSource:client.Log.viewSource.LOAD,gallery:!0}),t.isInViewport()&&s.forceFlush()}),this.loadScript()}return(d.prototype=new o.Observable).loadScript=function(){var t=this;e.VM.gallery=e.VM.gallery||{},e.VM.gallery.initialise=function(e){e(t.api)},r.appendScript(this.script)},{GalleryTrigger:d,load:function(e){var t,i=e.getArray("selectors",!1),o=e.get("script",!1);return!(!i&&!o)&&!!(t=document.querySelector(i))&&new d({selectors:i,script:o,gallery:t})}}};var trigger=trigger||{};trigger.Gesture=function(e,i,t,o){function n(){i.Observable.call(this),this.connect(client.app.trigger.zoom,e)}return(n.prototype=new i.Observable).initialise=function(){var t;t=this,i.bind(window,"touchstart",o.debounce(function(e){t.fire(client.app.trigger.touchstart,e)},150,{leading:!0})),i.bind(window,"touchend",o.debounce(function(e){t.fire(client.app.trigger.touchend,e)},150,{leading:!0}))},n};var trigger=trigger||{};trigger.Image=function(t,n){var r="trigger";function e(e){t.Observable.call(this),this.config=e,this.images=[]}function i(e,t){var i=[],o=e.config.getInteger("maxhooks",1);n.forEach(e.images,function(e){e.isInViewport()&&(e.isAvailable()?(e.lock(),e.isVisible()&&i.push(e)):e.hasAdUnit()?--o:e.lock())}),o<1||0===i.length||(i.sort(function(e,t){return t.getArea()-e.getArea()}),e.fire(r,{hooks:i,maxAds:o,viewSource:t}))}return(e.prototype=new t.Observable).initialise=function(e){e.on(client.app.trigger.newContent,function(e){this.images.push.apply(this.images,e.data.images)},this),e.on(client.app.trigger.load,function(){i(this,client.Log.viewSource.LOAD)},this),e.on(client.app.trigger.scroll,function(){i(this,client.Log.viewSource.SCROLL)},this)},e};var trigger=trigger||{};trigger.ParagraphBreak=function(o,t,n){var i="trigger";function e(e){t.Observable.call(this),this.config=e}return(e.prototype=new t.Observable).initialise=function(e){e.on(client.app.trigger.load,function(){var e=o.findParagraphs(this.config);if(this.config.getBoolean("nowaterline"))this.hook=e[0];else for(var t=0,i=e.length;t<i;++t)if(e[t].isBelowWaterline()){this.hook=e[t];break}this.hook||n.notifyFailure("inline")},this),e.on(client.app.trigger.scroll,function(){this.hook&&this.hook.isAvailable()&&!this.hook.isBelowWaterline()&&(this.hook.lock(),this.fire(i,{hook:this.hook,viewSource:client.Log.viewSource.SCROLL}))},this)},e};var trigger=trigger||{};trigger.Resize=function(t,i,o){var n="trigger";function e(){i.Observable.call(this)}return(e.prototype=new i.Observable).initialise=function(){var e=this;i.bind(window,"resize",o.debounce(function(){t.fire(client.app.trigger.resize),e.fire(n)},250))},e};var trigger=trigger||{};trigger.Scroll=function(e,i,t){var o="trigger";function n(){var e=this;t.Observable.call(this),this.lastScrollY=0,this._isUnderAnimation=!1,this.onAnimationStart=function(){e._isUnderAnimation=!0},this.onAnimationEnd=function(){e._isUnderAnimation=!1}}return(n.prototype=new t.Observable).initialise=function(){e.on(client.app.inview.animationStart,this.onAnimationStart),e.on(client.app.inline.animationStart,this.onAnimationStart),e.on(client.app.inview.animationEnd,this.onAnimationEnd),e.on(client.app.inline.animationEnd,this.onAnimationEnd),e.on(client.app.trigger.load,function(){this.lastScrollY=0,this.fire(o,{viewSource:client.Log.viewSource.LOAD,scroll:0,direction:0})},this),e.on(client.app.trigger.scroll,function(){var e=i.getScrollY(),t=e-this.lastScrollY;this.lastScrollY=e,this._isUnderAnimation||this.fire(o,{viewSource:client.Log.viewSource.SCROLL,scroll:e,direction:t})},this)},n};var trigger=trigger||{};trigger.SimpleElement=function(t,i,o){var n="trigger";function e(e){i.Observable.call(this),this.config=e}return(e.prototype=new i.Observable).initialise=function(e){e.on(client.app.trigger.load,function(){var e=t.findElements(this.config);this.config.getBoolean("nowaterline"),this.hook=e[0],this.hook||o.notifyFailure("inline"),this.hook&&this.hook.isAvailable()&&!this.hook.isBelowWaterline()&&(this.hook.lock(),this.fire(n,{hook:this.hook,viewSource:client.Log.viewSource.SCROLL}))},this),e.on(client.app.trigger.manual,function(){var e=t.findElements(this.config);this.hook=e[0],this.fire(n,{hook:this.hook,viewSource:0})},this)},e};var trigger=trigger||{};trigger.TextNode=function(e,i,t,r){var a="trigger",s=e.getInteger("partner.intext.extendviewport",0);function o(){t.Observable.call(this)}return(o.prototype=new t.Observable).initialise=function(e){var o=[],n=s?function(e){var t=i.getAbsoluteViewport();return t.bottom+=s,!!i.getTextNodeBounds(e).getIntersection(t)}:function(e){return i.isInViewport(e)};function t(e,t){var i=r.filter(o,function(e){return n(e.getDomNode())});0<o.length&&e.fire(a,{nodes:i,viewSource:t})}e.on(client.app.trigger.newContent,function(e){r.forEach(e.data.textNodes,function(e){40<=e.getTextContent().length&&!e.isHyperlink()&&o.push(e)},this)},this),e.on(client.app.trigger.load,function(){t(this,client.Log.viewSource.LOAD)},this),e.on(client.app.trigger.scroll,function(){t(this,client.Log.viewSource.SCROLL)},this)},o};var behaviour=behaviour||{};behaviour.hook=behaviour.hook||{},behaviour.hook.AdAssign=function(o,s,c,d,l){var u="newHooks",p="hover",h="click";return function(e){var n=[],r=e.ads,t=e.candidateNodes,i=e.viewSource,a=e.product;o.forEach(t,function(e){var t,i=e.getId(),o=r[i]?r[i][0]:null;l.setNodeStatus(a,i,d.TextNode.LOCKED),o&&l.isPageHookAllowed(a)&&((t=c.create(e,r[i][0],a))?(n.push(t),l.decrementPageHookCount(a||"intext",1)):s.hookFailure({product:a||"intext",hookId:o.vibrantParameters.hookId,reason:client.Log.hookReason.TERM_NOT_FOUND}))}),o.forEach(n,function(e){e.on(pagecontent.Hook.EVENT_HOOKIN,function(){e.setTriggered(),l.executeCallback(a,p,{hook:e,viewSource:client.Log.viewSource.MOUSE_OVER,triggerSource:p})}),e.on(pagecontent.Hook.EVENT_CLICK,function(){e.setTriggered(),l.executeCallback(a,h,{hook:e,viewSource:client.Log.viewSource.MOUSE_OVER,triggerSource:h})})}),0<n.length&&(s.hookLoad({product:a,hookIds:o.map(n,function(e){return e.getId()}).join(",")}),l.executeCallback(a,u,{hooks:n,viewSource:i}))}};var behaviour=behaviour||{};behaviour.hook=behaviour.hook||{},behaviour.hook.HookAdFetcher=function(s,e,c,d,l,u,p){var a=2,t={nodes:[],candidateNodes:[],viewSource:null,count:0,ready:!1,state:1},h=["intext","inview"];function i(){this.waitList={}}return i.prototype.designate=function(e){this.waitList.hasOwnProperty(e)||(this.waitList[e]=c.extend({},t))},i.prototype.resolveFalse=function(e,t){this.waitList.hasOwnProperty(e)&&this.dataToFetch(e,[],[],0,t)},i.prototype.goFetch=function(e){this.waitList.hasOwnProperty(e.product)&&this.dataToFetch(e.product,e.nodes,e.candidateNodes,e.count,e.viewSource)},i.prototype.isFetching=function(e){return this.waitList[e].state===a},i.prototype.activeProducts=function(){return c.keys(this.waitList)},i.prototype.dataToFetch=function(e,t,i,o,n){var r=this.waitList[e];this.isFetching(e)||(r.nodes=r.nodes.concat(t),r.candidateNodes=r.candidateNodes.concat(i),r.viewSource=n,r.count=o,r.ready=!0,r.state=a),this.attemptFetch()},i.prototype.resetWaitList=function(){c.forOwn(this.waitList,function(e){c.extend(e,t)})},i.prototype.attemptFetch=function(){var t=this;!c.some(t.activeProducts(),function(e){return!1===t.waitList[e].ready})&&this.fetch()},i.prototype.fetch=function(){var i,o=[],n={},r=[];if(c.forOwn(this.waitList,function(e,t){o=o.concat(e.nodes),n[t]=e.candidateNodes.slice(0),i=e.viewSource,r.push(e.count)}),this.resetWaitList(),o.length){var e=!1;u.getVisibleHooks()&&(e=c.some(u.getVisibleHooks(),function(e){var t=e.getAdConfig();return"internal"===t.ads[0].creative.creativeType&&c.includes(h,t.product)}));var t=n.hasOwnProperty("inview")&&p.revealsAllowed(),a={ids:o,count:Math.max.apply(null,r),internal:e,autoreveal:t};s.request("intext",a,function(e){var o={};for(var t in n)n.hasOwnProperty(t)&&(o.hasOwnProperty(t)||(o[t]={}));c.forOwn(e,function(e,t){var i=d.hash[e[0].vibrantParameters.product];o.hasOwnProperty(i)||(o[i]={}),o[i][t]=e}),c.forOwn(o,function(e,t){l({ads:e,candidateNodes:n[t],viewSource:i,product:t})})})}},new i};var behaviour=behaviour||{};behaviour.hook=behaviour.hook||{},behaviour.hook.Behaviour=function(l,d,u,p,h,g,r){var v={instory:1,inview:1,inline:3,intext:3},f={instory:5,inview:5,inline:5,intext:5},e=function(e){var t=e.product;-1===["instory","inview","inline","intext"].indexOf(t)?(console.log("Invalid product ("+t+"), using default of intext"),this.product="intext"):this.product=t;var i,o,n="partner."+this.product+".";this.selector=(i=this.product,o=!1,i&&(o=l.get("partner."+i+".selectors",!1)),o||(o=l.get("partner.all.selectors",!1)),o||(o=l.get("partner.intext.selectors","BODY")),o);var r=l.getInteger(n+"maxhooks",v[this.product]),a=l.getInteger(n+"pagemaxhooks",f[this.product]),s=l.getInteger("partner.all.maxhooks",9999);isNaN(s)?(console.log("Warning: Invalid total max viewport hooks, using default"),this.totalMaxViewportHooks=9999):this.totalMaxViewportHooks=s;var c=l.getInteger("partner.all.pagemaxhooks",9999);isNaN(c)?(console.log("Warning: Invalid total max page hooks, using default"),this.totalMaxPageHooks=9999):this.totalMaxPageHooks=c,this.fetchFormat=e.fetchFormat,this.callback=e.callback||!1,this.prefilterNodes=e.prefilterNodes||!1,isNaN(a)?(console.log("Warning: Invalid product max page hooks, using default"),this.maxHooksPerPage=f[this.product]):this.maxHooksPerPage=a,g.setTotalMaxPageHooks(this.totalMaxPageHooks),g.setMaxPageHooksForProduct(this.product,this.maxHooksPerPage),g.registerProduct(this.product,e.eventCallbacks),h.designate(this.product),isNaN(r)&&(console.log("Warning: Invalid product max viewport hooks, using default"),r=v[this.product]);var d=g.getNumberOfAllowedPageHooks(this.product);d<r&&(r=d),r>this.totalMaxViewportHooks&&(r=this.totalMaxViewportHooks),this.maxHooksPerViewport=r,this.discoveredNodes=[]};return e.prototype.isNumDiscoveredNodeHooksAtLimit=function(){var i=0;return d.forEach(this.discoveredNodes,function(e){var t=e.node.getHooks();t&&0<t.length&&(i+=t.length)}),i>=this.totalMaxPageHooks},e.prototype.addToDiscoveredNodes=function(e){var n=this.discoveredNodes;d.forEach(e,function(e){var t,i;for(t=0;t<n.length;t++)if(e.id===n[t].node.id){i=!0;break}if(!i&&e.domNode){var o=r.getTextNodeBounds(e.domNode);n.push({node:e,bottomPos:o.bottom,status:"pending"})}}),n.sort(function(e,t){return e.bottomPos-t.bottomPos})},e.prototype.invoke=function(e){var o=this,i=this.maxHooksPerViewport,n=[],r=[];if(this.viewSource=e.viewSource,!g.isPageHookAllowed(this.product))return console.debug("Ignoring hook for product "+this.product),void h.resolveFalse(this.product,this.viewSource);var t=this.isNumDiscoveredNodeHooksAtLimit();if(t)return console.debug("Number of hooks ("+t+") reached limit"),void h.resolveFalse(this.product,this.viewSource);this.addToDiscoveredNodes(e.nodes);var a=p.getHookableTags(e.nodes,this.product,this.selector,this.prefilterNodes,this.discoveredNodes);if(d.forEach(a,function(e){var t=g.getNodeStatus(o.product,e.getId());t===u.TextNode.IN_FLIGHT?i--:t===u.TextNode.LOCKED?d.forEach(e.getHooks(),function(e){e.isInViewport()&&i--}):r.push(e)}),i<=0||0===r.length)return console.debug("No hooks ("+i+") or nodes ("+r.length+") found in node cache for product "+this.product),void h.resolveFalse(this.product,this.viewSource);var s=g.getRecalculatedNumUsedViewportHooks(e,this.selector,this.discoveredNodes,this.product,u);if(this.maxHooksPerViewport-i+s>=this.totalMaxViewportHooks)return console.debug("Total max viewport hooks ("+this.totalMaxViewportHooks+") reached, product: "+this.product),void h.resolveFalse(this.product,this.viewSource);var c=[];d.forEach(r,function(t){var e=t.getId(),i=function(e){n.push(d.replaceUrlParams(o.fetchFormat,e)),c.push(t)};g.setNodeStatus(o.product,e,u.TextNode.IN_FLIGHT),o.callback?o.callback(t,e,i):i({node:t,id:e})}),r=c,h.goFetch({product:this.product,nodes:n,count:i,viewSource:this.viewSource,candidateNodes:r})},e};var behaviour=behaviour||{};behaviour.hook=behaviour.hook||{},behaviour.hook.NodeFilter=function(n,s,c){var e,d={inview:n.getInteger("partner.inview.collisionoffset",0),instory:n.getInteger("partner.instory.collisionoffset",0),inline:n.getInteger("partner.inline.collisionoffset",0),intext:n.getInteger("partner.intext.collisionoffset",0)},l={H1:!0,H2:!0,H3:!0,ASIDE:!n.getBoolean("partner.allowaside",!1)},u={},p=(0<(e=n.getArray("partner.intext.nohooknodes",[])).length&&(e=s.filter(e,function(e){return""!==e})),e),h=["inview","instory","inline"];return{getHookableTags:function(e,r,a,t,i){if(n.forceMode)return e;var o=s.filter(e,function(e){var t=e.id;if(u[t])return!1;var i=-1!==h.indexOf(r),o=e.domNode;if(i&&c.detectCollisions(o.parentElement,d[r]))return!1;var n=function e(t){var i=t.parentNode;if(!c.isElement(i))return{hookable:!1,discard:!1};if(l[i.tagName])return{hookable:!1,discard:!0};if(0<p.length&&(c.matchesSelector(i,p)||c.parentHasSelector(i,p)))return{hookable:!1,discard:!0};var o=document.querySelectorAll(a);return s.includes(o,i)?{hookable:!0,discard:!1}:e(i)}(o);return n.discard&&(u[t]=!0),n.hookable});return t?t(o,i):o}}};var behaviour=behaviour||{};behaviour.hook=behaviour.hook||{},behaviour.hook.Mediator=function(h,g){function e(){this.nodeStatus={},this.productEventCallbacks={},this.maxAllowedNumProductPageHooks={},this.totalAllowedNumPageHooks=9999}return e.prototype.setTotalMaxPageHooks=function(e){var t=parseInt(e,10);isNaN(t)&&(t=9999),this.totalAllowedNumPageHooks=t},e.prototype.setMaxPageHooksForProduct=function(e,t){var i=parseInt(t,10);isNaN(i)&&(i=9999),this.maxAllowedNumProductPageHooks[e]=i},e.prototype.isPageHookAllowed=function(e){if(this.totalAllowedNumPageHooks<1)return!1;var t=this.maxAllowedNumProductPageHooks[e];return!isNaN(t)&&0<t},e.prototype.getNumberOfAllowedPageHooks=function(e){var t=this.maxAllowedNumProductPageHooks[e];return isNaN(t)&&(t=0),(this.totalAllowedNumPageHooks<1||t<1)&&(t=0),t},e.prototype.decrementPageHookCount=function(e,t){this.maxAllowedNumProductPageHooks[e]-=t,this.totalAllowedNumPageHooks-=t},e.prototype.getRecalculatedNumUsedViewportHooks=function(e,t,o,n,r){var a,s=e.nodes,c=e.prefilterNodes,i=Object.keys(this.maxAllowedNumProductPageHooks),d=[],l=[],u=0,p=this;return h.forEach(i,function(i){i!==n&&(a=g.getHookableTags(s,i,t,c,o),h.forEach(a,function(e){var t=e.getId();-1===l.indexOf(t)&&(e.product=i,d.push(e),l.push(t))}))}),h.forEach(d,function(e){var t=e.getId(),i=e.product,o=p.getNodeStatus(i,t);if(o===r.TextNode.IN_FLIGHT)u++;else if(o===r.TextNode.LOCKED){var n=e.getHooks();h.forEach(n,function(e){e.isInViewport()&&u++})}}),u},e.prototype.getNodeStatus=function(e,t){return this.nodeStatus[e][t]},e.prototype.setNodeStatus=function(e,t,i){this.nodeStatus[e][t]=i},e.prototype.registerProduct=function(e,t){this.nodeStatus[e]||(this.nodeStatus[e]={}),this.productEventCallbacks[e]||(this.productEventCallbacks[e]={}),h.extend(this.productEventCallbacks[e],t)},e.prototype.executeCallback=function(e,t,i){var o=this.productEventCallbacks[e];o&&o[t]&&o[t](i)},new e};var behaviour=behaviour||{};behaviour.image=behaviour.image||{};var DEFAULT_MAX_DEPTH=3;behaviour.image.Behaviour=function(i,p,h,g,v,e,n,f,m,y,w){var b=h.getInteger("partner.image.pagemaxhooks",0),k=!!b;function t(){var e=h.get("partner.image",{});switch(e.get("caption.strategy",null)){case"bruteForce":this.captionStrategy=new m.BruteForce(e.getInteger("caption.maxdepth",DEFAULT_MAX_DEPTH));break;case"cssSelector":this.captionStrategy=new m.CssSelector(e.get("caption.selector"));break;default:this.captionStrategy=null}}return(t.prototype=new e.Observable).invoke=function(s){var e=s.hooks||[],c=this,o=h.getBoolean("partner.image.scaletofit",!0)?1.5:1,d="image",t=y.map(e,function(e){var t=Math.floor(e.getWidth()*o),i=Math.floor(e.getHeight()*o);return e.getId()+":"+t+":"+i});function l(e,t,i){n.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||client.Log.closeSource.AUTO}),i()}function u(e,t,i){e=p.decoration.decorate(e,{decorationType:d}),n.adImpression({product:e.product,hookId:e.settings.vibrantParameters.hookId,setId:e.settings.vibrantParameters.setId,source:t}),i()}k&&b<1||i.request("image",{ids:t,count:s.maxAds},function(r){var a=[];y.forEach(e,function(i){var e,o,t,n=i.getId();if(r.hasOwnProperty(n)){if(k){if(b<1)return;--b}(e=r[n][0]).container={width:i.getWidth(),height:i.getHeight()},o=p.adunit.create({product:"image",settings:e,templateSettings:{cdnUrl:"//"+h.cdn.internal,id:e.ads[0].creative.value},creativeLoad:function(e){var t=g.waterfall.select(e,"image",d);return d=t.decoration,t.creative},render:function(e,t){e.position=new p.position.Absolute(function(){return m.findPositionWithinImage(i.getDomNode(),o,c.captionStrategy)}),t(null,e)},open:u,close:l}),v.onPositionChange(i.getDomNode(),function(){o.fire("domChange"),t||(!i.isVisible()&&o.isOpen()&&o.fire("hide"),i.isVisible()&&!o.isOpen()&&o.fire("show"))}),w.on(client.app.inview.animationStart,function(){t=!0,o.fire("hide")}),w.on(client.app.inview.animationEnd,function(){o.fire("domChange"),o.fire("show"),t=!1}),s.gallery&&c.fire("galleryBehaviour",{adUnit:o}),i.setAdUnit(o),f.track(o,e.trackers,e.term),o.connect("opened",o,"impression"),o.connect(o.EVENT_CLICK,o,"click"),o.fire("open",s.viewSource),a.push(e.vibrantParameters.hookId)}}),0<a.length&&n.hookLoad({product:"image",hookIds:a.join(",")})})},t};var behaviour=behaviour||{};behaviour.image=behaviour.image||{},behaviour.image.Deviations=function(e,n){var o=[{func:function(e,i,o){return n.forOwn(i,function(e,t){o.hasOwnProperty(t)&&(i[t]+=parseInt(o[t],10)||0)}),i},value:e.get("partner.image",{}).get("pos",!1)}];return{applyRules:function(t,i){return n.forEach(o,function(e){e.value&&(i=e.func(t,i,e.value))}),i}}};var behaviour=behaviour||{};behaviour.image=behaviour.image||{},behaviour.image.Gallery=function(t){function e(e){t.Observable.call(this),this.channel=e.api.channel}return(e.prototype=new t.Observable).invoke=function(e){e.adUnit&&this.channel.fire("newAd",{ad:e.adUnit})},e};var behaviour=behaviour||{};behaviour.image=behaviour.image||{},behaviour.image.Position=function(n,v,d,f){function e(e){this.maxDepth=e}function t(e){this.selector=e}return e.prototype.findCaptionTop=function(e,i){var t=0,o=1/0;function n(e){if(e.nodeType===client.Dom.ELEMENT_NODE&&"vm-adunit-outer"!==e.className&&v.isVisible(e)){var t=v.getPosition(e);t.top<o&&i.getIntersection(t)&&(o=t.top),d.forEach(e.childNodes,n)}}for(;t<this.maxDepth;){var r=e.parentNode;if(!r)break;for(var a=r.childNodes,s=0,c=a.length;s<c;++s)a[s]!==e&&n(a[s]);e=r,++t}return isFinite(o)?o:null},t.prototype.findCaptionTop=function(e,i){var t=n.querySelectorAll(this.selector),o=1/0;return d.forEach(t,function(e){var t=v.getPosition(e);v.isVisible(e)&&t.getIntersection(i)&&(o=t.top)}),isFinite(o)?o:null},{findPositionWithinImage:function(e,t,i){var o,n,r,a,s,c=v.getPosition(e),d=c.right-c.left,l=t.width||t.getWidth(),u=t.height||t.getHeight();if(a=c.bottom-u,s=c.bottom,0<d-l)n=c.left+(d-l)/2,r=c.right-(d-l)/2;else{var p=t.body.parentElement;p&&(p.style.width=d+"px"),n=c.left,r=c.right}var h=new v.Coord({top:a,left:n,bottom:s,right:r}),g=v.getVisibleRect(e);return t.visibleRect=g,e.height>g.height&&h.shiftY(g.height-e.height),i&&(o=i.findCaptionTop(e,h))&&h.shiftY(o-c.bottom),f.applyRules(e,h)},BruteForce:e,CssSelector:t}};var behaviour=behaviour||{};behaviour.instory=behaviour.instory||{},behaviour.instory.PrefilterNodes=function(e,t,o){var i=e.get("platform",""),n=0,c=0;switch(i){case"desktop":n=700,c=800;break;case"tablet":n=500,c=800;break;case"mobile":n=300,c=800}return function(e,i){return[function(e){return t.filter(e,function(e){if(e.domNode&&e.domNode.parentNode){var t=o.getPosition(e.domNode.parentNode);if(t)return t.bottom>n}return!1})},function(e,r){var a,s=[];return t.forEach(e,function(t){var e=r.filter(function(e){return e.node.id===t.id||"allowed"===e.status}),i=-1;for(a=0;a<e.length;a++)if(e[a].node.id===t.id){i=a;break}if(-1!==i){if("pending"===e[i].status){var o=0===i||e[i].bottomPos-e[i-1].bottomPos>c,n=i>=e.length-1||e[i+1].bottomPos-e[i].bottomPos>c;e[i].status=o&&n?"allowed":"disallowed","allowed"===e[i].status&&s.push(t)}}else console.log("failed to find node in nodelist")}),s}].reduce(function(e,t){return t(e,i)},e)}},behaviour.instory.Filter=function(e,t,n){var r="mobile"===e.platform?250:400,a=e.getArray("partner.instory.blockednodes",["img","div","iframe"]),s=e.get("partner.instory.avoid",null),c=e.getBoolean("partner.instory.collisiondetect",!0),d=e.getInteger("partner.instory.collisionoffset",10),l=e.get("partner.instory.blockbyparent",null);return function(e){var t,i,o={allowed:!1,width:null};if(!n.isElement(e))return o;if((t=n.getTextNodeBounds(e).getWidth())<r)return o;if(n.elementHasNodes(e,a))return o;if(l&&n.parentHasSelector(e,l.split(",")))return o;if(c&&n.detectCollisions(e,d))return o;if(i=n.nextElementSibling(e)){if(-1!==i.className.indexOf("tt-wrapper"))return o;if(s&&n.matchesSelector(i,s))return o}return{allowed:!0,width:t}}};var behaviour=behaviour||{};behaviour.instory=behaviour.instory||{},behaviour.instory.Behaviour=function(e,s,c,i,t,d,o,l,u,n,p,h,r){function a(){this.activeHook=null,this.activeUnit=null,this.allowNewUnits=!0}return(a.prototype=new o.Observable).prefilterNodes=function(e,t){return r(e,t)},a.prototype.processNode=function(e,t,i){var o,n=e.getDomNode(),r=d.findParentParagraph(n),a=h(r);a.allowed&&(o=a.width,c.getBoolean("partner.instory.scaletofit",!0)&&(o*=1.2),i({node:e,id:t,width:Math.floor(o)}))},a.prototype.invoke=function(e){var o=this;if(this.allowNewUnits){var r=e.hook,t=r.getAdConfig();if(r!==this.activeHook||!this.activeUnit.isOpen()){var n="instory";t.container={width:r.getParagraphPosition().getWidth()};var a=s.adunit.create({product:"instory",settings:t,delayLoad:!0,templateSettings:{cdnUrl:"//"+c.cdn.internal,id:t.ads[0].creative.value},creativeLoad:function(e){var t=i.waterfall.select(e,"instory",n);return n=t.decoration,t.creative},render:function(e,t){e.position=new s.position.Instory(r),t(null,e)},open:function(e,t,i){(function(e){if(!e)return;var t=e.template.params,i=e.outerBox.querySelector(".vm-adunit-content");t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor);var o=((r.adConfig||{}).container||{}).width;o&&(e.scaleToFit(o),e.fire("resize"));if(e.position){var n=e.position.hook;n&&n.domNode&&n.domNode.setAttribute("style","cursor:text")}})(e=s.decoration.decorate(e,{decorationType:n})),i()},close:function(e,t,i){t===client.Log.closeSource.AD&&!0===o.allowNewUnits&&(o.allowNewUnits=!1,p.fire("instoryClose"));r.disconnectAll(a),r.removeStyling(),l.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||client.Log.closeSource.AUTO}),i()}});u.track(a,t.trackers,t.term),a.connect("slidingopened",a,"impression"),a.connect(a.EVENT_CLICK,a,"click"),a.on("slidingopened",function(){l.adImpression({product:a.product,hookId:a.settings.vibrantParameters.hookId,setId:a.settings.vibrantParameters.setId,source:e.viewSource})}),r.connect(pagecontent.Hook.EVENT_HOOKIN,a,a.EVENT_MOUSEIN),r.connect(pagecontent.Hook.EVENT_HOOKOUT,a,a.EVENT_MOUSEOUT),r.connect(pagecontent.Hook.EVENT_CLICK,a,a.EVENT_CLICK),!c.mobile&&e.triggerSource&&a.once("opened",function(){a.fire("delegate",{triggerSource:e.triggerSource,source:client.Log.clickSource.HOOK})}),a.fire("open",e.viewSource),this.activeHook=r,this.activeUnit=a,p.on("instoryClose",function(){a.fire("close")})}}},a};var behaviour=behaviour||{};behaviour.inview=behaviour.inview||{},behaviour.inview.Filter=function(e,t,n){var r="mobile"===e.platform?250:400,a=e.getArray("partner.inview.blockednodes",["img","div","iframe"]),s=e.get("partner.inview.avoid",null),c=e.getBoolean("partner.inview.collisiondetect",!0),d=e.getInteger("partner.inview.collisionoffset",10),l=e.get("partner.inview.blockbyparent",null);return function(e){var t,i,o={allowed:!1,width:null};if(!n.isElement(e))return o;if((t=n.getTextNodeBounds(e).getWidth())<r)return o;if(n.elementHasNodes(e,a))return o;if(l&&n.parentHasSelector(e,l.split(",")))return o;if(c&&n.detectCollisions(e,d))return o;if(i=n.nextElementSibling(e)){if(-1!==i.className.indexOf("tt-wrapper"))return o;if(s&&n.matchesSelector(i,s))return o}return{allowed:!0,width:t}}};var behaviour=behaviour||{};behaviour.inview=behaviour.inview||{},behaviour.inview.Behaviour=function(e,u,p,i,t,h,o,g,n,r,a,s,v){var f,c=p.getBoolean("partner.inview.closeonopen",!1);function d(){var e=this;this.activeHook=null,this.activeUnit=null,c&&a.on(client.app.intext.tooltipClose,function(){e.closeOpenUnits()})}return(d.prototype=new o.Observable).processNode=function(e,t,i){var o,n=e.getDomNode(),r=h.findParentParagraph(n),a=s(r);a.allowed&&(o=a.width,p.getBoolean("partner.inview.scaletofit",!0)&&(o*=1.2),i({node:e,id:t,width:Math.floor(o)}))},d.prototype.closeOpenUnits=function(){this.activeUnit&&(f=this.activeUnit.getPosition(),this.activeUnit.fire("close",client.Log.closeSource.AUTO))},d.prototype.invoke=function(r){var a=this,s=r.hook,c=s.getAdConfig();if(s!==this.activeHook||!this.activeUnit.isOpen())if(p.getInteger("programmaticOverride",0)&&s.getWaterfallOverrideAllowed())v.getAdForHook(s,function(e){if(e){var t=s.id,i=c.vibrantParameters.adProviderId,o=e.vibrantParameters.hookId,n=e.vibrantParameters.adProviderId;g.hookLoad({product:"inview",hookIds:o}),g.hookReplacement({product:"inview",oldHookId:t,newHookId:o,oldAdProviderId:i||-1,newAdProviderId:n||-1,reason:client.Log.hookReason.OVERRIDE}),s.adConfig=e,s.id=o,r.adConfig=e}(e||s.liveLookupFailsShowUnderlyingAd)&&(s.resetWaterfallOverrideAllowed(),a.invoke(r),s.hookClickActive=!0)});else{var d="inview";c.container={width:s.getParagraphPosition().getWidth()};var l=u.adunit.create({product:"inview",settings:c,templateSettings:{cdnUrl:"//"+p.cdn.internal,id:c.ads[0].creative.value},creativeLoad:function(e){var t=i.waterfall.select(e,"inview",d);return d=t.decoration,t.creative},render:function(e,t){e.position=new u.position.Inview(s),t(null,e)},open:function(e,t,i){var o,n=h.getAbsoluteViewport(),r=(a=0,f&&(f.top>e.position.hook.getPosition().bottom||(a=f.getHeight(),f=null)),a);var a;(function(e){if(e){var t=e.getTemplateParams(),i=e.getTemplateHookParams()||{},o=e.outerBox.querySelector(".vm-adunit-content");t&&(t.backgroundColor&&(o.style.backgroundColor=t.backgroundColor),s&&i.cursorStyle&&s.setCursorStyle(i.cursorStyle));var n=((s.adConfig||{}).container||{}).width;n&&e.scaleToFit(n)}})(e=u.decoration.decorate(e,{decorationType:d})),g.adImpression({product:e.product,hookId:e.settings.vibrantParameters.hookId,setId:e.settings.vibrantParameters.setId,source:t}),p.getBoolean("mobile",!1)?o=l.getPosition().top+l.getHeight()/2-(n.top+n.bottom)/2-r:(o=l.getPosition().top+l.getHeight()+100-n.bottom,o=Math.max(0,o),o+=-r);0!==o&&h.smoothScrollY(o,1e3);i()},close:function(e,t,i){s.disconnectAll(l),g.adClose({product:e.product,hookId:e.settings.vibrantParameters.hookId,source:t||client.Log.closeSource.AUTO}),i()}});n.track(l,c.trackers,c.term),l.connect("opened",l,"impression"),l.connect(l.EVENT_CLICK,l,"click"),s.connect(pagecontent.Hook.EVENT_HOOKIN,l,l.EVENT_MOUSEIN),s.connect(pagecontent.Hook.EVENT_HOOKOUT,l,l.EVENT_MOUSEOUT),s.connect(pagecontent.Hook.EVENT_CLICK,l,l.EVENT_CLICK),!p.mobile&&r.triggerSource&&l.once("opened",function(){l.fire("delegate",{triggerSource:r.triggerSource,source:client.Log.clickSource.HOOK})}),this.closeOpenUnits(),l.fire("open",r.viewSource),this.activeHook=s,this.activeUnit=l}},d};var BidderBase=function(){this.bids=[],this.options={},this.name="bidderbase",this.status="pending"};BidderBase.prototype.formatBid=function(e,t,i,o,n,r,a,s){return{bidderName:e,bidId:t,zoneId:i,product:o,width:n,height:r,scriptUrl:a,scriptTag:'<script src="'+a+'"><\/script>',cpm:s,impressions:0,impressionCap:1}},BidderBase.prototype.getName=function(){return this.name},BidderBase.prototype.getBids=function(){return this.bids},BidderBase.prototype.getOptions=function(){return this.options||{}},BidderBase.prototype.getStatus=function(){return this.status},BidderBase.prototype.load=function(){throw"BidderBase.prototype.load must be overridden"},BidderBase.prototype.getBidByZoneId=function(t){return this.bids.find(function(e){return e.zoneId===t})};var CriteoBidder=function(i,o,e){this.FAST_BID_ENABLED=!0,this.scriptUrl=this.FAST_BID_ENABLED?"https://static.criteo.net/js/ld/publishertag.standalone.js":"https://static.criteo.net/js/ld/publishertag.js",this.criteo=null,this.bidTimeoutMs=2e3,this.name="criteo",this.supportedProducts=o,this.ipid=e||0;var n=this;this.adUnits={placements:[{slotid:"div-gpt-ad-0000000000000-0",zoneid:898770},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1232818},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1191579},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1191578},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1191580},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1175979},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1229156},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1191581},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1191582},{slotid:"div-gpt-ad-0000000000000-0",zoneid:898775},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1232819},{slotid:"div-gpt-ad-0000000000000-0",zoneid:898777},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1232820},{slotid:"div-gpt-ad-0000000000000-0",zoneid:898778},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1232821},{slotid:"div-gpt-ad-0000000000000-0",zoneid:898779},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1232824},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1232825},{slotid:"div-gpt-ad-0000000000000-0",zoneid:898772},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1352278},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1352277},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1352276},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1352275},{slotid:"div-gpt-ad-0000000000000-0",zoneid:1321165}]},this.productMap={},this.productMap[898770]={products:["intext"],size:"300x250",group:"all"},this.productMap[1232818]={products:["intext"],size:"300x250",group:"all"},this.productMap[1191579]={products:["inview"],size:"300x250",group:"all"},this.productMap[1191578]={products:["inview"],size:"480x320",group:"all"},this.productMap[1191580]={products:["inview"],size:"640x360",group:"all"},this.productMap[1175979]={products:["instory"],size:"300x250",group:"all"},this.productMap[1229156]={products:["instory"],size:"300x250",group:"all"},this.productMap[1191581]={products:["instory"],size:"480x320",group:"all"},this.productMap[1191582]={products:["instory"],size:"640x360",group:"all"},this.productMap[898778]={products:["image","adbar"],size:"320x50",group:"all"},this.productMap[1232821]={products:["image","adbar"],size:"320x50",group:"all"},this.productMap[898775]={products:["image","adbar"],size:"468x60",group:"all"},this.productMap[1232819]={products:["image","adbar"],size:"468x60",group:"all"},this.productMap[898777]={products:["image","adbar"],size:"728x90",group:"all"},this.productMap[1232820]={products:["image","adbar"],size:"728x90",group:"all"},this.productMap[898779]={products:["adhesion"],size:"300x50",group:"all"},this.productMap[1232824]={products:["adhesion"],size:"300x50",group:"all"},this.productMap[1232825]={products:["adhesion"],size:"300x50",group:"all"},this.productMap[898772]={products:["daw"],size:"300x250",group:"all"},this.productMap[1352278]={products:["instory"],size:"320x480",group:"high"},this.productMap[1352277]={products:["instory"],size:"300x250",group:"high"},this.productMap[1352276]={products:["instory"],size:"320x480",group:"low"},this.productMap[1352275]={products:["instory"],size:"300x250",group:"low"},this.productMap[1321165]={products:["adbar"],size:"728x90",group:"high"},this.adUnits.placements=this.adUnits.placements.filter(function(e){var t=n.productMap[e.zoneid];return!!t&&(0<o.filter(function(e){return-1<t.products.indexOf(e)}).length&&t.group===i)});for(var t=0;t<this.adUnits.placements.length;t++)this.adUnits.placements[t].publishersubid=this.ipid.toString()};CriteoBidder.prototype=new BidderBase,CriteoBidder.prototype.load=function(window,dom){var self=this;dom.appendScript(this.scriptUrl,function callback(){if(self.FAST_BID_ENABLED){var fastBid=localStorage.getItem("criteo_fast_bid_standalone");fastBid&&eval(fastBid)}self.criteo=window.Criteo,self.status="loaded",self.criteo.events.push(function(){self.criteo.SetLineItemRanges("0..30:0.01"),self.criteo.RequestBids(self.adUnits,self.bidCallback.bind(self),self.bidTimeoutMs)})})},CriteoBidder.prototype.bidCallback=function(e){for(var t=0;t<(e||[]).length;t++){var i=e[t],o=this.productMap[i.zoneId];if(o)for(var n=0;n<(o.products||[]).length;n++){var r=this.formatBid(this.getName(),i.id,i.zoneId,o.products[n],i.width,i.height,i.displayUrl,i.cpm);this.bids.push(r)}}this.status="completed"};var FreewheelBidder=function(e){this.supportedProducts=e,this.name="freewheel"};FreewheelBidder.prototype=new BidderBase,FreewheelBidder.prototype.load=function(){this.bidCallback([])},FreewheelBidder.prototype.bidCallback=function(e){this.bids=[],this.status="completed";for(var t=0;t<e.length;t++){var i=e[t],o=this.formatBid(this.getName(),i.id,i.zoneId,i.product,i.width,i.height,i.url,i.cpm);this.bids.push(o)}}}(window,document);
//# sourceMappingURL=kormorant-1.31.0.min.js.map