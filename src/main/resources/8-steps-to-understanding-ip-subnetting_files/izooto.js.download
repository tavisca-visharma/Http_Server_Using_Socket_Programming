if("undefined"!==typeof _izooto)throw Error("Duplicate Pixel Found !!");var Izooto=function(e){var a=this;a.throwError=function(a){throw Error(a);};a.log=function(b){1==a.debug&&console.log(b)};a.checkAlternates=function(){"object"!==typeof window._izAlternate?a.log("No alternate implementations found"):(void 0!=window._izAlternate.initAlt&&"function"==typeof window._izAlternate.initAlt&&window._izAlternate.initAlt(),Object.keys(_izAlternate).map(function(b,c){Object.keys(a).map(function(c,f){c===b&&(a[c]=_izAlternate[b])})}))};a.checkBrowser=function(){var a=navigator.userAgent.toLowerCase();parseFloat(navigator.appVersion);parseInt(navigator.appVersion,10);var c="",d,f;if(-1!=(d=a.indexOf("opr/"))){var g="Opera";var e=a.substring(d+4)}else-1!=(d=a.indexOf("opera"))?(g="Opera",e=a.substring(d+6),-1!=(d=a.indexOf("version"))&&(e=a.substring(d+8))):-1!=(d=a.indexOf("edge/"))?(g="Edge",e=a.substring(d+5)):-1!=(d=a.indexOf("edga/"))?(g="Edge",e=a.substring(d+5)):-1!=(d=a.indexOf("ucbrowser"))?(g="Ucb",e=a.substring(d+10)):-1!=(d=a.indexOf("msie"))?(g="Microsoft Internet Explorer",e=a.substring(d+
5)):-1!=(d=a.indexOf("crios"))?(g="Other",a.substring(d+6),e=c="40"):-1!=(d=a.indexOf("chrome"))?(g="Chrome",e=a.substring(d+7),/(.*?)wv\)/.test(a)&&(g="Other",e=c="41")):-1!=(d=a.indexOf("safari"))&&(/mac/.test(a)||/ipad|iphone|ipod/.test(a))?(g="Safari",e=a.substring(d+7),-1!=(d=a.indexOf("version"))&&(e=a.substring(d+8))):-1!=(d=a.indexOf("firefox"))?(g="Firefox",e=a.substring(d+8)):(g="Other",e="1");-1!=(f=e.indexOf(";"))&&(e=e.substring(0,f));-1!=(f=e.indexOf(" "))&&(e=e.substring(0,f));a=parseInt(""+
e,10);isNaN(a)&&(e=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10));if("40"==c||"41"==c)a=c;return g+"-"+a+"-"+e};a.checkIfSafari=function(){if(1!=a.deviceType)return 0;var b=a.checkBrowser().split("-");return"Safari"==b[0]&&7<=b[1]?1:0};a.incog=function(a){var b=window.RequestFileSystem||window.webkitRequestFileSystem;if(b)return b(window.TEMPORARY,100,function(b){a(!1)},function(b){a(!0)});a(!1)};a.checkIfChrome=function(){var b=a.checkBrowser().split("-");return"Chrome"==b[0]&&42<=b[1]?1:0};a.checkIfFirefox=function(){var b=a.checkBrowser().split("-");return 1!=a.deviceType&&"Firefox"==b[0]&&48<=b[1]?1:"Firefox"==b[0]&&44<=b[1]?1:0};a.checkIfUcb=function(){return"Ucb"==a.checkBrowser().split("-")[0]?1:0};a.checkIfOpera=function(){return"Opera"==a.checkBrowser().split("-")[0]?1:0};a.checkIfEdge=function(){return"Edge"==a.checkBrowser().split("-")[0]?1:0};a.checkForFcm=function(){var b=a.checkBrowser().split("-");return a.isUcb&&12<=b[1]||a.isOpera&&42<=b[1]||1==a.isEdge&&17<=b[1]?1:0};a.urlB64ToUint8Array=function(a){var b="=".repeat((4-a.length%4)%4);a=(a+b).replace(/\-/g,"+").replace(/_/g,"/");a=window.atob(a);b=new Uint8Array(a.length);for(var d=0;d<a.length;++d)b[d]=a.charCodeAt(d);return b};a.izParseQuery=function(a){var b={};a=("?"===a[0]?a.substr(1):a).split("&");for(var d=0;d<a.length;d++){var f=a[d].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1]||"")}return b};a.checkSubDomain=function(){var b=window.location.href;b=b.substr(b.lastIndexOf("?")+
1);-1!==b.indexOf("action=prompt")?(b=1,a.overridePromptType()):b="action=izrmsubs"==b?2:-1!==b.indexOf("action=izcheckmaster")?3:"action=izcheckperms"==b?4:0;return b};a.isTablet=function(a){if(/android/.test(a)){if(!1===/mobile/.test(a))return!0}else if(!0===/ipad/.test(a))return!0;return!1};a.isMobile=function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4))};a.getDevice=function(){var b=navigator.userAgent;b=b.toLowerCase();return a.isTablet(b)?2:a.isMobile()?3:1};a.getOS=function(){var a=navigator.userAgent.toLowerCase();return/windows phone/i.test(a)?6:/android/i.test(a)?4:/ipad|iphone|ipod/.test(a)&&!window.MSStream?5:/linux/i.test(a)?2:/macintosh|mac os x/i.test(a)?3:/windows|win32/i.test(a)?1:7};a.getBrowser=function(){var b=a.checkBrowser().split("-"),c=b[2];return"Chrome"==b[0]?[1,c]:"Safari"==b[0]?[2,c]:"Firefox"==b[0]?[3,c]:"Opera"==b[0]?[4,c]:"Ucb"==b[0]?[6,c]:"Edge"==b[0]?[7,c]:[5,c]};a.activePrompt=function(){if("http:"===a.locationProtocol||"https:"===a.locationProtocol&&1!=a.isSdkHttps&&1!=a.isSubDomain)try{window.addEventListener("beforeunload",function(b){a.removeStorage("izpt");document.cookie="izpt=1;path=/;"+a.cDomain+"max-age=-30000;"}),a.cookieLess?a.setStorageWithTime("izpt",1):document.cookie="izpt=1;path=/;"+a.cDomain+"max-age=300;"}catch(b){}};a.getSessionId=function(){return"iz-"+
Math.random().toString(36).substr(2,16)+(65536*(1+Math.random())|0).toString(16).substring(1)};a.setSession=function(){return a.getSessionId()};a.setCookieGlobalID=function(){if(1==a.izootoStatus)try{iframe=document.createElement("IFRAME"),iframe.setAttribute("src","https://cdn.izooto.com/scripts/sak/iz_setcid.html"),iframe.style.width="0px",iframe.style.height="0px",iframe.style.border="0px",iframe.setAttribute("visibility","hidden"),iframe.setAttribute("id","izsetcgid"),iframe.style.display="none",null!=document.body?document.body.appendChild(iframe):document.head.appendChild(iframe),setTimeout(function(){try{document.body.removeChild(iframe)}catch(b){a.log("izooto:: unable to set cookieGlobalID "+b)}},2500)}catch(b){a.log("izooto:: unable to set cookieGlobalID "+b)}};a.setEnrPixel=function(){if(1==a.izootoStatus){var b=a.getIzSync("evt");if(!(""!=b&&10080>a.getTimeDiff(b)))try{b="";b=(new Date).getTimezoneOffset();var c="pid="+a.client+"&btype="+a.browser+"&dtype="+a.deviceType+"&tz="+(b+
330)+"&bver="+a.browserVer+"&pte="+a.subType+"&os="+a.os+"&pt="+a.promptType+"&ge="+a.gdprPromptStatus+a.optinParam;iframe=document.createElement("IFRAME");iframe.setAttribute("src",a.setEnrUrl+"?"+c);iframe.style.width="0px";iframe.style.height="0px";iframe.style.border="0px";iframe.setAttribute("visibility","hidden");iframe.style.display="none";iframe.onload=function(){a.setIzSync("evt")};null!=document.body?document.body.appendChild(iframe):document.head.appendChild(iframe)}catch(d){a.log("izooto:: unable to set ENR "+
d)}}};a.getizlocal=function(a,c){var b={},f="";if(""!=a)try{b=JSON.parse(a)}catch(g){}void 0!=b[c]&&(f=b[c]);return f};a.getIndexDBData=function(b,c,d){return new Promise(function(f,g){var e=b.transaction([c]).objectStore(c),h="all"==d?e.getAll():e.get(d);h.onerror=function(a){g("Unable to retrieve data from db!")};h.onsuccess=function(b){b="";h.result?b=h.result:a.log("Not found in db! "+c+"::"+d);f(b)}})};a.tblExtract=function(a,c,d){for(var b in a)if(a[b].hasOwnProperty(c)&&a[b][c]==d)return a[b];return{}};a.getswVersionPromise=function(){return new Promise(function(b,c){a.db.init().then(function(d){a.getIndexDBData(d,"options","swVer").then(function(a){var d=a.val;a.hasOwnProperty("key")?b(d):c(!1)})["catch"](function(b){a.log(b);c(!1)})})["catch"](function(b){a.log(b);c(!1)})})};a.setizlocal=function(b,c,d,f,g){var e=Math.round((new Date).getTime()/1E3),h={};if(""!=f)try{h=JSON.parse(f)}catch(l){}h[c]=void 0!=d&&""!=d?d:e;void 0!=g&&!0===g&&delete h[c];a.isLocalStorage&&localStorage.setItem(b,JSON.stringify(h))};a.setizConfig=function(b,c,d){d=a.getStorage("izConf");a.setizlocal("izConf",b,c,d)};a.getizConfig=function(b){var c=a.getStorage("izConf");return a.getizlocal(c,b)};a.getApihcStorage=function(b,c){var d="",f=a.getizConfig("iz_apihc");return""!=f&&(d=JSON.parse(f),d=void 0!=d[b]?d[b]:0,0!=d&&!1!==c)?(f=d.split("#"),d=f[1],f=f[0],"counter"==c?d:f):d};a.setApihcStorage=function(b,c,d,f){var g=a.getStorage("izConf");var e=a.getizConfig("iz_apihc"),h={};if(""!=g)try{JSON.parse(g)}catch(n){}if(""!=e){try{h=JSON.parse(e)}catch(n){}if(h.hasOwnProperty(b))if(g=a.getApihcStorage(b,!1),""!=g){var l=g.split("#"),m=l[1];g=d!=l[0]?!1:!0}else g=!1;else g=!1;switch(c){case "INCRCount":h[b]=g?l[0]+"#"+(parseInt(m)+1):d+"#1";break;case "resetTime":h[b]=g?d+"#"+m:d+"#"+f;break;case "resetCount":h[b]=g?l[0]+"#"+f:d+"#"+f;break;case "INCRTime":g&&(h[b]=parseInt(l[0])+1+"#"+m),h[b]=d+"#1"}}else h[b]=d+"#1";a.setizConfig("iz_apihc",JSON.stringify(h))};a.getIzSync=function(b){var c=a.getStorage("izSync");return a.getizlocal(c,b)};a.setIzSync=function(b,c,d){var f=a.getStorage("izSync");a.setizlocal("izSync",b,c,f,d)};a.getTimeDiff=function(a){a-=(new Date).getTime()/1E3;return Math.abs(Math.round(a/60))};a.setCookie=function(b,c){var d=new Date;d.setTime(d.getTime()+1296E8);d="expires="+d.toUTCString();document.cookie=b+"="+c+";path=/;"+a.cDomain+d};a.removeStorage=function(b){"iztoken"==b&&(b=a.tokenCookie);document.cookie=b+"=1;path=/;expires=Thu, 2 Aug 1991 20:47:11 UTC;";""!=a.cDomain&&(document.cookie=b+"=1;path=/;"+
a.cDomain+"expires=Thu, 2 Aug 1991 20:47:11 UTC;");localStorage.removeItem(b)};a.getCookie=function(a){try{a+="=";for(var b=document.cookie.split(";"),d=0;d<b.length;d++){for(var f=b[d];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return""}catch(g){}};a.setStorageWithTime=function(b,c,d){"undefined"==d&&(d=60*a.repeatPromptDelay);d={izstatus:a.tokenExpire,izpt:300,izDl:d};if(void 0!=d[b]){var f=new Date;d=f.setTime(f.getTime()+1E3*d[b]);c={v:c,t:d};c=encodeURIComponent(JSON.stringify(c));localStorage.setItem(b,c)}else localStorage.setItem(b,c)};a.getStorageWithTime=function(b,c,d){if(void 0==d.t||""==d.t||isNaN(d.t))return c;c=new Date;c.setTime(c.getTime());if(0<(d.t-c)/1E3)return void 0!=d.v?d.v:"";a.removeStorage(b);return""};a.setStorage=function(b,c){"iztoken"==b&&(b=a.tokenCookie);c=encodeURIComponent(c);a.cookieLess?b!=a.tokenCookie?a.setStorageWithTime(b,c):a.isLocalStorage&&localStorage.setItem(b,c):(a.isLocalStorage&&localStorage.setItem(b,c),a.setCookie(b,c))};a.getStorage=function(b){if("iztoken"==b)return b=a.tokenCookie,null===localStorage.getItem(b)?a.getCookie(b):decodeURIComponent(localStorage.getItem(b))||a.getCookie(b)?decodeURIComponent(localStorage.getItem(b))||a.getCookie(b):"";var c="";try{c=localStorage.getItem(b),c=null===c?"":decodeURIComponent(c)}catch(g){c=""}if(""==c)return a.getCookie(b);try{var d=JSON.parse(c),f=a.getStorageWithTime(b,c,d);return""!=f?f:a.getCookie(b)}catch(g){}return c};a.loadDesign=function(a,c){if("object"!==typeof a)return"";for(var b in a)a.hasOwnProperty(b)&&(c=c.replace(new RegExp("{{--"+b+"--}}","g"),a[b]));return c};a.overridePromptType=function(){var b=window.location.href.substr(window.location.href.lastIndexOf("?")+1),c=b.indexOf("izpt=");-1!==c&&(b=b.substr(c+5,1),"0"===b||"1"===b||"2"===b)&&(a.promptType=Number.parseInt(b))};a.detectAutoPrompt=function(){var b=!0;if("[object Array]"===Object.prototype.toString.call(window._izq)){for(var c=0;c<window._izq.length;c++){var d=window._izq[c];if("[object Array]"===Object.prototype.toString.call(d))for(var f=0;f<d.length;f++){var g=d[f];"[object Object]"===Object.prototype.toString.call(g)&&g.hasOwnProperty("auto_prompt")&&(b=g.auto_prompt)}}a.autoPrompt=!1===b?!1:!0;a.autoPrompt||(a.promptType=2,a.dialogDesign="",a.processQueue())}};a.client=void 0!==e.client?e.client:a.throwError("iZooto:: Configuration parameter not found (client)");a.sourceOrigin=void 0!==e.sourceOrigin?e.sourceOrigin:a.throwError("iZooto:: Configuration parameter not found (sourceOrigin)");a.domainRoot=void 0!==e.domainRoot?e.domainRoot:a.throwError("iZooto:: Configuration parameter not found (domainRoot)");a.isSdkHttps=void 0!==e.isSdkHttps?e.isSdkHttps:a.throwError("iZooto:: Configuration parameter not found (isSdkHttps)");a.manifestName=void 0!==e.manifestName?e.manifestName:a.throwError("iZooto:: Configuration parameter not found (manifestName)");a.serviceWorkerName=void 0!==e.serviceWorkerName?e.serviceWorkerName:a.throwError("iZooto:: Configuration parameter not found (serviceWorkerName)");a.swScope=void 0!==e.swScope?e.swScope:"";a.webPushId=void 0!==e.webPushId?e.webPushId:"";a.webServiceUrl=void 0!==e.webServiceUrl?e.webServiceUrl:"";a.mobileAllowed=void 0!==e.mobileAllowed?e.mobileAllowed:1;a.desktopAllowed=void 0!==e.desktopAllowed?e.desktopAllowed:1;a.preDomainCheck=void 0!==e.preDomainCheck?e.preDomainCheck:0;a.setEnr=void 0!==e.setEnr?e.setEnr:1;a.izootoStatus=void 0!==e.izootoStatus?e.izootoStatus:1;a.httpsNoRoot=void 0!==e.httpsNoRoot?e.httpsNoRoot:0;a.isShopify=void 0!==e.isShopify?e.isShopify:0;a.cookieLess=void 0!==e.cookieLess?e.cookieLess:1;0!=a.isShopify&&(a.cookieLess=0);a.gaId=void 0!==e.gaId?e.gaId:"";a.gaIdFlag=void 0!==e.gaId?1:0;a.sourceOriginAlt=void 0!==e.sourceOriginAlt?e.sourceOriginAlt:"";a.fullPopUp=void 0!==e.fullPopUp?e.fullPopUp:0;a.sysEvents=void 0!==e.sysEvents?e.sysEvents:1;a.sysEventsFlag=void 0!==e.sysEvents?1:0;a.masterDomain=void 0!==e.masterDomain?e.masterDomain:"";a.masterDomainPath=void 0!==e.masterDomainPath?e.masterDomainPath:"";a.isSubDomain=a.checkSubDomain();a.isReSubscribe=0;a.isMsgReciever=0;a.locationPrompt=void 0!==e.locationPrompt?e.locationPrompt:0;a.debug=void 0!==e.debug?e.debug:0;a.locationProtocol=document.location.protocol;a.setEnrUrl=a.locationProtocol+"//evt.izooto.com/index.php";a.sendEnrUrl=a.locationProtocol+"//evt.izooto.com/api.php";a.ssUrl=a.locationProtocol+"//ss.izooto.com/ss.php";a.shopifyApi="https://events.izooto.com/shopifywh1.php";a.promptDelay=void 0!==e.promptDelay?e.promptDelay:0;a.optInCloseDelay=void 0!==e.optInCloseDelay?e.optInCloseDelay:60;a.repeatPromptDelay=void 0!==e.repeatPromptDelay?e.repeatPromptDelay:0;a.tokenExpire=void 0!==e.tokenExpire?e.tokenExpire:86400;a.allowedDomain=void 0!==e.allowedDomain?e.allowedDomain:"";a.allowedKeys=["bookingurl","landingurl"];a.cDomain=void 0!==e.cDomain?e.cDomain:"";a.tokenFilter=void 0!==e.tokenFilter?e.tokenFilter:0;a.izTags=void 0!==e.tagsEnabled?e.tagsEnabled:0;a.izTagLink=a.locationProtocol+"//events.izooto.com/tags.php";a.supURL=a.locationProtocol+
"//evt.izooto.com/sup.php";a.eventsURL="https://events.izooto.com/ev.php?p=p";a.persURL="https://pers.izooto.com/pp?p=p";a.sysEventUrl="https://ev.izooto.com/sp.php?p=p";a.hidePopup=void 0!==e.hidePopup?e.hidePopup:!0;a.bkey=0;a.bkeySent=0;a.pluginStatus=0;a.autoPrompt=!0;a.calledManually=!1;a.deviceType=a.getDevice();a.browserArr=a.getBrowser();a.browser=a.browserArr[0];a.browserVer=a.browserArr[1];a.os=a.getOS();a.isLocalStorage="localStorage"in window&&null!==window.localStorage;a.serviceWorker=a.domainRoot+a.serviceWorkerName;a.manifest=a.domainRoot+a.manifestName;a.isSafari=a.checkIfSafari();a.isChrome=a.checkIfChrome();a.isFirefox=a.checkIfFirefox();a.isUcb=a.checkIfUcb();a.isOpera=a.checkIfOpera();a.isEdge=a.checkIfEdge();a.fcmEnable=void 0!==e.fcmEnable?e.fcmEnable:0;a.vapid=void 0!==e.vapidPublicKey&&""!==e.vapidPublicKey?e.vapidPublicKey:"BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";a.subType=0;a.isAddFcm=a.checkForFcm();a.sentShopifyProduct=0;if(a.fcmEnable||1==a.isAddFcm)a.subType=1;void 0!==e.vapidPublicKey&&""!==e.vapidPublicKey&&(a.fcmEnable=0,a.subType=2);a.isSafari&&(a.subType=3);a.sak="https://cdn.izooto.com/scripts/sak/";a.swversion="";a.optObj={userVisibleOnly:!0,applicationServerKey:a.urlB64ToUint8Array(a.vapid)};a.gcmToVapidMigrate=void 0!==e.gcmToVapidMigrate?e.gcmToVapidMigrate:1;a.tokenGen=void 0!==e.tokenGen?e.tokenGen:0;1==a.isAddFcm&&(1==a.subType||a.isUcb?a.fcmEnable=1:(a.fcmEnable=0,a.tokenGen=0));a.optObj=a.fcmEnable||2==a.subType?{userVisibleOnly:!0,applicationServerKey:a.urlB64ToUint8Array(a.vapid)}:{userVisibleOnly:!0};a.unid=a.setSession();a.httpContentLoaded=0;a.incognitoChecked=0;a.syncNotificationView=void 0!==e.syncNotificationView?e.syncNotificationView:"";a.syncNotificationClick=void 0!==e.syncNotificationClick?e.syncNotificationClick:"";a.iconWhite=void 0!=e.poweredByIcon&&0===e.poweredByIcon?"":'<img class="izbranding" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIoAAAAPCAMAAAAMJKc9AAAAjVBMVEUAAACKiIiKiIiKiIiKiIiKiIiSjoKKiIiKiIiKiIiKiIj//vWKiIiKiIiKiIj///////////////////+KiIj///////////////////////////r////////////////////////////////////////////41h342CX30QP42Sz///+KiIj42i730gTHrF7KAAAAK3RSTlMAd+4i3WYQzJkzVQW7qkSSZ1wQpYh8HIZx7jwt+dHFrE/gup5DNyQ+2Y1xoV/zZQAAAkdJREFUSMfdk+tymzAQhY9k7hhs7hhsE+NL2u6m7/943cVpTeN2phmnM51+PwRIMPo4u8L/S/OER1iwkuCPCJYQDAv+AncQrR9TWQChdd+j4gCe/wv7LdFYP6iCpdF/9cOQPfgWsFHqsE3hWsuhmTLwlmz9VxUdfI9DkZuM2IVCwjbDlUuR5U8T5/eopNZ1OUXgeDbymBdiZAO4vHA5QsqurKB0FqGdpRIhKdUZN84bEsYcSkW7jq7gLf0q/22vlEgSwOMoKUPrRCaJJB44xmWg9PWt0DFAcusVNogcRNbDjHwgYXOCEDc9snXWbqlSy9NlmuxOWsEdrWKg7rr4LhVhGUxBG9/4SemLgzKpBKxoNjC3AgXiasMkwM+sSdEd+n0DoaA9UB9k8vgaW4WVjAVaLefpXuV7Kh4vS+NwGFkoUyoJFN/M2xapfFcGNnpjsidhryotbQA0dIgRb6hoD1TFRKt2Q1m/o6HviNqK6HSvMvWKxO1zFLID7ZWUI1XRPAx7Zt4rYiVDyBZz6j0pzWs+O0D2OwNPenumQ0UDcBLFI2UYaa2ZHe9VricIKDkElyLgaDuoiq7YFLidIBb0XYgvZidoS8Ku936oxFvKptsCyOkwUCu+tMUg0zvqgUpWPoRUkpyjxW/w/PVTPO2/x0j7vL7kF6IuX9HY0abPjzRKKitUuiZVw0cQsMEblSIHPr+8XFXGNV1BS0qNgoRNjJ4ow4GEIcZfoc0geF+eIdRNd1lNVEB2HJqL+sk1hzw3NeKqKFr8e3wDHdZCDjBsROUAAAAASUVORK5CYII=" style="vertical-align: middle !important; padding-right: 3px !important;">';a.iconBlue='<img class="izbranding" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIoAAAAPCAMAAAAMJKc9AAAAb1BMVEUAAACKiIiKiIiKiIgNUqANUqAMUaELUKGKiIiKiIiKiIiKiIiKiIgLUKKKiIgNUqAMUaEMUaCKiIiKiIiKiIgNUqCKiIgNUqANUqAMUqAMUKKKiIgNUqAMUqANUqD32yn/9xD67Bv63yUMUqCKiIg7jdR8AAAAI3RSTlMAd+4iyeGrat1mzJkzIBGML/RVu6qZREMKFLmIX1B8+HVcPEBtRIgAAAJSSURBVEjH3ZTpbtswEISHtO6Lkqz7sJNw3/8Zu0sathK3QAP3R5EBJHKxOj6NhsSPVRBNeEUnEnX4K+VnOStiZaenrrXh+Kim+vso/MxCp99BSYAqe6a3LHMnCe02Bk7LjmdNf0DBWcm3ZkVBFTIN6HZISA9ItaZCOQ+qM+nsjgKVVVQwnCMi9yWhsAQ3M2ZrL8Z6RXjS3IS/Rxl0mtKAPKl0WxGdmEjnSOmUUouBUu5gTU6FPrjSoluF+fD4yIpiX409pm3b9tA2JZuwxyNE5bYJ7Gat1PPuqmNWVnQdUFHbrYVOWtW1bA8SlRKwZnJVkSige2SFFNoEra5wUOyM8ek1y+iIGnnnKI2AkYx3KZahR9zwsEwHV0Tn3BmtMpV1a8YMIoeSu6l4A/X4QTmz6qLL8Unj3ZeS38FDzfFxRRjxIWYEC/+6OuDJXvtq+YJyc6Wi86oSKloNkXPFBzRTx9hi4PvWXLc4Kg6EpKk9SuTyE/C5t+EkmFtgF+eMRGlyTTHoC4rLiubQUltQAsnKQK2giB+KKvUpK5IeFKRxUL1Y0VLijhLZRuwPbO+xQru71iwHGuffE4pfQewBFaCVARIixYC+owfgsYKI/LVgXjxWUHNMbekj0cxSLDaQRWNNYI3zYaoFoBHakWeva6DhUDmUqMTb2w3F1ByPizGmrLkhkcaFcxI3DFbfwmu4CvGyclJfd1u2//16fff7Stzf95WLG7nrwhTObhMqEd2i9c8V9ZKLj+v1Q6rxgrp3MjVXJrq4DG19FDvXjAw7VzP+L/0Cmos+Ujvzdw8AAAAASUVORK5CYII=">';a.locale="undefined"!==e.locale&&""!==e.locale?e.locale:"en";a.closeMsg=void 0!==e.closeMsg&&""!==e.closeMsg?e.closeMsg:"CLOSE";a.subscribedMsg=void 0!==e.subscribedMsg&&""!==e.subscribedMsg?e.subscribedMsg:"Subscribed";a.alreadySubscribedMsg=void 0!==e.alreadySubscribedMsg&&""!==e.alreadySubscribedMsg?e.alreadySubscribedMsg:"You've already subscribed to notifications.";a.clickOnAllowMsg=void 0!==e.clickOnAllowMsg&&""!==e.clickOnAllowMsg?e.clickOnAllowMsg:"Click On allow to subscribe to notifications";a.blockedMsg=void 0!==e.blockedMsg&&""!==e.blockedMsg?e.blockedMsg:"Blocked";a.alreadyDeniedMsg=void 0!==e.alreadyDeniedMsg&&""!==e.alreadyDeniedMsg?e.alreadyDeniedMsg:"You've blocked notifications from this site.";a.thanksForSubscribingMsg=void 0!==e.thanksForSubscribingMsg&&""!==e.thanksForSubscribingMsg?e.thanksForSubscribingMsg:"Thank you for subscribing to push notifications!";a.siteUrl=void 0!==e.siteUrl?e.siteUrl:"";a.promptType=void 0!==e.promptFlow?e.promptFlow:0;a.promptDesign=void 0!==e.promptDesign?e.promptDesign:{};a.optInDesign=void 0!==e.optInDesign&&""!=e.optInDesign?e.optInDesign:"";a.optInDesignType=void 0!==e.optInDesignType?e.optInDesignType:"";1!=a.deviceType&&(a.promptDesign=void 0!==e.mobPromptDesign?e.mobPromptDesign:a.promptDesign,a.promptType=void 0!==e.mobPromptFlow?e.mobPromptFlow:a.promptType,a.optInDesignType=void 0!==e.mobOptInDesignType?e.mobOptInDesignType:a.optInDesignType,a.promptDelay=void 0!==e.mobPromptDelay?e.mobPromptDelay:a.promptDelay,a.repeatPromptDelay=void 0!==e.mobRepeatPromptDelay?e.mobRepeatPromptDelay:a.repeatPromptDelay,a.optInCloseDelay=void 0!==e.mobOptInCloseDelay?e.mobOptInCloseDelay:a.optInCloseDelay);a.newOptIn=void 0!==e.mobPromptDesign||void 0!==e.mobPromptFlow?1:0;a.optinParam=""!=a.optInDesignType?"&optin="+a.optInDesignType:"";a.promptDesign.poweredbysrc="https://www.izooto.com/getting-started-with-izooto?utm_source=referral&utm_medium=PoweredBy&utm_campaign="+encodeURIComponent(a.siteUrl);a.defaultDialogDesign='<style>.iz_container{text-align: center; display:table-cell; vertical-align:middle;}.iz_overlay{text-shadow: 0px 0px !important;position:fixed;top:0px;left:0px;width:100%;height:100%;background:rgba(0, 0, 0, 0.32); z-index: 9999999;}.iz_content{font-family:arial;position:absolute;top:50%;left:50%;width:25%;transform:translate(-50%,-50%);background:#fff;border-radius:10px 10px 0px 0px;border-radius:10px;text-align: center; display:inline-block;}.iz_btn{margin-left:auto!important; margin-right:auto!important; text-align: center;margin-top: 3%!important; background: #6FCBCF; color: #fff; margin-bottom: 4%!important; padding: 10px!important; border-radius: 4px; width: 140px; border: none; font-size: 13px; letter-spacing: 1px; box-shadow: 0 2px 5px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12); transition: all .3s ease-out; cursor: pointer;}.iz_btn:hover{box-shadow:0 5px 11px 0 rgba(0,0,0,0.18),0 4px 15px 0 rgba(0,0,0,0.15);cursor:pointer;}.iz_head_txt{color:white!important;line-height: 24px; font-size: 18px;}.iz_top{padding-bottom: 10px!important;border-radius:10px 10px 0px 0px;background: #5D5D5D; color: #fff; padding: 30px!important;}.iz_txt{margin-top: 15px; font-size: 14px; color: #FF9595;}@media only screen and (max-width: 600px) and (min-height: 300px){.iz_content{background: #fff none repeat scroll 0 0; border-radius: 10px; display: inline-block; left: 50%; position: absolute; text-align: center; top: 50%; transform: translate(-50%, -50%); width: 90%!important;}.iz_head_txt{color:white!important;line-height: 24px;font-size: 120%;}.iz_txt{color: #ff9595; font-size: 100%; margin-top: 15px;}}@media only screen and (max-width: 800px){.iz_content{background: #fff none repeat scroll 0 0; border-radius: 10px; display: inline-block; left: 50%; position: absolute; text-align: center; top: 50%; transform: translate(-EUNITNO50%, -50%); width: 65%;}.iz_head_txt{color:white!important;line-height: 24px; font-size: 120%;}.iz_txt{color: #ff9595; font-size: 100%; margin-top: 15px;}}</style><div class="iz_overlay"> <div class="iz_container"> <div class="iz_content"> <center> <div class="iz_top"> <div class="iz_head_txt">'+
a.thanksForSubscribingMsg+'</div><div style="text-align: right !important;position: absolute !important;    right: 0px !important;margin-top: 5px !important;"><a href="'+a.promptDesign.poweredbysrc+'" target="_blank" style="cursor: pointer !important;">'+a.iconWhite+'</a></div></div><div class="iz_btn" onclick="_izooto.openPopup();">'+a.closeMsg+"</div> </center> </div></div></div>";a.dialogDesign=void 0!==e.dialogDesign&&""!=e.dialogDesign?e.dialogDesign:a.defaultDialogDesign;a.branding=void 0!==e.branding?e.branding:1;a.httpsBranding="<style type='text/css'>.iz-https-branding{position:fixed!important;z-index:2147483646;padding:1px 14px;background:#000;text-align:center;color:#fff;font-family:Arial;font-size:12px;font-weight:400;opacity: .65;top:0!important;right:0!important;border-radius:2px}.iz-https-branding img{padding-left:2px;display:inline-block;vertical-align:middle;max-width:60px!important}.iz-branding-content span{vertical-align:middle;color:#fff}.iz-https-branding:hover{visibility:visible}@media only screen and (max-width: 600px){.iz-https-branding{top:auto !important;right:0px !important;left:0px !important;bottom:28%;width:auto !important}}@media only screen and (max-width: 400px){.iz-https-branding{bottom:33%}}</style><div class='iz-https-branding'><div class='iz-branding-content'><a href='"+
a.promptDesign.poweredbysrc+"' target='_blank' style='text-decoration: none;'><span>Notifications Powered By </span><img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAYCAMAAACRH25gAAAATlBMVEUAAAD///////////////////7////////////////////////////////////////////////////////31Bn42Sv42Sz////42Sr20ABMp0RkAAAAF3RSTlMAkxoQhUGtTjMkZ+rgoW7NuVz0eVknb7zWT80AAAEOSURBVDjL7ZHbbsQgDEQBQwjhEpLddrb//6O1jRKlah+q7VPVjhSN7HBsbMwf1W35AQy05+ECrPOzcAYuzaulOaroO/BchC5JAwcEDH1exWK/wOvlsF9MWLa4IhOXCkGTKehcO+IRXDSaaa53ktsAjgsB2MPpme1mLIB8wbcOyTi5ttZIwMZviL0xRxEQd7HApobcmD9QN0E0aTDgjCqblAoTbAd3t/BmBRlIsJ7w2FcwB5wY6GPEJFee9OiGOmBJ1g8wr/Ht8TJgGThQcqZjIlcQPXsq2BiWz1LCCQOdp70/FCZgwVA0eYxDu7osQVqL6vl6Te31ruab81Y1G+enKj+JXR/y5nmZGvzrV+kdgQgTu1UUeUkAAAAASUVORK5CYII=' width='60'></a></div></div>";a.overlay=void 0!==e.overlay?e.overlay:0;a.overlayMessage=void 0!==e.overlayMessage?e.overlayMessage:"Click on 'allow' to subscribe to notifications";a.httpsOverlay="<style>.iz-branding {color:white;font-size: 25px;position:absolute;top:40%; left:28%; z-index: 999999!important; width: 50%!important;}.iz-arrow img{transform: rotate(180deg);}@media screen and (max-width:600px){#izooto_desktop_overlay {display:none; .iz-arrow {width: 100%;position: fixed;top: auto;bottom:35%;left: 65%;border-radius: 0px;}.moz-transfer{width: 100%;position: fixed;top: auto;bottom: 30%;left: 65% !important; border-radius: 0px; }.moz-transfer img{transform: rotate(180deg) !important;}.iz-arrow img {transform: rotate(0deg);}.iz-branding {color:white;font-size: larger;position:fixed;top:40%;left:17%;width:100%}}</style><div id='izooto_desktop_overlay' onclick='_izooto.closeHttpsBranding();' style='z-index: 999999999;position: fixed;height: 100%;top: 0px;left: 0px;width: 100%;background: rgba(0, 0, 0, 0.89);'><div class='izoverlay-container'><div class='iz-branding'><div class='iz-text' style='padding-bottom:5px; font-family:Lato; display: -webkit-box; -webkit-line-clamp: 2; text-overflow: ellipsis; overflow: hidden; word-wrap: break-word; -webkit-box-orient: vertical;'>"+
a.overlayMessage+"</div><div class='iz-powered-text'><a href='"+a.promptDesign.poweredbysrc+"' target='_blank' style='cursor: pointer !important;'>"+a.iconBlue+"</a></div></div></div>";a.isChrome&&(61<parseInt(a.browserVer)||60<parseInt(a.browserVer)&&1!=a.deviceType)&&(0==a.isSdkHttps&&0==a.promptType||a.isSdkHttps&&"http:"==a.locationProtocol||a.isSubDomain)&&(a.promptType=1);a.promptDesign.message=void 0!==a.promptDesign.message?a.promptDesign.message:"Click on allow to subscribe to notifications";a.promptDesign.subMessage=void 0!==a.promptDesign.subMessage?a.promptDesign.subMessage:"Stay updated with the latest happenings on our site";a.promptDesign.icon=void 0!==a.promptDesign.icon?a.promptDesign.icon:"//cdnimg.izooto.com/default/6.png";a.promptDesign.btn1Txt=void 0!==a.promptDesign.btn1Txt?a.promptDesign.btn1Txt:"Later";a.promptDesign.btn2Txt=void 0!==a.promptDesign.btn2Txt?a.promptDesign.btn2Txt:"Allow";a.promptDesign.position=void 0!==a.promptDesign.position?a.promptDesign.position:"right";a.promptDesign.bgColor=void 0!==a.promptDesign.bgColor?a.promptDesign.bgColor:"#1a71db";a.promptMessage=a.promptDesign.message;a.promptSubMessage=a.promptDesign.subMessage;a.promptIcon=a.promptDesign.icon;a.promptBtn1Txt=a.promptDesign.btn1Txt;a.promptBtn2Txt=a.promptDesign.btn2Txt;a.optInSrc="https://cdn.izooto.com/optin/";a.gdprPrompt=void 0!==e.gdprPrompt?e.gdprPrompt:{};a.gdprPromptStatus=void 0!==a.gdprPrompt.status?a.gdprPrompt.status:0;a.tokenCookie=void 0!==e.tokenCookie&&""!==e.tokenCookie?e.tokenCookie:"iztoken";a.isWelcomeNotification=void 0!==e.welcomeNotification.status?e.welcomeNotification.status:0;a.welcomeTitle=void 0!==e.welcomeNotification.title?e.welcomeNotification.title:"";a.welcomeBody=void 0!==e.welcomeNotification.body?e.welcomeNotification.body:"";a.welcomeIcon=void 0!==e.welcomeNotification.icon?e.welcomeNotification.icon:"";a.welcomeUrl=void 0!==e.welcomeNotification.url?e.welcomeNotification.url:"";a.welcomeShowAfter=void 0!==e.welcomeNotification.showAfter?e.welcomeNotification.showAfter:0;a.welcomeTimeout=void 0!==e.welcomeNotification.clickTimeout?e.welcomeNotification.clickTimeout:0;a.gdprPixel="https://cdn.izooto.com/scripts/sdk/izooto.gdpr.fcm.min.js";a.forceReSubscribe=void 0!==e.forceReSubscribe?e.forceReSubscribe:0;a.reSubFlag=0;a.enableEnricher=0;a.enricherSrc="";a.currentToken="";a.oldGCMBkey="";a.maxPropChar=64;a.softPmtTrk=void 0!==e.softPmtTrk?e.softPmtTrk:0;a.evtTracking=void 0!==e.evtTracking?e.evtTracking:1;a.propsTracking=void 0!==e.propsTracking?e.propsTracking:1;a.evtPerDay=void 0!==e.evtPerDay?e.evtPerDay:1E4;a.propsPerDay=void 0!==e.propsPerDay?e.propsPerDay:1E4;a.evtPerMonth=void 0!==e.evtPerMonth?e.evtPerMonth:1E4;a.propsPerMonth=void 0!==e.propsPerMonth?e.propsPerMonth:1E4;a.processPriority=void 0!==e.processPriority?e.processPriority:0;a.epConfEnabled=void 0!==e.epConfEnabled?e.epConfEnabled:0;a.trkPmtDisplay=void 0!==e.trkPmtDisplay?e.trkPmtDisplay:0;a.trkPmtUAction=void 0!==e.trkPmtUAction?e.trkPmtUAction:0;a.nativePmtTrk=void 0!==e.nativePmtTrk?e.nativePmtTrk:0;a.gcmToVapid=0;a.utmKeys=["utm_content","utm_medium","utm_source","utm_campaign","utm_term"];a.shortutmKeys=["uco","ume","uso","uca","ute"];a.fcmTokenGenURL="https://iid.googleapis.com/v1/web/iid";a.forceTokenSync=void 0!==e.tokenSync?e.tokenSync:0;a.restrictedProp=0==a.softPmtTrk?"divShow divClosed divAllowed prompted msgclose already_denied".split(" "):["already_denied"];0!=a.promptType&&(0==a.softPmtTrk?a.restrictedProp=["divShow","divClosed","divAllowed","msgclose","already_denied"]:(a.restrictedProp=[],a.trkPmtDisplay||a.restrictedProp.push("divShow"),a.trkPmtUAction||a.restrictedProp.push("divClosed","divAllowed")));a.nativePmtTrk?(a.trkPmtDisplay||a.restrictedProp.push("prompted"),a.trkPmtUAction||a.restrictedProp.push("denied","promptclose")):a.restrictedProp.push("prompted","promptclose");a.epConf={allowed:"enp#enp",already_granted:"enp#enp",promptclose:"sbp#ncls",divAllowed:"sbp#salw",denied:"sbp#nblk",already_denied:"sbp#nblk",divClosed:"sbp#sblk",popclose:"sbp#swc",SoftUnsubscribe:"usub#sunsub",SoftSubscribe:"usub#sunsub",prompted:"sbpd#npd",divShow:"sbpd#spd",browser:"na#nsp",NotImplemented:"ni#nimp",SegmentEvents:"et#evt",SegmentProperties:"prp#prp",TriggerEvent:"trg#trg",PersonalProperties:"pp#pprp",CustomerIDSynch:"pp#idsyn",CustomerIDLogout:"pp#clout",last_visit:"lvi#lvi",Visitor:"viz#viz",ShopifyMapper:"oth#spm",GDPRConsent:"prv#gdp",FCMMigration:"enu#enu"};a.getEndPointURL=function(a){if(0<a.indexOf("#"))return a=a.split("#"),"https://"+a[0]+".izooto.com/"+a[1];a.split("#");return"https://"+
a+".izooto.com/"};a.parseEpConf=function(b){var c="";try{if(a.epConf.hasOwnProperty(b))switch(b){case "allowed":c=a.getEndPointURL(a.epConf.allowed);break;case "divAllowed":c=a.getEndPointURL(a.epConf.divAllowed);break;case "denied":c=a.getEndPointURL(a.epConf.denied);break;case "promptclose":c=a.getEndPointURL(a.epConf.promptclose);break;case "divClosed":c=a.getEndPointURL(a.epConf.divClosed);break;case "popclose":c=a.getEndPointURL(a.epConf.popclose);break;case "prompted":c=a.getEndPointURL(a.epConf.prompted);break;case "divShow":c=a.getEndPointURL(a.epConf.divShow);break;case "browser":c=a.getEndPointURL(a.epConf.browser);break;case "SegmentEvents":c=a.getEndPointURL(a.epConf.SegmentEvents);break;case "SegmentProperties":c=a.getEndPointURL(a.epConf.SegmentProperties);break;case "TriggerEvent":c=a.getEndPointURL(a.epConf.TriggerEvent);break;case "PersonalProperties":c=a.getEndPointURL(a.epConf.PersonalProperties);break;case "CustomerIDSynch":c=a.getEndPointURL(a.epConf.CustomerIDSynch);break;case "CustomerIDLogout":c=a.getEndPointURL(a.epConf.CustomerIDLogout);break;case "last_visit":c=a.getEndPointURL(a.epConf.last_visit);break;case "Visitor":c=a.getEndPointURL(a.epConf.Visitor);break;case "ShopifyMapper":c=a.getEndPointURL(a.epConf.ShopifyMapper);break;case "GDPRConsent":c=a.getEndPointURL(a.epConf.GDPRConsent);break;case "SoftSubscribe":c=a.getEndPointURL(a.epConf.SoftSubscribe);break;case "SoftUnsubscribe":c=a.getEndPointURL(a.epConf.SoftUnsubscribe);break;case "already_granted":c=a.getEndPointURL(a.epConf.already_granted);break;case "already_denied":c=a.getEndPointURL(a.epConf.already_denied);break;case "FCMMigration":c=a.getEndPointURL(a.epConf.FCMMigration);break;case "bKey":c=a.getEndPointURL(a.epConf.allowed);break;default:c="https://err.izooto.com/err"}else c="https://err.izooto.com/err"}catch(d){c="https://err.izooto.com/err"}return c};a.getQuerySting=function(a){try{var b=[],d;for(d in a)a.hasOwnProperty(d)&&b.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d]));return b.join("&")}catch(f){}};a.getUTMParamsOfUrl=function(b){try{void 0===b&&(b=window.location.href);var c=b.indexOf("?");if(0<c){var d=b.substring(c+1),f=a.izParseQuery(d),g={};return 2<a.utmKeys.map(function(b,c){var d=f.hasOwnProperty(b);!d||""==b&&void 0==b||(g[a.shortutmKeys[c]]=f[b]);return d}).reduce(function(a,b,c){return b?a+1:a})?a.getQuerySting(g):!1}return!1}catch(k){return!1}};try{void 0!==e.services&&e.services.hasOwnProperty("enricher")&&(a.enableEnricher=void 0!==e.services.enricher.status?e.services.enricher.status:0,a.enricherSrc=void 0!==e.services.enricher.src?e.services.enricher.src:"")}catch(b){}""!=a.cDomain&&(!0===document.location.hostname.endsWith(a.cDomain)?a.cDomain="domain="+a.cDomain+";":a.cDomain="");try{if(void 0!=window._izootoModule||1==window.is_wp||1==is_wp)if(a.pluginStatus=void 0!==e.pluginStatus?e.pluginStatus:1,1==a.pluginStatus){a.cookieLess=0;var r=JSON.stringify({dtype:a.deviceType,btype:a.browser});a.setStorage("bddata",r);if(void 0!=window._izootoModule&&1==window._izootoModule.isMagento){a.cookieLess=0;var q=window._izootoModule;void 0!=q.isSdkHttps&&1==q.isSdkHttps&&(a.serviceWorker="/izooto/assets/sw",a.manifest="/izooto/assets/manifest",a.swScope="/",a.setStorage("evtrk",a.evtTracking))}else if(void 0==window._izootoModule||1!=window._izootoModule.isPrestashop)if(void 0==window._izootoModule||1!=window._izootoModule.isOpencart)a.setStorage("evtrk",a.evtTracking),a.serviceWorker=a.domainRoot+"/?izooto=sw",a.manifest=a.domainRoot+"/?izooto=manifest"}}catch(b){}a.startENR=function(){"https:"!=a.locationProtocol||1!=a.isChrome&&1!=a.isFirefox||1!=a.isSubDomain?1==a.setEnr&&(a.setEnrPixel(),a.log("izooto:: enr called")):a.log("izooto:: No Enr")};a.injectPixel=function(b){var c=a.getStorage("izgdpr");2==c||1==a.gdprPromptStatus&&1!=c&&3!=c||"string"!==typeof b||""===b||(c=document.createElement("img"),c.style.height="0px",c.style.width="0px",c.src=b,a.log("Pixel injected : "+b))};a.loadEnricher=function(){if(1==a.enableEnricher&&""!=a.enricherSrc&&!a.isSubDomain)try{var b=document.body?document.body:document.head,c=document.createElement("script");c.id="enricher";c.src=a.enricherSrc;b.appendChild(c)}catch(d){}};a.getBaseTagLink=function(b,c){a.izTagLink=a.parseEpConf("CustomerIDSynch");var d=!1;try{var f=JSON.parse(a.getStorage("iztoken"));d=!0}catch(k){}var g="";!0===d&&void 0!==f.keys&&(void 0!==f.keys.auth&&(g+="&auth="+f.keys.auth),void 0!==f.keys.p256dh&&(g+="&pk="+f.keys.p256dh));d="?pid="+a.client+"&bKey="+b+"&btype="+a.browser+"&dtype="+a.deviceType+"&bver="+a.browserVer+"&pte="+a.subType+
"&os="+a.os+"&pt="+a.promptType+"&ge="+a.gdprPromptStatus+a.optinParam+g;return void 0!=c?c+d:a.izTagLink+d};a.addTag=function(b,c){a.tagsDeprecation()};a.removeTag=function(b,c){a.tagsDeprecation()};a.addProperty=function(b,c,d){d+="&name="+b+"&value="+c+"&operation=add_property";a.isSafari||(d+="&"+a.endPointParamExtract(a.getStorage("iztoken")));b=a.parseEpConf("CustomerIDSynch");c=d.indexOf("?");d=d.substring(c+1);a.httpRequest(b,"",{},{method:"post",data:d})};a.isJsonString=function(a){try{JSON.parse(a)}catch(c){return!1}return!0};a.filterUserProp=function(b,c){try{var d={},f=0;Object.keys(b).map(function(g){var e=g;g=g.substring(0,32);if(63>=f&&""!=g.trim()&&32>=g.length)if(newKey=g.toLowerCase(),newKey=newKey.trim(),g=b[e],"string"===typeof g&&""!=g&&"add"==c){g=g.trim();objValTrimmed=g.substring(0,a.maxPropChar);var h=/^(https?):\/\//;""!=g&&(g.length<=a.maxPropChar||h.test(g))?d[newKey]=g:d[newKey]=objValTrimmed;f++}else if("object"===typeof g){if(g instanceof Array&&1<=g.length){e=[];var l=0;for(h in g){var m=g[h];m=m.substring(0,a.maxPropChar);"number"==typeof m&&null!=m&&63>=l&&m.toString().length<=a.maxPropChar?(e.push(m),l++):"string"==typeof m&&""!=m.trim()&&63>=l&&m.trim().length<=a.maxPropChar&&(m=m.trim(),e.push(m),l++)}1<=e.length&&(d[newKey]=e,f++)}}else"boolean"===typeof g&&"add"==c?(d[newKey]=g,f++):"number"===typeof g&&"add"==c&&g.toString().length<=a.maxPropChar&&null!=g&&(d[newKey]=g,f++)});return d}catch(g){}return!1};a.filterEv=function(b){try{var c={},d=0;Object.keys(b).map(function(f){var e=f;f=f.substring(0,32);15>=d&&""!=f.trim()&&32>=f.length&&(newKey=f.toLowerCase(),newKey=newKey.trim(),f=b[e],"string"===typeof f&&""!=f?(f=f.trim(),objValTrimmed=f.substring(0,a.maxPropChar),e=/^(https?):\/\//,""!=f&&(f.length<=a.maxPropChar||e.test(f))?c[newKey]=f:c[newKey]=objValTrimmed,d++):"boolean"===typeof f?(c[newKey]=f,d++):"number"===typeof f&&(f.toString().length<=a.maxPropChar&&null!=f||-1<a.allowedKeys.indexOf(newKey))&&(c[newKey]=f,d++))});return c}catch(f){}return!1};a.shouldSend=function(b,c,d){if("evt"==b)if(a.evtTracking){if(a.getApihcStorage("evt_pd","")==c&&a.getApihcStorage("evt_pm","")==d&&(a.evtPerDay<=a.getApihcStorage("evt_pd","counter")||a.evtPerMonth<=a.getApihcStorage("evt_pm","counter")))return!1}else return!1;else if("userp"==b)if(a.propsTracking){if(a.getApihcStorage("prop_pd","")==c&&a.getApihcStorage("prop_pm","")==d&&(a.propsPerDay<=a.getApihcStorage("prop_pd","counter")||a.propsPerMonth<=a.getApihcStorage("prop_pm","counter")))return!1}else return!1;return!0};a.sendEventsData=function(b,c,d){var f=a.getStorage("izgdpr"),e=a.eventsURL;a.todate=new Date;a.date=a.todate.getDate();a.month=a.todate.getMonth()+1;10>a.month&&(a.month="0"+a.month.toString());if(2!=f&&(1!=a.gdprPromptStatus||1==f||3==f)){e=a.getStorage("iztoken");token=a.getBrowserKeyFromToken(e);if("userp"===b){a.eventsURL=a.parseEpConf("SegmentProperties");if(!a.shouldSend("userp",a.date,a.month))return;if(void 0!==c.add&&1<=Object.keys(c.add).length){var k="add";var h=a.filterUserProp(c.add,k)}else if(void 0!==c.remove&&1<=Object.keys(c.remove).length)k="remove",h=a.filterUserProp(c.remove,k);else{a.log("Invalid JSON format");return}if(!h){a.log("Invalid Json Data");return}c=JSON.stringify(h)}else if("evt"===b){a.eventsURL=a.parseEpConf("SegmentEvents");if(!a.shouldSend("evt",a.date,a.month))return;a.setApihcStorage("evt_pd","INCRCount",a.date);a.setApihcStorage("evt_pm","INCRCount",a.month);"string"==typeof c&&(c=c.toLowerCase(),c=c.trim(),c.search(" "));if("string"==typeof c&&""!=c||"number"==typeof c){if(k=c,void 0!=d&&1<=Object.keys(d).length){h=a.filterEv(d);if(!h){a.log("Invalid Json Data");return}c=JSON.stringify(h)}}else return}else if("pers"===b){if(a.persURL=a.parseEpConf("PersonalProperties"),void 0!=c&&1<=Object.keys(c).length){h=a.filterPersonalisation(c);if(!h){a.log("Invalid Json Data");return}c=JSON.stringify(h)}}else if("trg"===b)if(a.eventsURL=a.parseEpConf("TriggerEvent"),"string"==typeof c&&(c=c.toLowerCase(),c=c.trim(),c.search(" ")),"string"==typeof c&&""!=c||"number"==typeof c){if(k=c,void 0!=d&&1<=Object.keys(d).length){h=a.filterTrigger(d);if(!h){a.log("Invalid Json Data");return}c=JSON.stringify(h)}}else return;else return;if(""!=token){var l=0;try{e=JSON.parse(e),1<Object.keys(e).length&&(l=1)}catch(m){}f="pid="+a.client+"&bKey="+token+"&btype="+a.browser+"&dtype="+a.deviceType+"&bver="+a.browserVer+"&pte="+a.subType+"&os="+a.os+"&pt="+a.promptType+"&et="+b+"&ge="+a.gdprPromptStatus;a.isSafari||(f+="&"+a.endPointParamExtract(a.getStorage("iztoken")));"pers"!=b&&(f=f+"&act="+
k);1==l&&(f=f+"&auth="+e.keys.auth+"&pk="+e.keys.p256dh);if(!(void 0===d||void 0!=d&&1>Object.keys(d).length)||"evt"!=b&&"trg"!=b)if(a.isJsonString(c)&&1<=Object.keys(h).length)a.log("final obj :: "+c),h=encodeURIComponent(c),f=f+"&val="+h;else return;if("userp"==b){h=a.getStorage("izup");e=a.getIzSync("userp");if("remove"!=k&&""!=h&&!0===a.matchProp(h,c)&&""!=e&&1440>a.getTimeDiff(e)){1==a["debugger"].status&&a["debugger"].log("User Property: Already Sent to iZooto "+c,a["debugger"].successCode);return}a.setApihcStorage("prop_pd","INCRCount",a.date);a.setApihcStorage("prop_pm","INCRCount",a.month)}else if("pers"==b&&(h=a.getStorage("izPers"),e=a.getIzSync("izPers"),""!=h&&!0===a.matchProp(h,c)&&""!=e&&1440>a.getTimeDiff(e)))return;e=a.eventsURL;"pers"===b&&(e=a.persURL);a.httpRequest(e,function(){var f=a["debugger"].msgSet;if("userp"==b){var e="User Property";"remove"==k?a.removeStorage("izup"):(a.isLocalStorage&&localStorage.setItem("izup",encodeURIComponent(c)),a.setIzSync("userp"))}else"pers"==b?(e="Personalization Property",a.isLocalStorage&&localStorage.setItem("izPers",encodeURIComponent(c)),a.setIzSync("izPers")):e="evt"==b?"User Event":"Trigger";if(1==a["debugger"].status){var g=e+": "+c+" "+f.ev;if("evt"==b||"trigger"==b)g=e+": "+k+" "+f.ev,d&&(g+=" with data "+c);a["debugger"].log(g,a["debugger"].successCode)}},{},{method:"post",data:f})}else a.log("Invalid events data")}};a.filterTrigger=function(b){try{var c={},d=0;Object.keys(b).map(function(f){var e=f;f=f.substring(0,32);15>=d&&""!=f.trim()&&32>=f.length&&(newKey=f.toLowerCase(),newKey=newKey.trim(),f=b[e],"string"===typeof f&&""!=f&&(f=f.trim(),objValTrimmed=f.substring(0,a.maxPropChar),c[newKey]=""!=f&&f.length<=a.maxPropChar?f:objValTrimmed,d++))});return c}catch(f){}return!1};a.filterPersonalisation=function(b){try{var c={},d=0;Object.keys(b).map(function(f){var e=f;f=f.substring(0,32);1>d&&""!=f.trim()&&32>=f.length&&(newKey=f.toLowerCase(),newKey=newKey.trim(),f=b[e],"string"===typeof f&&""!=f?(f=f.trim(),objValTrimmed=f.substring(0,a.maxPropChar),c[newKey]=""!=f&&f.length<=a.maxPropChar?f:objValTrimmed,d++):"number"===typeof f&&f.toString().length<=a.maxPropChar&&null!=f&&(c[newKey]=f,d++))});return c}catch(f){}return!1};a.matchProp=function(b,c){try{b=JSON.parse(b),c=JSON.parse(c)}catch(h){a.log(h)}if("object"!=typeof b)return!1;for(var d in c){if(void 0==b[d])return!1;if("object"==typeof c[d]){if(c[d]instanceof Array&&b[d]instanceof Array){var f=c[d],e=b[d],k;for(k in f)if(0>e.indexOf(f[k]))return!1}}else if(b[d]!=c[d])return!1}return!0};a.tagsDeprecation=function(){console.warn("iZooto :: Tags are no longer supported. See https://help.izooto.com/article/segementation/ ")};a.syncQueue=function(b,c){if("[object Array]"!==Object.prototype.toString.call(b))a.log("Invalid _izq : "+JSON.stringify(b,null,4));else if(0===b.length)a.log("_izq is empty.");else if(null===c){var d=[];for(e in window._izq)d.push(window._izq[e]);d.map(function(b,c){var d=window._izq.indexOf(b);0<=d&&("[object Array]"===Object.prototype.toString.call(b)?("register_callback"===b[0]&&"function"===typeof b[1]&&(a.userCallback=b[1],window._izq.splice(d,1)),"registerSubscriptionCallback"===b[0]&&"function"===typeof b[1]&&(a.subscriptionCallback=b[1],window._izq.splice(d,1)),"registerPromptDisplayCallback"===b[0]&&"function"===typeof b[1]&&(a.promptCallback=b[1],window._izq.splice(d,1)),"triggerPrompt"===b[0]&&(a.promptUser(),window._izq.splice(d,1)),"triggerPromptWithDelay"===b[0]&&(setTimeout(a.promptUser,a.promptDelay),window._izq.splice(d,1)),"updateSubscription"===b[0]&&("subscribe"!=b[1]&&"unsubscribe"!=b[1]||a.updateSubscription(b[1]),window._izq.splice(d,1))):"object"===typeof b&&b.hasOwnProperty("autoPrompt")&&!1===b.autoPrompt&&(a.autoPrompt=!1,window._izq.splice(d,1)))})}else{var f=null;for(d=0;d<b.length;d++){f=b[d];"[object Array]"===Object.prototype.toString.call(f)&&"triggerPrompt"===f[0]&&(a.promptUser(),window._izq.splice(d,1));"triggerPromptWithDelay"===f[0]&&(setTimeout(a.promptUser,a.promptDelay),window._izq.splice(d,1));if("[object Array]"===Object.prototype.toString.call(f))if("updateSubscription"===f[0])"subscribe"!=f[1]&&"unsubscribe"!=f[1]||a.updateSubscription(f[1]),window._izq.splice(d,1);else if("userProfile"===f[0])void 0!=f[1]&&""!=f[1]&&(a.sentUserProp=f[1],a.sendEventsData("userp",f[1])),window._izq.splice(d,1);else if("event"===f[0]){var e=void 0!=f[1]?f[1]:"";"string"==typeof e&&(e=e.trim());e=e.substring(0,32);void 0!=e&&("string"==typeof e||"number"==typeof e)&&32>=e.toString().trim().length&&""!=e&&(void 0!=f[2]&&"object"==typeof f[2]?a.sendEventsData("evt",e,f[2]):a.sendEventsData("evt",e));window._izq.splice(d,1)}else"personalizationProperty"===f[0]&&(void 0!=f[1]&&""!=f[1]&&(a.sentUserProp=f[1],a.sendEventsData("pers",f[1])),window._izq.splice(d,1));if("[object Array]"!==Object.prototype.toString.call(f)||2!==f.length||"string"!==typeof f[0])a.log("Invalid queue item at index : "+d+" : "+JSON.stringify(b,null,4));else{e=f[0];f=f[1];var k=a.getBaseTagLink(c);1!==a.izTags&&a.log("tags disabled");switch(e){case "add_tag":window._izq.splice(d,1);a.addTag(f,k);break;case "remove_tag":window._izq.splice(d,1);a.removeTag(f,k);break;case "add_property":if("object"!==typeof f||"string"!==typeof f.name||"string"!==typeof f.value&&"number"!==typeof f.value&&"boolean"!==typeof f.value||""===f.value){a.log("Invalid payload at index (add_tag) : "+d+" : "+JSON.stringify(f,null,4));continue}window._izq.splice(d,1);a.addProperty(f.name,f.value,k);break;default:a.log("Invalid operation at index : "+d+" : "+e)}}}}};a.setupQueue=function(){"[object Array]"!==Object.prototype.toString.call(window._izq)&&(window._izq=[]);window._izq.push=function(b){if("[object Array]"===Object.prototype.toString.call(b)&&"debug"===b[0]&&1==b[1])a["debugger"].init();else if("[object Array]"===Object.prototype.toString.call(b)&&"triggerPrompt"===b[0])a.promptUser();else if("[object Array]"===Object.prototype.toString.call(b)&&"triggerPromptWithDelay"===b[0])setTimeout(a.promptUser,a.promptDelay);else if("[object Array]"===Object.prototype.toString.call(b)&&"updateSubscription"===b[0])"subscribe"!=b[1]&&"unsubscribe"!=b[1]||a.updateSubscription(b[1]);else if("[object Array]"===Object.prototype.toString.call(b)&&"userProfile"===b[0])void 0!=b[1]&&""!=b[1]&&a.sendEventsData("userp",b[1]);else if("[object Array]"===Object.prototype.toString.call(b)&&"personalizationProperty"===b[0])void 0!=b[1]&&""!=b[1]&&a.sendEventsData("pers",b[1]);else if("[object Array]"===Object.prototype.toString.call(b)&&"event"===b[0]){var c=void 0!=b[1]?b[1]:"";"string"==typeof c&&(c=c.trim());c=c.substring(0,32);void 0!=c&&("string"==typeof c||"number"==typeof c)&&32>=c.toString().trim().length&&""!=c&&(void 0!=b[2]&&"object"==typeof b[2]?a.sendEventsData("evt",c,b[2]):a.sendEventsData("evt",c))}else if("[object Array]"===Object.prototype.toString.call(b)&&"trigger"===b[0])c=void 0!=b[1]?b[1]:"","string"==typeof c&&(c=c.trim()),c=c.substring(0,32),void 0!=c&&("string"==typeof c||"number"==typeof c)&&32>=c.toString().trim().length&&""!=c&&(void 0!=b[2]&&"object"==typeof b[2]?a.sendEventsData("trg",c,b[2]):a.sendEventsData("trg",c));else if(c=a.getStorage("iztoken"),c=a.getBrowserKeyFromToken(c),""===c)a.log("Token is empty.");else{var d=[];d.push(b);a.syncQueue(d,c)}}};a.getBrowserKeyFromToken=function(b){var c=!0;try{JSON.parse(b)}catch(d){c=!1}return c?a.getSubscriptionKey(b):b};a.processQueue=function(){if(!a.isSubDomain){var b=a.getStorage("iztoken");b=a.getBrowserKeyFromToken(b);a.syncQueue(window._izq,null);""===b?a.setupQueue():void 0!==window._izq&&(a.syncQueue(window._izq,b),a.setupQueue())}};a.createWelcomeNotification=function(){if(1===a.isWelcomeNotification&&""!=a.welcomeIcon&&""!=a.welcomeTitle&&""!=a.welcomeBody){var b=new Notification(a.welcomeTitle,{icon:a.welcomeIcon,body:a.welcomeBody,tag:"welcome"});b.onclick=function(){""!=a.welcomeUrl?(b.close(),window.open(a.welcomeUrl,"_blank")):b.close()};0<a.welcomeTimeout&&setTimeout(function(){b.close()},a.welcomeTimeout)}};a.showWelcomeNotification=function(b){if(1===a.isWelcomeNotification&&""!=a.welcomeUrl&&""!=a.welcomeIcon&&""!=a.welcomeTitle&&""!=a.welcomeBody){var c=!1;try{var d=JSON.parse(b);c=!0}catch(h){}var f="";if(!0===c)if(f="&bKey="+a.getSubscriptionKey(b),void 0!==d.keys&&void 0!==d.keys.p256dh)f+="&auth="+d.keys.auth,f+="&pk="+d.keys.p256dh;else{1==a.isSdkHttps&&a.createWelcomeNotification();return}else f="&bKey="+b;try{var e=new XMLHttpRequest,k="pid="+a.client+"&btype="+a.browser+f+"&ref=izwp";e.open("POST",a.locationProtocol+"//api.izooto.com/wn/welcomepush.php",!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onreadystatechange=function(){4==e.readyState&&200==e.status&&a.log(e.responseText)};e.send(k)}catch(h){a.log("No welcome Notification")}}};a.addGdprPixel=function(){if(3!=a.getStorage("izgdpr"))try{var b=document.body?document.body:document.head,c=document.createElement("script");c.id="izootoGdprSdk";c.src=a.gdprPixel;b.appendChild(c)}catch(d){}};a.processGA=function(b){if(""!=a.gaId)try{window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create",a.gaId,"auto"),ga("send","event","izooto",b),a.log("sending response :: "+b)}catch(c){}};a.callbackResponse=function(b,c){if(0!==Object.keys(c).length){if(0===b){if("function"===typeof a.subscriptionCallback)a.subscriptionCallback(c);else if("function"===typeof a.userCallback){if(7==c.statuscode||8==c.statuscode)c={response:"unsubscribed",statuscode:7};a.userCallback(c)}a.processGA(c.response)}1===b&&("function"===typeof a.promptCallback&&a.promptCallback(c),a.processGA(c.response))}};a.getMetaValue=function(a){try{for(var b=document.getElementsByTagName("meta"),d=0;d<b.length;d++)if(b[d].getAttribute("name")===a)return b[d].getAttribute("content")}catch(f){}return""};a.getLang=function(){var a=document.documentElement.lang;if(""==a)try{for(var c=document.getElementsByTagName("meta"),d=0;d<c.length;d++)"content-language"==c[d].getAttribute("http-equiv")&&(a=c[d].getAttribute("content"))}catch(f){}return a};a.syncLastVisit=function(){if(1===a.sysEvents){a.sysEventUrl=a.parseEpConf("last_visit");var b=a.getIzSync("lv"),c=new Date,d=c.getDate()+"-"+(c.getMonth()+1)+"-"+c.getFullYear();c=function(){a.setIzSync("lv",d)};var f=a.getLang(),e=a.getMetaValue("keywords"),k={last_website_visit:!0};""!=f&&(k.lang=f);""!=e&&(k.keywords=e);""!=b&&b==d||""==a.getStorage("iztoken")||(b="pid="+a.client,b+="&"+a.bkeyParamExtract(a.getStorage("iztoken")),b=b+"&et=userp&act=add&val="+JSON.stringify(k),a.httpRequest(a.sysEventUrl,c,{},{method:"post",data:b}))}};a.pixelEventReciever=function(b,c){var d={},f={};if(c&&"already_granted"!=b)d={response:"subscribed",statuscode:1},void 0!=a.sentUserProp&&a.sendEventsData("userp",a.sentUserProp),1==a.gdprPromptStatus&&a.addGdprPixel(),""!=a.sourceOriginAlt&&a.rmSubs(),a.syncLastVisit(),a.callbackResponse(0,d),0!=a.isShopify&&(a.shopifyInit(!0),a.resetProductCookie(),a.checkAndSendShopifyEvents(!0)),void 0!=a.masterDomain&&""!=a.masterDomain&&a.masterCallback(!1),a.syncHookInDb("syncNotificationView"),a.syncHookInDb("syncNotificationClick");else if("already_granted"==b)d={response:"already subscribed",statuscode:2},0!=a.isShopify&&(a.shopifyInit(),a.resetProductCookie(),a.checkAndSendShopifyEvents(!0)),a.syncLastVisit(),void 0!=a.masterDomain&&""!=a.masterDomain&&a.masterCallback(!0),a.callbackResponse(0,d),a.syncHookInDb("syncNotificationView"),a.syncHookInDb("syncNotificationClick");else{switch(b){case "denied":d={response:"blocked",statuscode:3};break;case "already_denied":d={response:"already blocked",statuscode:4};break;case "browser":d={response:"browser not supported",statuscode:5};break;case "promptclose":d={response:"prompt closed",statuscode:6};break;case "unsubscribed":d={response:"soft unsubscribed",statuscode:7};break;case "already_unsubscribed":d={response:"already soft unsubscribed",statuscode:8};break;case "divAllowed":d={response:"soft subscribed",statuscode:9}}switch(b){case "divShow":f={response:"soft prompt displayed",statuscode:1};break;case "divClosed":f={response:"soft prompt closed",statuscode:2};break;case "prompted":f={response:"native prompt displayed",statuscode:3};break;case "popopen":f={response:"prompt window opened",statuscode:4};break;case "popclose":f={response:"prompt window closed",statuscode:5}}a.callbackResponse(0,d);a.callbackResponse(1,f)}};a.syncHookInDb=function(b){if("syncNotificationClick"==b||"syncNotificationView"==b)if(void 0!=a[b]){var c=a[b];a.db.init().then(function(d){a.db.getData(d,"options",b).then(function(f){(f&&f.hasOwnProperty("val")?f.val:"")!=c&&a.db.addUpdate(d,b,c).then(function(b){a.log(b)})["catch"](function(b){a.log(b)})})["catch"](function(b){a.log(b)})})["catch"](function(b){a.log(b)})}else a.log("Invalid Hook Request")};a.setPromptCount=function(b){"prompted"==b?(b=""!=a.getizConfig("pmtcount")?a.getizConfig("pmtcount")+1:1,a.setizConfig("pmtcount",b)):"divShow"==b&&(b=""!=a.getizConfig("dscount")?a.getizConfig("dscount")+1:1,a.setizConfig("dscount",b))};a.getTokenThenFunction=function(b,c,d){1==a.tokenGen&&(b=b+"&fe=1&ft="+a.fcmToken);"http:"===a.locationProtocol?(b=b+"&sw="+a.swversion,a.httpRequest(d,c,{},{method:"post",data:b})):a.getswVersionPromise().then(function(f){b=b+"&sw="+f;a.httpRequest(d,c,{},{method:"post",data:b})})["catch"](function(f){a.httpRequest(d,c,{},{method:"post",data:b})})};a.getTokenCatchFunction=function(b,c,d){a.httpRequest(d,c,{},{method:"post",data:b})};a.setPixelData=function(b,c,d){try{a.setPromptCount(c)}catch(p){console.log("Error"+p)}a.fcmEnable||(d=d+"&sw="+a.swversion);var f=a.getUTMParamsOfUrl();!1!==f&&(d=d+"&"+f);if(!(0<=a.restrictedProp.indexOf(c))){try{if("divClosed"==c||"divAllowed"==c||"promptclose"==c||"allowed"==c||"denied"==c||"already_granted"==c)d=d+"&ndc="+a.getizConfig("pmtcount"),d=d+"&sdc="+a.getizConfig("dscount")}catch(p){console.log("Error"+p)}if("already_granted"==c){a.isChrome&&(f=a.getStorage("izBver"),""==f?a.isLocalStorage&&localStorage.setItem("izBver",a.browserVer):50>f&&50<=a.browserVer&&(b+="&up=1"));f=a.getBrowserKeyFromToken(a.getStorage("iztoken"));var e=a.getIzSync("ag"),k=a.getIzSync("agt");if(a.currentToken!=f)a.log("Force Sync");else if(1==e&&1!=a.forceTokenSync&&1!=a.gcmToVapid||1==a.getIzSync("gvm")||1==a.forceTokenSync&&""!=k&&1440>a.getTimeDiff(k))return}else if("already_denied"==c&&(k=a.getIzSync("ad"),1==k))return;var h=1,l=function(f,e){h++;200==e?"already_granted"==c?(a.setIzSync("ag",1),a.setIzSync("agt"),1==a.getStorage("izgtv")&&a.setIzSync("gvm",1)):"already_denied"==c?a.setIzSync("ad",1):1==a.gcmToVapid&&"allowed"==c?a.setIzSync("gvm",1):1==a.gcmToVapid&&"allowed"==c&&a.setIzSync("gvm",1):(10>=h&&setTimeout(function(){a.setStorage("izpte",a.subType);a.httpRequest(b,l,{},{method:"post",data:d})},2500),a.log("Synced :: "+req.status))};if("allowed"!=c&&"already_granted"!=c||a.isSafari||!a.fcmEnable)2==a.subType&&(d=d+"&vpk="+a.vapid),a.setStorage("izpte",a.subType),a.httpRequest(b,l,{},{method:"post",data:d});else{try{var m=a.izParseQuery(d),n={endpoint:m.ep,keys:{auth:m.auth,p256dh:m.pk}}}catch(p){a.httpRequest(b,l,{},{method:"post",data:d});return}"allowed"==c&&a.getToken(n).then(function(){a.getTokenThenFunction(d,l,b)})["catch"](function(c){console.log("error in get Token:"+c);a.setStorage("izpte",a.subType);a.httpRequest(b,l,{},{method:"post",data:d})});"already_granted"==c&&(""==a.getStorage("iztoken")||""==a.getStorage("izfcmtoken")?a.getToken(n).then(function(){a.getTokenThenFunction(d,l,b)})["catch"](function(c){a.getTokenCatchFunction(d,l,b)}):(d=d+"&fe=1&ft="+a.getStorage("izfcmtoken"),a.setStorage("izpte",a.subType),a.httpRequest(b,l,{},{method:"post",data:d})))}}};a.httpRequest=function(b,c,d,f){""!=f&&void 0!=f&&void 0!=f.data&&""!=f.data&&0!=a.processPriority&&(f.data=f.data+"&pp="+a.processPriority);var e="GET",k="",h=new XMLHttpRequest;h.onreadystatechange=function(){4==this.readyState&&200==this.status?"function"==typeof c&&c(this.responseText,this.status):4==this.readyState&&200!=this.status&&c(this.responseText,this.status)};"object"==typeof f&&0<Object.keys(f).length&&"post"==f.method&&(e="POST",void 0!=f.data&&""!=f.data&&(k=f.data));h.open(e,b,!0);"POST"==e&&h.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");if("object"==typeof d&&0<Object.keys(d).length)for(var l in d)a.log("header name"+l),h.setRequestHeader(l,d[l]);a.log(b);""!=k?h.send(k):h.send()};a.sendEnrHit=function(b,c,d){if("already_granted"==b)if(0==a.bkeySent)a.bkeySent=1;else return;a.sendEnrUrl=a.parseEpConf(b);try{"https:"==a.locationProtocol?ht=1:ht=0;var f="";f=(new Date).getTimezoneOffset();var e="pid="+a.client+"&ht="+ht+"&btype="+a.browser+"&dtype="+a.deviceType+"&tz="+(f+330)+"&bver="+a.browserVer+"&pte="+a.subType+"&os="+a.os+"&pt="+a.promptType+"&ge="+a.gdprPromptStatus+a.optinParam;if("https://err.izooto.com/err"==a.sendEnrUrl){if("undefined"==b||void 0==b)return;e=e+"&error="+b+"&errh=1"}1==a.gcmToVapid&&""!=a.oldGCMBkey&&(a.sendEnrUrl=a.parseEpConf("FCMMigration"),e=e+"&oBkey="+a.oldGCMBkey);1!=a.getIzSync("gvm")&&""!=a.getStorage("izokey")&&1!=a.gcmToVapid&&(a.gcmToVapid=1,a.sendEnrUrl=a.parseEpConf("FCMMigration"),e=e+"&oBkey="+a.getStorage("izokey"));var k=a.getizConfig("IZCID");""!=k&&(e=e+"&izcid="+k);var h=a.sendEnrUrl;if(void 0===d)if("bKey"==b){var l=c;if(!a.isSafari){var m=a.endPointParamExtract(c);e=e+"&"+m}var n=a.bkeyParamExtract(c);e=e+"&"+n;a.pixelEventReciever(b,!0)}else e=e+"&"+b+"="+c;else l=d,a.isSafari||(m=a.endPointParamExtract(d),e=e+"&"+m),n=a.bkeyParamExtract(d),e=e+"&"+b+"="+c+"&"+n,a.setStorage("iztoken",l);"http:"===a.locationProtocol?a.setPixelData(h,b,e):a.getswVersionPromise().then(function(c){a.swversion=c;a.setPixelData(h,b,e)})["catch"](function(c){a.log("error in getting sw version");a.setPixelData(h,b,e)});"allowed"==b&&void 0!==d&&2==a.browser&&a.showWelcomeNotification(l);"allowed"!=b&&"already_granted"!=b||void 0===d?a.pixelEventReciever(b,!1):(a.setStorage("iztoken",l),a.processQueue(),a.pixelEventReciever(b,!0))}catch(p){a.log("izooto:: "+p)}if("prompted"==b||"divShow"==b)a.activePrompt(),a.setIzSync("userp","",!0),0!=a.repeatPromptDelay&&a.setRepeatPromptDelay(a.repeatPromptDelay),""==a.sourceOriginAlt&&a.removeStorage("iztoken"),a.removeStorage("izfcmtoken");"divClosed"==b&&0!=a.optInCloseDelay&&a.setRepeatPromptDelay(a.optInCloseDelay)};a.bkeyParamExtract=function(b){var c=b,d=0;try{var f=JSON.parse(c);b=a.getSubscriptionKey(c);1<Object.keys(f).length&&(d=1)}catch(g){}return d?"bKey="+b+"&auth="+f.keys.auth+"&pk="+f.keys.p256dh:"bKey="+b};a.endPointParamExtract=function(b){try{endpoint=JSON.parse(b).endpoint}catch(c){}a.isEdge&&(endpoint=encodeURIComponent(endpoint));return"ep="+endpoint};a.getSubscriptionKey=function(b){b=JSON.parse(b).endpoint;return 1==a.isFirefox?b.substring(48):(a.isOpera||a.isChrome)&&void 0!=b&&0<=b.indexOf("fcm.googleapis.com")?b.substring(36):a.isEdge?encodeURIComponent(b.substring(41)):a.isUcb?b.substring(36):b.substring(40)};a.requestSafariPermissions=function(){window.safari.pushNotification.requestPermission(a.webServiceUrl,a.webPushId,{url:window.location.href},function(b){"granted"===b.permission?(a.closeHttpsBranding(),b=b.deviceToken,a.bkey=b,a.sendEnrHit("allowed","1",b),a.log("Granted Key= "+b)):"denied"===b.permission&&(a.closeHttpsBranding(),a.sendEnrHit("denied","1"))})};a.checkSafariPermission=function(){0==a.promptType&&12.1<=parseFloat(a.browserVer)&&(a.promptType=1,a.optInDesignType=1);if(""!=a.webPushId&&""!=a.webServiceUrl)if(3==a.getStorage("izstatus"))a.pixelEventReciever("already_unsubscribed",!1);else{var b="";"safari"in window&&"pushNotification"in window.safari&&(b=window.safari.pushNotification.permission(a.webPushId),"default"===b.permission?0!=a.promptType&&12.1<=parseFloat(a.browserVer)?a.optinDialog():(2==a.promptType?a.calledManually&&a.requestSafariPermissions():0!=a.promptDelay?setTimeout(function(){a.openHttpsOverlay();a.requestSafariPermissions()},a.promptDelay):(a.openHttpsOverlay(),a.requestSafariPermissions()),a.log("Prompted Safari"),a.sendEnrHit("prompted","1")):"granted"===b.permission?(b=b.deviceToken,a.bkey=b,a.sendEnrHit("already_granted",1,b),a.log("Already Granted & key= "+b)):"denied"===b.permission&&(a.sendEnrHit("already_denied",1),a.log("Denied")))}};a.closePopWindow=function(){if(self==top&&a.isSubDomain)try{setTimeout(function(){window.opener.postMessage(JSON.stringify({izootoMsg:{k:"popclose",v:1}}),"*");window.close()},1E3)}catch(b){a.log("iZooto::unable to close popup")}};a.brandingScroll=function(){null!=document.getElementById("izooto-branding")&&(30<window.pageYOffset||30<document.body.scrollTop)&&a.closeHttpsBranding()};a.openHttpsBranding=function(){if(!a.isSubDomain&&0!=a.branding){if(1!=a.deviceType)try{window.addEventListener("scroll",a.brandingScroll)}catch(d){}try{var b=document.getElementsByTagName("body")[0],c=document.createElement("div");c.setAttribute("id","izooto-branding");c.innerHTML=a.httpsBranding;b.appendChild(c)}catch(d){}a.brandingDisable()}};a.openHttpsOverlay=function(){if(!a.isSubDomain&&0!=a.overlay){if(1!=a.deviceType)try{window.addEventListener("scroll",a.brandingScroll)}catch(d){}try{1===a.isChrome&&62<parseInt(a.browserVer)&&a.isMobile()&&(a.httpsOverlay="");var b=document.getElementsByTagName("body")[0],c=document.createElement("div");c.setAttribute("id","izooto-branding");c.innerHTML=a.httpsOverlay;b.appendChild(c)}catch(d){}a.brandingDisable()}};a.closeHttpsBranding=function(){if(!a.isSubDomain){try{document.getElementById("izooto-branding").remove()}catch(b){a.log("Error-Removing-Div"+
b)}if(1!=a.deviceType)try{window.removeEventListener("scroll",a.brandingScroll)}catch(b){}}};a.brandingDisable=function(){if(0===a.branding)try{var b=document.getElementsByClassName("izbranding"),c;for(c in b)b[c].style.display="none"}catch(d){}};a.addExternalOptin=function(){var b=a.optInSrc,c=document.body?document.body:document.head,d=document.createElement("script");d.async=!0;d.id="izOptin";d.src=b+""+a.optInDesignType+".js?v=2";c.appendChild(d)};a.openDialog=function(b){if(void 0==b&&""==a.optInDesign&&a.newOptIn&&0!=a.promptType)a.addExternalOptin();else{a.loadOptin();try{var c=document.getElementsByTagName("body")[0],d=document.createElement("div");d.setAttribute("id","izmiddle-box");d.innerHTML=a.dialogDesign;c.appendChild(d)}catch(f){}a.brandingDisable();1==a.promptType?a.sendEnrHit("divShow",1):!0}};a.optinDialog=function(){a.getStorage("izDl")||setTimeout(function(){a.openDialog()},a.promptDelay)};a.setRepeatPromptDelay=function(b){0!==b&&(b*=60,a.cookieLess?a.setStorageWithTime("izDl",1,b):document.cookie="izDl=1;path=/;max-age="+b+";"+a.cDomain)};a.initialiseState=function(){"showNotification"in ServiceWorkerRegistration.prototype?"denied"===Notification.permission?a.log("The user has blocked notifications."):"PushManager"in window?navigator.serviceWorker.ready.then(function(b){b.pushManager.getSubscription().then(function(b){b&&(a.fcmEnable?a.isChrome?0>b.endpoint.indexOf("fcm.googleapis.com")||a.sendSubscriptionToServer(b):a.sendSubscriptionToServer(b):a.sendSubscriptionToServer(b))})["catch"](function(b){a.log("Error during getSubscription()",b)})}):a.log("Push messaging is not supported."):a.log("Notifications are not supported.")};a.loadScript=function(a){return new Promise(function(b,d){var c=document.createElement("script");c.onload=b;c.onerror=d;c.src=a;(document.body?document.body:document.head).appendChild(c)})};a.addkScript=function(){return(new Promise(function(b,c){a.loadScript(a.sak+"sak_"+a.client+".js").then(b)["catch"](function(a){c(a)})}))["catch"](function(a){reject(a)})};a.getToken=function(b){return new Promise(function(c,d){try{1==a.tokenGen?a.addkScript().then(function(){if(void 0!=izsak)var f=izsak;var e=JSON.stringify(b),k=new XMLHttpRequest;k.addEventListener("readystatechange",function(){if(4===this.readyState&&200==this.status){var b=JSON.parse(this.responseText);a.fcmToken=b.token;a.setStorage("izfcmtoken",a.fcmToken);c(a.fcmToken)}else 4==this.readyState&&200!=this.status&&d()});k.open("POST",a.fcmTokenGenURL);k.setRequestHeader("Content-Type","application/json");k.setRequestHeader("Authorization","key="+
f);k.send(e)})["catch"](function(b){a.log(b)}):c()}catch(f){d()}})};a.innerThenSubscribe=function(b){1==a.isFirefox&&1!=a.ag&&(1!=a.ffoxGranted&&a.isSubDomain&&top!=self?a.sendMessage("allowed",1,"parent"):1==a.ffoxHttps&&"default"!=Notification.permission&&a.closeHttpsBranding(),a.log("Granted & Subscribe"));return a.sendSubscriptionToServer(b)};a.innerCatchSubscribe=function(b){a.closeHttpsBranding();"denied"===Notification.permission?(1==a.ffoxHttps?a.closeHttpsBranding():"default"!=a.subscriptionType||a.isSubDomain||1==a.ad||a.sendEnrHit("denied",1),1!=a.isFirefox&&!a.isAddFcm||1==a.ad||("default"!=a.subscriptionType||a.isSubDomain?a.isSubDomain&&(self!=top?a.sendMessage("denied","1","parent"):(a.sendMessage("denied","1","opener"),a.closePopWindow())):a.sendEnrHit("denied","1")),a.isChrome&&a.isSubDomain&&self==top&&(1!=a.ad&&a.sendMessage("denied","1","opener"),a.closePopWindow()),a.log("Permission for Notification is denied")):("default"===Notification.permission&&(a.closeHttpsBranding(),"default"!=a.subscriptionType||a.isSubDomain?1===a.promptType&&a.isSubDomain&&self==top?a.sendMessage("promptclose",1,"opener"):a.isFirefox&&self!=top&&a.isSubDomain&&a.sendMessage("promptclose",1,"parent"):(a.pixelEventReciever("promptclose",!1),a.sendEnrHit("promptclose","1"))),1==a.gcmToVapidMigrate&&(a.oldGCMBkey=a.getBrowserKeyFromToken(a.getStorage("iztoken")),""==a.oldGCMBkey||void 0==a.oldGCMBkey?navigator.serviceWorker.ready.then(function(b){b.pushManager.getSubscription().then(function(b){b=JSON.stringify(b);bkey=a.getSubscriptionKey(b);a.oldGCMBkey=bkey;a.setStorage("izokey",bkey)})}):a.setStorage("izokey",a.oldGCMBkey),a.gcmToVapid=1,a.setStorage("izgtv",1),a.reSubscribeToken(b)),1!=a.forceReSubscribe&&""==a.masterDomain||a.reSubscribeToken(b),a.closePopWindow(),a.log("Unable to subscribe to push"+b))};a.subscribe=function(){navigator.serviceWorker.ready.then(function(b){b.pushManager.subscribe(a.optObj).then(function(b){a.innerThenSubscribe(b)})["catch"](function(b){a.innerCatchSubscribe(b)})})};a.popupNotice=function(a){try{document.getElementById("dynamic_iz").innerHTML="<center>"+a+"</center>"}catch(c){}};a.sendDataToOpener=function(b,c){0==a.promptType?(a.sendMessage("bKey",b,"opener"),a.popupNotice(a.subscribedMsg)):1==a.ag?(a.sendMessage("already_granted",1,"opener",b),a.popupNotice(a.alreadySubscribedMsg)):(a.sendMessage("allowed",1,"opener",b,c),a.popupNotice(a.subscribedMsg));a.closePopWindow()};a.sendSubscriptionToServer=function(b){var c=JSON.stringify(b);if(""!=a.oldGCMBkey&&void 0!=a.oldGCMBkey&&(b=a.getSubscriptionKey(c),a.oldGCMBkey==b))return;0==a.bkeySent&&("default"!=a.subscriptionType||a.isSubDomain?self==top&&a.isSubDomain?(a.setStorage("iztoken",c),a.getswVersionPromise().then(function(b){a.sendDataToOpener(c,b)})["catch"](function(b){a.log(b);a.sendDataToOpener(c,"")})):1==a.ag?a.sendMessage("already_granted",1,"parent",c):!0:(1==a.ag&&""==a.getStorage("iztoken")&&a.updateSubscription("subscribe",c,!0),1==a.ag?a.sendEnrHit("already_granted","1",c):a.sendEnrHit("allowed","1",c)),a.bkeySent=1)};a.subFrame=function(b,c){var d=a.sourceOrigin+"?action=prompt";d=d+"&izpt="+a.promptType;d=void 0!=b?b:d;c=void 0!=c?c:"izSubFrame";try{izFrame=document.createElement("IFRAME"),izFrame.setAttribute("src",d),izFrame.setAttribute("id",c),izFrame.style.width="0px",izFrame.style.height="0px",izFrame.style.border="0px",izFrame.setAttribute("visibility","hidden"),izFrame.style.display="none",null!=document.body?document.body.appendChild(izFrame):document.head.appendChild(izFrame),a.log("izSubFrame set")}catch(f){a.log("izooto:: unable to subFrame"+
f)}};a.validateToken=function(b){var c=function(b,c){if(200==c){var d=b;a.log("rcv:: "+d);try{d=JSON.parse(d),a.subscriberStatusHandler(d)}catch(k){}}};b=a.ssUrl+"?s=1&bkey="+b+"&pid="+a.client;"https:"==a.locationProtocol?(a.addMsgReciever(),b=a.sourceOrigin+"?action=izcheckperms",a.subFrame(b,"izPermsFrame")):(a.log("validate token"),a.httpRequest(b,c))};a.subscriberStatusHandler=function(b){try{a.log(b),void 0!==b.status&&(1===b.status?(a.setIzstatus(1),a.sendEnrHit("already_granted",1,a.getStorage("iztoken"))):2==b.status?a.setIzstatus(2):0===b.status&&(1===a.promptType?a.optinDialog():0==a.promptType&&a.subFrame()))}catch(c){a.log(c)}};a.closeDialog=function(b){try{1===b?b="divAllowed":b="divClosed",document.getElementById("izmiddle-box").remove(),1===a.promptType?a.sendEnrHit(b,1):a.sendEnrHit("msgclose",1)}catch(c){a.log("Error-Removing-Div"+c)}};a.crossDialog=function(){try{document.getElementById("izmiddle-box").remove()}catch(b){a.log("Error-Removing-Div"+b)}};a.openPopup=function(){a.closeDialog(1);if(a.isSafari)a.openHttpsOverlay(),a.requestSafariPermissions();else if(a.isSdkHttps&&!a.autoPrompt&&"https:"==a.locationProtocol)a.promptUser();else{a.addMsgReciever();var b=void 0!=window.screenLeft?window.screenLeft:screen.left,c=void 0!=window.screenTop?window.screenTop:screen.top,d=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,f=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,e=200,k=200,h=a.promptType;if(1===a.promptType||2==a.promptType)h=1,k=e=500;b=d/2-e/2+b;c=f/2-k/2+c;a.hidePopup&&0===a.promptType&&(k=e=100,b=c=1E4);h=a.sourceOrigin+"?action=prompt&izpt="+h;1==a.fullPopUp&&0!=a.promptType?window.open(h,"iZooto Subscription"):(window.open(h,"iZooto Subscription","scrollbars=yes, width="+e+", height="+k+", top="+c+", left="+b),a.pixelEventReciever("popopen"))}};a.iscomplete=function(){a.docReady="complete"===document.readyState;a.docReady&&(setTimeout(function(){1==a.overlay?a.openHttpsOverlay():1==a.branding&&a.openHttpsBranding()},100),clearInterval(a.complete))};a.displayElementsOnPrompt=function(){1===a.isChrome?a.complete=setInterval(a.iscomplete,100):1==a.overlay&&a.openHttpsOverlay()};a.statusHandler=function(b,c,d){var f=function(b){"granted"===b&&(a.httpsNoRoot?(a.noRootVersionHandler(),a.addMsgReciever(),a.subFrame()):void 0!=window._izootoModule&&1==window._izootoModule.isMagento?a.cookieLess=0:0==a.isSdkHttps&&a.sendMessage("allowed",1,"parent"),a.ffoxGranted=1);a.closeHttpsBranding()},e=function(b){a.closeHttpsBranding();a.log("Error while requesting permission : "+b)};b=function(){a.isAddFcm?Notification.requestPermission().then(f)["catch"](e):46<=k?Notification.requestPermission().then(f)["catch"](e):Notification.requestPermission(f)};if("default"==c)if("subDomain"===d){var k=Number.parseInt(a.checkBrowser().split("-")[1]);try{if(0!==a.promptType){if(self!=top)return a.sendMessage("switchPrompt",1,"parent");a.popupNotice(a.clickOnAllowMsg);a.sendMessage("prompted",1,"opener")}else a.ffox=1,a.log("Prompted Http"),a.sendMessage("prompted",1,"parent");b()}catch(h){a.log("Error occured : "+h)}}else(a.httpsNoRoot||a.isAddFcm)&&b(),a.ffoxHttps=1,a.isSubDomain||a.displayElementsOnPrompt(),a.sendEnrHit("prompted",1);else"granted"===Notification.permission?(a.ag=1,"subDomain"===d?self!=top&&(a.httpsNoRoot||(c=a.getStorage("iztoken"),""!=c?a.sendMessage("izag",c,"parent"):a.sendMessage("izag",1,"parent")),a.log("ag")):a.httpsNoRoot&&(a.addMsgReciever(),a.subFrame()),a.log("ag_cc")):"denied"===Notification.permission&&(a.ad=1,"subDomain"===d?(self==top?a.sendMessage("izad",1,"opener"):a.sendMessage("izad",1,"parent"),a.popupNotice(a.alreadyDeniedMsg),a.closePopWindow()):a.sendEnrHit("already_denied",1),a.log("ad"))};a.pushSubscription=function(b,c){if("Notification"in window){if("chrome"==b){try{navigator.permissions.query({name:"notifications"}).then(function(b){if("prompt"===b.state)"subDomain"===c?0!==a.promptType?self!=top?a.sendMessage("switchPrompt",1,"parent"):(a.popupNotice(a.clickOnAllowMsg),a.sendMessage("prompted",1,"opener"),1!=a.deviceType&&Notification.requestPermission().then(function(b){"default"===b&&(a.sendMessage("promptclose",1,"opener"),a.closePopWindow())})):(a.log("Prompted Http"),a.sendMessage("prompted",1,"parent"),Notification.requestPermission().then(function(b){"default"===b&&0===a.promptType&&self!=top&&a.sendMessage("promptclose",1,"parent")})):"default"===c&&(a.log("Prompted Https"),a.sendEnrHit("prompted",1),a.locationPrompt&&1==a.deviceType&&navigator.geolocation.getCurrentPosition(function(){}),Notification.requestPermission(),a.isSubDomain||a.displayElementsOnPrompt()),b.onchange=function(){a.closeHttpsBranding();"granted"===b.state?("subDomain"===c?a.sendMessage("allowed",1,"parent"):"default"===c&&a.httpsNoRoot&&(a.noRootVersionHandler(),a.addMsgReciever(),a.subFrame()),a.log("Granted"),1!=a.deviceType&&(a.subscribe(),a.log("chrome mobile subscribe"))):"denied"===b.state&&"subDomain"===c&&(self==top?a.sendMessage("denied",1,"opener"):a.sendMessage("denied",1,"parent"),a.popupNotice(a.blockedMsg),a.log("Denied"),a.closePopWindow())};else if("granted"===b.state){a.ag=1;if("subDomain"===c){if(self!=top){if(!a.httpsNoRoot){var d=a.getStorage("iztoken");""!=d?a.sendMessage("izag",d,"parent"):a.sendMessage("izag",1,"parent")}a.log("ag")}}else"default"===c&&a.httpsNoRoot&&(a.addMsgReciever(),a.subFrame());1!=a.deviceType&&(a.subscribe(),a.log("chrome mobile ag subscribe"))}else"denied"===b.state&&(a.ad=1,"subDomain"===c?(self==top?a.sendMessage("izad",1,"opener"):a.sendMessage("izad",1,"parent"),a.popupNotice(a.alreadyDeniedMsg),a.closePopWindow()):"default"===c&&a.sendEnrHit("already_denied",1))})}catch(d){a.log("Unable to read notification permissions")}if("subDomain"==c&&0!=a.promptType&&self!=top&&"default"==Notification.permission)return}else if("firefox"==b||a.isAddFcm)"Notification"in window&&"function"===typeof Notification.requestPermission?a.statusHandler(b,Notification.permission,c):a.log("This browser does not support desktop notification");"serviceWorker"in navigator?(a.isSubDomain||""==a.swScope?navigator.serviceWorker.register(a.serviceWorker).then(a.initialiseState)["catch"](function(b){a.isSubDomain||self!=top||1!=a.branding&&1!=a.overlay||a.closeHttpsBranding();a.log(b)}):navigator.serviceWorker.register(a.serviceWorker,{scope:a.swScope}).then(a.initialiseState)["catch"](function(b){a.isSubDomain||self!=top||1!=a.branding&&1!=a.overlay||a.closeHttpsBranding();a.log(b)}),a.isSubDomain||(a.setIndexedDb("gaId"),a.setIndexedDb("sysEvents"))):a.log("Service workers are not supported in this browser.");try{"chrome"==b&&1!=a.deviceType?a.log("chrome mobile subscribe ignore"):a.subscribe()}catch(d){a.log("Unable To Subscribe")}}};a.sendMessage=function(b,c,d,e,g){if(2!=a.promptType||"allowed"!=b&&"denied"!=b)b={k:b,v:c},void 0!=e&&""!=e&&(b.bkey=e),void 0!=g&&(b.swversion=g),e={izootoMsg:b},"parent"===d?window.parent.postMessage(JSON.stringify(e),"*"):"opener"===d?window.opener.postMessage(JSON.stringify(e),"*"):d.contentWindow.postMessage(JSON.stringify(e),"*")};a.setIzstatus=function(b){a.cookieLess?a.setStorageWithTime("izstatus",b):(date=new Date,2==b&&(a.tokenExpire*=100),date.setTime(date.getTime()+1E3*a.tokenExpire),document.cookie="izstatus="+b+";path=/;max-age="+a.tokenExpire+";expires="+date.toGMTString()+";"+a.cDomain)};a.msgReciever=function(b){var c=0,d={};try{d=JSON.parse(b)}catch(f){}void 0!=d.izootoMsg&&(d=d.izootoMsg,void 0!=d.izrmstatus?a.rmSubsReceiver(d.izrmstatus):void 0!=d.k&&"izMasterToFrame"==d.k?a.setMasterStorage(d.v):void 0!=d.k&&"izMasterToParent"==d.k?a.masterConfigReciver(d.v):void 0!=d.k&&"izCidToParent"==d.k?a.setizConfig("IZCID",d.v):void 0!=d.izPermsStatus?a.subscriberStatusHandler(d.izPermsStatus):(1==a.httpsNoRoot||1!=a.promptType&&2!=a.promptType?"allowed"==d.k?(a.openDialog(),d.swversion&&(a.swversion=d.swversion),a.setStorage("izid",a.unid),a.sendEnrHit(d.k,d.v)):void 0!=d.bkey?(b=a.getStorage("iztoken"),a.setStorage("iztoken",d.bkey),a.httpsNoRoot?1==a.ag?(a.sendEnrHit(d.k,d.v,d.bkey),a.setIzstatus(1)):a.sendEnrHit("allowed",d.v,d.bkey):(a.sendEnrHit(d.k,d.v,d.bkey),1!=a.isReSubscribe&&""!=b||a.updateSubscription("subscribe",d.bkey))):"bKey"==d.k?(d.swversion&&(a.swversion=d.swversion),a.setStorage("iztoken",d.v),a.sendEnrHit(d.k,d.v),a.bkeySent=1,a.processQueue()):c=1:void 0!=d.bkey?(a.getStorage("iztoken"),d.swversion&&(a.swversion=d.swversion),a.setStorage("iztoken",d.bkey),a.processQueue(),a.sendEnrHit(d.k,d.v,d.bkey),"allowed"==d.k?a.setIzstatus(1):1==a.isReSubscribe?a.updateSubscription("subscribe",d.bkey):(a.updateSubscription("subscribe",d.bkey,!0),a.setIzstatus(1))):"switchPrompt"==d.k?(a.optinDialog(),a.removeStorage("iztoken")):"denied"==d.k&&a.setIzstatus(2),"prompted"==d.k?(a.getStorage("iztoken"),a.removeStorage("iztoken"),a.removeStorage("izfcmtoken"),a.sendEnrHit(d.k,d.v)):"popclose"==d.k?a.pixelEventReciever("popclose",!1):"promptclose"==d.k?(a.pixelEventReciever(d.k,!1),a.sendEnrHit("promptclose","1")):"denied"==d.k?a.sendEnrHit(d.k,d.v):"izag"==d.k?(c=a.getStorage("iztoken"),""!=c&&0===a.bkeySent?(a.sendEnrHit("already_granted",1,c),a.bkeySent=1):1!==d.v?(a.sendEnrHit("already_granted",1,d.v),a.bkeySent=1):1==a.promptType?a.optinDialog():""==c&&a.pixelEventReciever("already_unsubscribed",!1),a.setIzstatus(1)):"izad"==d.k?(a.sendEnrHit("already_denied",1),a.setIzstatus(2)):1==c&&a.sendEnrHit(d.k,d.v)))};a.setManifest=function(){try{if(0==a.subType){var b=a.manifest,c=document.getElementsByTagName("head")[0],d=document.createElement("link");d.rel="manifest";d.href=b;c.appendChild(d);a.log("manifest")}}catch(f){}};a.sendSubscriptionUpdate=function(b,c,d){url=0==c?a.parseEpConf("SoftSubscribe"):2==c?a.parseEpConf("SoftUnsubscribe"):a.supURL;a.httpRequest(url,d,{},{method:"post",data:"pid="+a.client+"&bKey="+b+"&btype="+a.browser+"&dtype="+a.deviceType+"&bver="+a.browserVer+"&pte="+a.subType+"&os="+a.os+"&pt="+a.promptType+"&ge="+a.gdprPromptStatus+"&action="+c})};a.updateSubscription=function(b,c,d){c=void 0===c?a.getStorage("iztoken"):c;c=a.getBrowserKeyFromToken(c);"subscribe"==b?(3==a.getStorage("izstatus")&&a.removeStorage("izstatus"),""!=c?(a.sendSubscriptionUpdate(c,0),0===a.isReSubscribe&&void 0===d?a.pixelEventReciever("subscribed",!0):a.isReSubscribe=0):(a.isReSubscribe=1,a.isSafari||1==a.isSdkHttps&&"https:"==a.locationProtocol?a.initIzooto():(a.promptType=1,a.openPopup()))):"unsubscribe"==b&&""!=c&&a.sendSubscriptionUpdate(c,2,function(){a.setStorage("izstatus",3);a.pixelEventReciever("unsubscribed",!1)})};a.addMsgReciever=function(){if(1!=a.isMsgReciever){a.isMsgReciever=1;try{window.addEventListener("message",function(b){if((-1<a.sourceOrigin.indexOf(b.origin)||""!=a.sourceOriginAlt&&-1<a.sourceOriginAlt.indexOf(b.origin)||-1<a.masterDomain.indexOf(b.origin)||3==a.isSubDomain||"https://cdn.izooto.com"==b.origin)&&b.data)try{a.msgReciever(b.data)}catch(c){}})}catch(b){}}};a.startSubscription=function(b){if("chrome"==b||"opera"==b)a.incognitoChecked=1;if("http:"===a.locationProtocol||"https:"===a.locationProtocol&&1!=a.isSdkHttps&&1!=a.isSubDomain){if(!a.getStorage("izpt")||a.isSubDomain){var c=a.getStorage("izstatus");if(0==a.httpContentLoaded||2!=a.promptType){a.addMsgReciever();a.httpContentLoaded=1;var d=a.getStorage("iztoken");if(1===a.tokenFilter){if(""!=d){a.sendEnrHit("already_granted",1,d);return}}else if(""!=c){if(1==c){if(""==d){a.pixelEventReciever("already_unsubscribed",!1);return}a.sendEnrHit("already_granted",1,d)}else 2==c?a.pixelEventReciever("already_denied",!1):3==c&&a.pixelEventReciever("already_unsubscribed",!1);return}if(""!=d||"https:"==a.locationProtocol){a.validateToken(a.getBrowserKeyFromToken(d));return}}c=a.getStorage("iztoken");1===a.promptType?""==c&&a.optinDialog():2==a.promptType?a.calledManually&&""==c&&a.openPopup():a.subFrame()}}else 1===a.isSubDomain&&"https:"==a.locationProtocol?(a.setManifest(),setTimeout(function(){self==top&&window.close()},5E4),a.subscriptionType="subDomain",0!=a.promptDelay&&"default"==Notification.permission&&0==a.promptType&&self!=top?setTimeout(function(){a.pushSubscription(b,a.subscriptionType)},a.promptDelay):a.pushSubscription(b,a.subscriptionType)):"https:"==a.locationProtocol&&(c=a.getStorage("izstatus"),3==c&&"default"!=Notification.permission?a.pixelEventReciever("already_unsubscribed",!1):1==a.httpsNoRoot&&"granted"==Notification.permission&&1==c&&""!=a.getStorage("iztoken")?a.pixelEventReciever("already_granted",!1):(a.setManifest(),a.subscriptionType="default",0!=a.promptDelay&&"default"==Notification.permission&&0==a.promptType?setTimeout(function(){a.pushSubscription(b,a.subscriptionType)},a.promptDelay):2==a.promptType&&"default"==Notification.permission?a.calledManually&&a.pushSubscription(b,a.subscriptionType):a.pushSubscription(b,a.subscriptionType)))};a.reSubscribeIzooto=function(){try{1!=a.reSubFlag&&(a.reSubFlag=1,navigator.serviceWorker.ready.then(function(b){b.pushManager.getSubscription().then(function(b){b&&b.unsubscribe().then(function(b){a.log("Unsubbed");a.bkeySent=0;a.subscribe()})["catch"](function(b){a.log("Unsubscription failed : "+b)})})["catch"](function(b){a.log("Get subscription failed : "+b)})})["catch"](function(a){}))}catch(b){}};a.reSubscribeToken=function(b){try{void 0!=b.name&&"invalidstateerror"==b.name.toLowerCase()&&a.reSubscribeIzooto()}catch(c){}};a.promptUser=function(){2!=a.promptType&&(a.promptType=2,a.dialogDesign="",a.processQueue());a.calledManually=!0;a.initIzooto()};a.shopifyCartTracker=function(b,c){a.log(b);a.log("Purge :"+c);try{var d=JSON.parse(b.responseText);a.log(d);var e=d.token}catch(n){a.log("[shopifyMapper catch]"),a.log(n)}var g=a.getStorage("iz_sh_cart_v2");if(void 0!=e&&""!=e){d="iz_sh_cart_v2="+
e;var k=new Date;k.setTime(k.getTime()+864E5);k="expires="+k.toUTCString();if(e!=g||c){g=a.getStorage("iztoken");var h=0;try{g=JSON.parse(g),1<Object.keys(g).length&&(h=1)}catch(n){}a.log("[Mapper hit]");var l=a.parseEpConf("ShopifyMapper"),m="bkey="+a.getBrowserKeyFromToken(a.getStorage("iztoken"));1==h&&(m=m+"&auth="+g.keys.auth+"&pk="+g.keys.p256dh);m+="&btype="+a.browser;m+="&dtype="+a.deviceType;m+="&pid="+a.client;m+="&shopify_token="+e;a.isSafari||(m+="&"+a.endPointParamExtract(a.getStorage("iztoken")));m+="&pte="+a.subType;try{a.httpRequest(l,"",{},{method:"post",data:m+"&custom_topic=custom-js-mapper"}),document.cookie=d+";path=/;"+a.cDomain+k}catch(n){a.log("Pixel failed"+l)}}}};a.shopifyFix=function(){try{var b=document.createElement("img");b.style.width="0px";b.style.height="0px";b.src=document.location.protocol+"//"+document.location.hostname+a.manifest}catch(c){}};a.shopifyInit=function(b){var c=!1;void 0!=b&&(c=b);if(2==a.isShopify)a.shopifyCart(),a.log("Old Shopify");else if(1==a.isShopify){a.log("New Shopify");b=5*Math.random();var d=new XMLHttpRequest;d.addEventListener("load",function(b){a.shopifyCartTracker(d,c)});d.open("GET","/cart.js?"+b);d.send()}};a.shopifyCart=function(){var b=a.getStorage("cart");void 0!==b&&""!==b&&(-1!=b.indexOf("=")&&(b=b.split("=")[1]),b!==a.getStorage("iz_sh_cart")&&"ckout="!=b&&(a.setCookie("iz_sh_cart",b),_izq.push(["event","add_to_cart",{cart_id:b}]),a.log("sent add to cart event : "+b)))};a.resetProductCookie=function(){a.setCookie("iz_last_sh_variant","")};a.checkIfVariantChanged=function(){var b=a.getCookie("iz_last_sh_variant"),c=ShopifyAnalytics.meta.selectedVariantId;a.log("Product heartbeat");if(1==a.sentShopifyProduct)return!1;if("undefined"===typeof c)return a.sentShopifyProduct=1,!0;if(c==b)return!1;a.log("set cookie of iz_last_sh_variant");a.setCookie("iz_last_sh_variant",c);return!0};a.listenToProductVariant=function(b){a.checkIfVariantChanged()&&(a.log("variant modified"),b());setTimeout(function(){a.listenToProductVariant(b)},5E3)};a.getShopifyModule=function(){var b="";try{if(b=ShopifyAnalytics.meta.page.pageType)return b}catch(f){a.debug&&console.warn("ShopifyAnalytics not available, parsing URL")}b=location.hostname;var c=location.pathname.split("/"),d=c[1];c=c[2];a.log("partOne :"+c+", partZero:"+d);if(""===d)return"home";if("cart"===d)return"cart";if("account"===d&&"orders"===c||"account"===d&&!d)return"orders";if("checkout.shopify.com"===b||"checkouts"===c)return"checkout";if("undefined"!=typeof __st&&__st.s){b=__st.partZero.split("-")[0];if("collections"===b)return"collection";if("products"===b)return"product"}};a.sendShopifyProductViewEvent=function(){var b=ShopifyAnalytics.meta.selectedVariantId,c=location.pathname.split("/"),d=c[c.length-1];a.httpRequest("/products/"+d+"?izreq=product",function(c){try{var e=JSON.parse(c)}catch(l){a.log("Could not fetch data from product API")}if("object"==typeof e&&""!=a.getStorage("iztoken")){e=e.product;c=e.variants;var f=a.getStorage("iztoken");try{JSON.parse(f)}catch(l){}f=a.shopifyApi+"?p=p";var h="pid="+a.client;h+="&"+a.bkeyParamExtract(a.getStorage("iztoken"));h+="&btype="+a.browser;a.isSafari||(h+="&"+a.endPointParamExtract(a.getStorage("iztoken")));h+="&pte="+a.subType;h=h+"&custom_topic=product/view&product_id="+e.id.toString();h+="&product_title="+e.title;h+="&product_handle="+d;h+="&product_page="+encodeURIComponent(window.location.href);h+="&product_type="+e.product_type;a.log(e);null!=e.image&&null!=e.image.src&&(h+="&product_image="+e.image.src);for(index in c)if(e=c[index],e.id==b){h+="&product_price="+
e.price;break}a.httpRequest(f,function(b){a.log(b)},{},{method:"post",data:h});a.log("Shopify product view event attempted successfully.")}},{Accept:"application/json"})};a.sendShopifyCollectionViewEvent=function(){var b=location.pathname.split("/"),c=b.indexOf("collections");if(-1==c)a.log("unable to identify collection");else{var d=b[c+1];"all"==d?a.log("Ignoring collection view event for:all"):a.httpRequest("/collections/"+d+"?izreq=collections",function(b){try{var c=JSON.parse(b)}catch(h){a.log("Could not fetch data from collection API")}if("object"==typeof c&&""!=a.getStorage("iztoken")){b=c.collection;c=a.shopifyApi+"?p=p";var e=a.getStorage("iztoken");try{JSON.parse(e)}catch(h){}e="pid="+a.client;e+="&"+a.bkeyParamExtract(a.getStorage("iztoken"));e+="&btype="+a.browser;a.isSafari||(e+="&"+a.endPointParamExtract(a.getStorage("iztoken")));e+="&pte="+a.subType;e=e+"&custom_topic=collection/view&collection_id="+b.id.toString();e+="&collection_handle="+d;e+="&collection_title="+b.title;e+="&collection_page="+encodeURIComponent(window.location.href);void 0!=b.image&&void 0!=b.image.src&&(e+="&collection_image="+b.image.src);a.httpRequest(c,function(b){a.log(b)},{},{method:"post",data:e});a.log("Shopify collection view event attempted successfully.")}},{Accept:"application/json"})}};a.checkAndSendShopifyEvents=function(b){var c=a.getShopifyModule();a.log("detected shopify module:"+c);switch(c){case "collection":a.log("Inside collection view case");a.sendShopifyCollectionViewEvent();break;case "product":a.log("Inside product view case"),void 0!=b&&b?(a.log("Now listening to product view event"),a.listenToProductVariant(a.sendShopifyProductViewEvent)):a.sendShopifyProductViewEvent()}};a.rmSubsReceiver=function(b){3==b&&(a.setMDConfig(a.mdJson,a.permsDomain,b),"object"==typeof a.sourceOriginAlt&&a.mdIndex<a.sourceOriginAlt.length&&a.permsHandler(a.sourceOriginIndex,a.sourceOriginAlt.length-1,a.mdJson))};a.rmSubsInFrame=function(){var b={izootoMsg:{izrmstatus:3}};try{var c=a.getStorage("iztoken");""!=c?(c=a.getBrowserKeyFromToken(c),a.sendSubscriptionUpdate(c,2,function(){window.parent.postMessage(JSON.stringify(b),"*")})):window.parent.postMessage(JSON.stringify(b),"*")}catch(d){}};a.sendPermissionStatus=function(){var a={izPermsStatus:{}};a.izPermsStatus.status=0;"Notification"in window&&(a.izPermsStatus.status="granted"==Notification.permission?1:0);window.parent.postMessage(JSON.stringify({izootoMsg:a}),"*")};a.getMDConfig=function(a,c){izmd=a;return void 0!=izmd[c]?izmd[c]:""};a.setMDConfig=function(b,c,d){b=""!=b?b:{};b[c]=d;a.mdJson=b;b=JSON.stringify(b);a.setStorage("izmd",b)};a.permsHandler=function(b,c,d){for(;b<=c;b++){a.permsDomain=a.sourceOriginAlt[b];var e=a.getMDConfig(d,a.permsDomain);a.sourceOriginIndex=b+1;if(3==e||2==e){if(b==c)break}else{a.addMsgReciever();a.subFrame(a.permsDomain+"?action=izrmsubs","izAltSubFrame"+b);break}}};a.rmSubs=function(){a.mdJson="";a.mdIndex=0;a.md=a.getStorage("izmd");var b=a.md;if(""!=b)try{b=JSON.parse(b),a.mdJson=b}catch(c){}"object"==typeof a.sourceOriginAlt&&1<a.sourceOriginAlt.length?a.permsHandler(0,a.sourceOriginAlt.length-1,a.mdJson):(a.permsDomain="object"==typeof a.sourceOriginAlt?a.sourceOriginAlt[0]:a.sourceOriginAlt,b=a.getMDConfig(a.mdJson,a.permsDomain),3!=b&&2!=b&&(a.addMsgReciever(),a.subFrame(a.permsDomain+"?action=izrmsubs","izAltSubFrame")))};a.db={};a.db.instance="";a.db.addUpdate=function(a,c,d){return new Promise(function(b,e){var f=a.transaction(["options"],"readwrite").objectStore("options").put({key:c,val:d});f.onsuccess=function(a){b(c+" added to db.")};f.onerror=function(a){e("Unable to add data in db!")}})};a.db.getData=function(b,c,d){return new Promise(function(e,g){var f=b.transaction([c]).objectStore(c).get(d);f.onerror=function(a){g("Unable to retrieve data from db!")};f.onsuccess=function(b){b="";f.result?b=f.result:a.log("Not found in db!");e(b)}})};a["debugger"]={};a["debugger"].status=0;a["debugger"].successCode="color: #228B22";a["debugger"].errCode="color: #FF0000";a["debugger"].infoCode="background: #ffffcc; color: #222";a["debugger"].gcmValidator="https://api.izooto.com/validate-gcm/";a["debugger"].host=document.location.protocol+"//"+document.location.hostname;a["debugger"].log=function(a,c){c||(c="");console.info("%c"+a,c)};a["debugger"].requestFile=function(a,c,d){var b=new XMLHttpRequest,e=Math.random();a+=a.includes("?")?"&":"?";b.onreadystatechange=function(){if(4==this.readyState){var a=b.responseText;200==this.status?c(this.status,a):d(this.status,a)}};b.open("GET",a+e,!0);b.send()};a["debugger"].validateSw=function(b){var c=a["debugger"].msgSet,d=a["debugger"].host;a["debugger"].requestFile(a.serviceWorker,function(e,g){a["debugger"].log(c.sw_t+c.sw_f.replace("{sw}",d+a.serviceWorker),a["debugger"].successCode);a["debugger"].validateManifest(b)},function(e,g){a["debugger"].log(c.sw_t+c.sw_nf.replace("{sw}",d+a.serviceWorker),a["debugger"].errCode);a["debugger"].err=1;a["debugger"].validateManifest(b)})};a["debugger"].msgSet={code_t:"iZooto JS code: ",code_f:"found",code_nf:"missing. Learn more here: http://bit.ly/2WHcP4a",sw_t:"Service Worker JS: ",sw_f:"found at {sw}",sw_nf:"missing from {sw} , Learn more here: http://bit.ly/2K0yGSs",mfst_t:"Manifest file: ",mfst_f:"found at {m}",mfst_nf:"missing form {m} , Learn more here: http://bit.ly/2K0yGSs",multi_mfst:"multiple manifest files found. Learn more here: http://bit.ly/2WCd2FC",gcm_t:"gcm_sender_id: ",gcm_nf:"missing in the manifest file. Learn more here: http://bit.ly/2WCd2FC",fallback:"FCM project: issue with your FCM project.",integration:"iZooto integration is working fine on your website.",integration_f:"iZooto integration is incomplete. Contact support@izooto.com to get assistance.",plugin:"You have integrated iZooto using the {plg} plugin.",ev:"sent to iZooto"};a["debugger"].validateGCM=function(b,c){a.httpRequest(a["debugger"].gcmValidator,function(b){var d="fail";try{b=JSON.parse(b)}catch(k){}var e=b.response?b.response:"Something went wrong";"success"==b.status?(d=b.status,a["debugger"].log("GCM Sender ID Validation "+d,a["debugger"].successCode),c(!0)):(a["debugger"].log("GCM Sender ID Validation "+d+" , "+e,a["debugger"].errCode),c(!1))},{},{method:"post",data:"pid="+a.client+
("&gcm="+b)})};a["debugger"].validateManifest=function(b){for(var c="",d=a["debugger"].msgSet,e=a["debugger"].host,g=document.getElementsByTagName("link"),k=0;k<g.length;k++){var h=g[k],l=h.getAttribute("href");h=h.getAttribute("rel");null!=h&&"manifest"==h&&l!=a.manifest&&(a["debugger"].log(d.mfst_t+d.multi_mfst,a["debugger"].errCode),a["debugger"].err=1)}a["debugger"].requestFile(a.manifest,function(f,g){a["debugger"].log(d.mfst_t+d.mfst_f.replace("{m}",e+a.manifest),a["debugger"].successCode);try{c=JSON.parse(g),c=c.gcm_sender_id?c.gcm_sender_id:"",""==c?(a["debugger"].log(d.gcm_t+d.gcm_nf,a["debugger"].errCode),b(!1)):a["debugger"].validateGCM(c,b)}catch(p){a["debugger"].log(d.gcm_t+d.gcm_nf.replace("{m}",e+a.manifest),a["debugger"].errCode)}},function(c,f){a["debugger"].log(d.mfst_t+d.mfst_nf.replace("{m}",e+a.manifest),a["debugger"].errCode);b(!1)})};a["debugger"].getScript=function(){for(var a=document.getElementsByTagName("script"),c=/cdn.izooto.com\/scripts\/[^\/]*.js/,d=0;d<a.length;d++){var e=a[d];e=e.getAttribute("src");if(null!=e&&c.test(e))return e}return null};a["debugger"].init=function(){a["debugger"].err=0;var b=a["debugger"].msgSet;console.clear();a["debugger"].log("-".repeat(20)+"iZooto Debug Mode"+"-".repeat(20));a["debugger"].status=1;a["debugger"].log("Verifying iZooto integration on your website",a["debugger"].infoCode);var c=function(){1==a["debugger"].err?a["debugger"].log(b.integration_f,a["debugger"].errCode):a["debugger"].log(b.integration,a["debugger"].successCode)},d="";1==window.is_wp?d="Wordpress":1==a.isShopify?d="Shopify":1==a.isMagento&&(d="Magento");""!=d&&a["debugger"].log(b.plugin.replace("{plg}",d),a["debugger"].successCode);d=a["debugger"].getScript();null!=d?(a["debugger"].log(b.code_t+b.code_f+"("+d+")",a["debugger"].successCode),1==a.isSdkHttps?a["debugger"].validateSw(function(b){0==b&&(a["debugger"].err=1);c()}):c()):(a["debugger"].err=1,a["debugger"].log(b.code_t+b.code_nf,a["debugger"].errCode),c())};a.db.init=function(b){return new Promise(function(b,d){""!=a.db.instance&&b(a.db.instance);var c=indexedDB.open("izooto",2);c.onerror=function(a){d("DB not load")};c.onsuccess=function(d){a.db.instance=c.result;a.log("success:: "+a.db.instance);b(a.db.instance)};c.onupgradeneeded=function(a){a=a.target.result;a.createObjectStore("options",{keyPath:"key"});a.createObjectStore("swEvents",{keyPath:"eventName"})}})};a.noRootVersionHandler=function(){a.db.init().then(function(b){a.db.addUpdate(b,"noRootAllowed",1).then(function(b){a.log(b)})["catch"](function(b){a.log(b)})})["catch"](function(b){a.log(b)})};a.setIndexedDb=function(b){"gaId"==b&&1!=a.gaIdFlag||"sysEvents"==b&&1!=a.sysEventsFlag?a.log(b+" :: not saved"):a.db.init().then(function(c){a.db.getData(c,"options",b).then(function(d){((a.dd=d)&&!d.hasOwnProperty("val")||d.val!=a[b])&&a.db.addUpdate(c,b,a[b]).then(function(b){a.log(b)})["catch"](function(b){a.log(b)})})["catch"](function(b){a.log(b)})})["catch"](function(b){a.log(b)})};a.fixForSubscribers=function(){navigator.serviceWorker.ready.then(function(b){b.pushManager.getSubscription().then(function(b){var c=a.getStorage("iztoken");c=a.getBrowserKeyFromToken(c);var e=b.endpoint;(0<=e.indexOf("fcm.googleapis.com")?e.substring(36):e.substring(40))!=c&&(a.forceTokenSync=1,a.subscriptionType="default",a.setStorage("iztoken",JSON.stringify(b)),a.sendSubscriptionToServer(b))})})};a.urlParse=function(){var b=document.createElement("a");b.href=document.location.href;var c=b.pathname;b=b.search;c=c.substring(1,c.length-1).split("/");a.izParseQuery(b);return c};a.initIzooto=function(){if(1===a.izootoStatus&&(a.currentToken=a.getBrowserKeyFromToken(a.getStorage("iztoken")),"https:"==a.locationProtocol&&3==a.deviceType&&a.isChrome&&"granted"===Notification.permission&&""==a.masterDomain&&a.fixForSubscribers(),!(a.isEdge&&a.isMobile()||a.isUcb)))if(2==a.isSubDomain&&self!=top)a.rmSubsInFrame();else if(4==a.isSubDomain&&self!=top)a.sendPermissionStatus();else{if(!a.isSubDomain&&a.autoPrompt){try{if(window.self!=window.top){a.processQueue();return}}catch(c){}if(""!=a.allowedDomain&&0>a.allowedDomain.indexOf(a.locationProtocol+
"//"+document.location.hostname)&&!a.isSubDomain)return;1==a.enableEnricher&&""!=a.enricherSrc&&a.loadEnricher();0==a.isShopify||a.isSubDomain||a.shopifyFix();a.detectAutoPrompt()}a.processQueue();if(1!=a.promptType||a.isSubDomain||!a.isSdkHttps||"https:"!=a.locationProtocol||"default"!=Notification.permission||a.calledManually||a.isSafari){if(!a.autoPrompt||a.isSubDomain||a.isReSubscribe||!a.getStorage("izDl")||!("https:"==a.locationProtocol&&a.isSdkHttps&&"default"==Notification.permission||"http:"==a.locationProtocol&&!a.getStorage("iztoken")))if(a.isSafari){if(""==a.masterDomain||window.location.origin==a.masterDomain)"complete"===document.readyState?(a.log("DOM has already loaded, Checking safari in 0.30 seconds"),setTimeout(function(){a.checkSafariPermission()},300)):window.addEventListener("load",function(){a.log("DOM has loaded now, checking in 0.3 secs");setTimeout(function(){a.checkSafariPermission()},300)},!1)}else a.isChrome&&("http:"==a.locationProtocol||"serviceWorker"in navigator)?1==a.incognitoChecked?a.startSubscription("chrome"):a.incog(function(b){b?a.pixelEventReciever("browser",!1):a.startSubscription("chrome")}):a.isFirefox&&("http:"==a.locationProtocol||"serviceWorker"in navigator||1==a.isSubDomain)?(b=indexedDB.open("test"),b.onerror=function(){},b.onsuccess=function(){a.startSubscription("firefox")}):a.isOpera?1==a.incognitoChecked?a.startSubscription("opera"):a.incog(function(b){b?a.pixelEventReciever("browser",!1):a.startSubscription("opera")}):a.isUcb?a.startSubscription("ucb"):a.isEdge?(window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent)&&a.startSubscription("edge"):a.pixelEventReciever("browser",!1)}else if(a.autoPrompt=!1,"serviceWorker"in navigator&&(a.isChrome||a.isFirefox||a.isAddFcm))if(a.isChrome||a.isOpera)a.incog(function(b){b?a.pixelEventReciever("browser",!1):a.optinDialog()});else if(a.isEdge)(window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent)&&a.optinDialog();else if(a.isFirefox){var b=indexedDB.open("test");b.onerror=function(){};b.onsuccess=function(){a.optinDialog()}}else a.optinDialog();else a.pixelEventReciever("browser",!1)}};a.loadOptin=function(){a.defaultOptinDesign="<style>@-webkit-keyframes izootobounceInDown{60%, 75%, 90%, from, to{-webkit-animation-timing-function: cubic-bezier(.215, .61, .355, 1) ; animation-timing-function: cubic-bezier(.215, .61, .355, 1);}0%{opacity: 0 ; -webkit-transform: translate3d(-50%, -3000px, 0) ; transform: translate3d(-50%, -3000px, 0);}60%{opacity: 1 ; -webkit-transform: translate3d(-50%, 25px, 0) ; transform: translate3d(-50%, 25px, 0);}75%{-webkit-transform: translate3d(-50%, -10px, 0) ; transform: translate3d(-50%, -10px, 0);}90%{-webkit-transform: translate3d(-50%, 5px, 0) ; transform: translate3d(-50%, 5px, 0);}to{-webkit-transform: translate3d(-50%, 0, 0) ; transform: translate3d(-50%, 0, 0);}}@keyframes izootobounceInDown{60%, 75%, 90%, from, to{-webkit-animation-timing-function: cubic-bezier(.215, .61, .355, 1) ; animation-timing-function: cubic-bezier(.215, .61, .355, 1);}0%{opacity: 0 ; -webkit-transform: translate3d(-50%, -3000px, 0) ; transform: translate3d(-50%, -3000px, 0);}60%{opacity: 1 ; -webkit-transform: translate3d(-50%, 25px, 0) ; transform: translate3d(-50%, 25px, 0);}75%{-webkit-transform: translate3d(-50%, -10px, 0) ; transform: translate3d(-50%, -10px, 0);}90%{-webkit-transform: translate3d(-50%, 5px, 0) ; transform: translate3d(-50%, 5px, 0);}to{-webkit-transform: translate3d(-50%, 0, 0) ; transform: translate3d(-50%, 0, 0);}}#izooto-subscription-prompt .izanimated{-webkit-animation-duration: 1s ; animation-duration: 1s ; -webkit-animation-fill-mode: both ; animation-fill-mode: both ;}#izooto-subscription-prompt .iz_prompt_containr{webkit-animation-name: izootobounceInDown ; animation-name: izootobounceInDown ; webkit-animation-duration: .8s ; animation-duration: .8s ; -webkit-animation-fill-mode: none ; animation-fill-mode: none ; position: fixed ; top: 0 ; left: 50% ; background: #f9f9f9 ; width: 430px ; height: auto ; padding: 0px 0 ; border-radius: 0 0 4px 4px ; font-family: 'Open Sans', sans-serif ; z-index: 9999999999 ; box-shadow: 0 0 30px rgba(0, 0, 0, .1) ; transform: translate(-50%, 0) ; border: 1px solid #e6e6e6 ; padding-bottom: 6px ;}#izooto-subscription-prompt .prompt_continer_pdng .iz_img_container{float: left ; width: 17% ; height: 100% ; padding-left: 10px}#izooto-subscription-prompt .iz_text_container .izooto-dialog-text{overflow: hidden ; text-overflow: ellipsis ; word-wrap: break-word ; color: #5a5a5a ; font-size: 14px ; font-weight: 700 ; line-height: 1.4em ; margin-bottom: 8px ; display: -webkit-box ; -webkit-line-clamp: 2 ; max-height: 42px ; -webkit-box-orient: vertical ; text-align: left}#izooto-subscription-prompt .prompt_continer_pdng .iz_text_container{width: 80% ; float: right ; color: #fff ; text-align: left;}#izooto-subscription-prompt .iz_text_container .iz_description{text-align: left; line-height: 16px; word-wrap: break-word ; text-overflow: ellipsis ; max-height: 30px ; display: -webkit-box ; -webkit-line-clamp: 2 ; -webkit-box-orient: vertical ; overflow: hidden ; word-wrap: break-word ; color: #878484 ; font-weight: 400 ; font-size: 12px ;}#izooto-subscription-prompt .iz_prompt_containr .iz_buttons_container{padding-top: 10px ; padding-right: 10px ; text-align: right ;}#izooto-subscription-prompt .iz_buttons_container a.iz_allow_button{white-space: nowrap; background: #0e53a1 ; display: inline-block ; text-align: center ; vertical-align: middle ; line-height: 1 ; font-size: 12px ; letter-spacing: 1px ; min-width: 85px ; max-width: 120px ; cursor: pointer ; background-image: none ; color: #fff ; padding: 10px 5px ; text-overflow: ellipsis ; border-radius: 4px ; overflow: hidden; text-decoration: none ;}#izooto-subscription-prompt .iz_buttons_container a.iz_allow_button:hover{background: #2973c5 ; color: #fff ;}#izooto-subscription-prompt .iz_buttons_container a.iz_block_button{margin: 6px ; white-space: nowrap; overflow: hidden; border: 1px solid #bdbdbd ; color: grey ; display: inline-block ; text-align: center ; vertical-align: middle ; line-height: 1 ; font-size: 12px ; letter-spacing: 1px ; min-width: 85px ; max-width: 120px ; cursor: pointer ; background-image: none ; background: 0 0 ; padding: 10px 5px ; text-overflow: ellipsis ; border-radius: 4px ; text-decoration: none ;}#izooto-subscription-prompt .iz_buttons_container a.iz_block_button:hover{color: #fff ; background: #bbb ;}#izooto-subscription-prompt .iz_prompt_containr .izbranding{width: auto; margin-right: 8px ; margin-bottom: -2px; float: right ;}#izooto-subscription-prompt .iz_prompt_containr .prompt_continer_pdng{width: 100%; padding: 10px 0px ; float: left ;}#izooto-subscription-prompt .iz_prompt_containr .pwrd-img{padding-left: 10px ; float: left ; margin-top: 2.6% ;}#izooto-subscription-prompt .iz_prompt_containr .d-display{display: block ;}#izooto-subscription-prompt .iz_prompt_containr .m-display{display: none ;}@media screen and (max-width:500px){#izooto-subscription-prompt .iz_prompt_containr .d-display{display: none ;}#izooto-subscription-prompt .iz_prompt_containr .m-display{display: block ;}#izooto-subscription-prompt .iz_text_container .izooto-dialog-text{font-size: 15px ; line-height: 20px ;}#izooto-subscription-prompt .iz_text_container .iz_description{line-height: 16px; font-size: 13px ; max-height: 30px ;}#izooto-subscription-prompt .iz_buttons_container a.iz_allow_button{font-weight: 600; min-width: 80px ; max-width: 100px ; white-space: nowrap ; overflow: hidden ; font-size: 12px ;}#izooto-subscription-prompt .iz_buttons_container a.iz_block_button{font-weight: 600; min-width: 80px ; max-width: 100px ; white-space: nowrap ; overflow: hidden ; font-size: 12px ;}#izooto-subscription-prompt .iz_prompt_containr{position: fixed ; top: auto ; bottom: 0px ; width: 100% ; padding: 10px 0 ; padding-bottom: 4px ;}#izooto-subscription-prompt .prompt_continer_pdng .iz_img_container{padding-left: 10px}#izooto-subscription-prompt .prompt_continer_pdng .iz_text_container{padding-right: 10px ; width: 74% ;}}@media only screen and (max-width: 800px) and (min-width: 601px){#izooto-subscription-prompt .iz_prompt_containr{webkit-animation-name: izootobounceInDown ; animation-name: izootobounceInDown ; webkit-animation-duration: .8s ; animation-duration: .8s ; -webkit-animation-fill-mode: none ; animation-fill-mode: none ; position: fixed ; top: 0 ; left: 50% ; background: #f9f9f9 ; width: 430px ; height: auto ; padding: 0px 0 ; border-radius: 0 0 4px 4px ; font-family: 'Open Sans', sans-serif ; z-index: 9999999999 ; box-shadow: 0 0 30px rgba(0, 0, 0, .1) ; transform: translate(-50%, 0) ; border: 1px solid #e6e6e6 ; padding-bottom: 6px ;}}</style><div id='izooto-subscription-prompt'> <div class='iz_prompt_containr izanimated izootobounceInDown'> <div class='prompt_continer_pdng izooto-inline'> <div class='iz_img_container'><img class='iz_img' src='{{--icon--}}' width='60' height='60'></div><div class='iz_text_container'> <div class='izooto-dialog-text'>{{--message--}}</div><div class='iz_description'>{{--subMessage--}}</div></div></div><div style='width: 100%;'> <a href='{{--poweredbysrc--}}' target='_blank' class='pwrd-img iz-powered-by d-display'><img src='https://cdnimg.izooto.com/optin/120x20-grey.png' class='izbranding'></a> <div class='iz_buttons_container'> <a onclick='_izooto.openPopup();' href='javascript:void(0)' class='iz_allow_button'>{{--btn2Txt--}}</a> <a onclick='_izooto.closeDialog();' href='javascript:void(0)' class='iz_block_button'>{{--btn1Txt--}}</a> </div><a href='{{--poweredbysrc--}}' target='_blank' class='pwrd-img2 iz-powered-by m-display'><img src='https://cdnimg.izooto.com/optin/120x20-grey.png' class='izbranding'></a></div></div></div>";1===a.promptType&&(void 0!=window.izOptinDesign&&(a.optInDesign=window.izOptinDesign),a.dialogDesign=""!=a.optInDesign?a.optInDesign:a.defaultOptinDesign,a.dialogDesign=a.loadDesign(a.promptDesign,a.dialogDesign))};a.optinCallback=function(b){"function"==typeof b&&(a.optinModule=new b,void 0!=a.optinModule.data&&(window.izOptinDesign=a.optinModule.data),a.openDialog(!0))};a.masterCallback=function(b){if(b){if(""!=a.masterDomain&&(b=a.getMasterStorage("bkey"),""==b||a.getBrowserKeyFromToken(JSON.stringify(b))!=a.getBrowserKeyFromToken(a.getStorage("iztoken")))){if(window.location.origin==a.masterDomain)b='{"iz_'+a.client+'":{"bkey":'+a.getStorage("iztoken")+',"subscribed_on":"'+a.masterDomain+'","user_properties":{}}}',a.setStorage("izooto",b);else if(self==top){b={};b.subscribed_on=window.location.origin;b.token=a.getStorage("iztoken");var c=document.getElementById("izMasterDomainFramePerms");a.sendMessage("izMasterToFrame",b,c);b='{"iz_'+a.client+'":{"bkey":'+a.getStorage("iztoken")+',"subscribed_on":"'+
window.location.origin+'","user_properties":{}}}';a.setStorage("izooto",b)}window._izq=window._izq||[];window._izq.push(["userProfile",{add:{subscribed_on_url:window.location.origin}}])}}else""!=a.masterDomain&&(window.location.origin==a.masterDomain?(b='{"iz_'+a.client+'":{"bkey":'+a.getStorage("iztoken")+',"subscribed_on":"'+a.masterDomain+'","user_properties":{}}}',a.setStorage("izooto",b)):self==top&&(b={},b.subscribed_on=window.location.origin,b.token=a.getStorage("iztoken"),c=document.getElementById("izMasterDomainFramePerms"),a.sendMessage("izMasterToFrame",b,c),b='{"iz_'+a.client+'":{"bkey":'+a.getStorage("iztoken")+',"subscribed_on":"'+window.location.origin+'","user_properties":{}}}',a.setStorage("izooto",b)),window._izq=window._izq||[],window._izq.push(["userProfile",{add:{subscribed_on_url:window.location.origin}}]))};a.masterConfigReciver=function(b){var c=b.token;""!=c?a.validateTokenMaster(a.getBrowserKeyFromToken(JSON.stringify(c)),function(c){try{if(void 0!==c.status)if(1===c.status){a.setIzstatus(1);var d='{"iz_'+
a.client+'":{"bkey":'+JSON.stringify(b.token)+',"subscribed_on":"'+b.subscribed_on+'","user_properties":{}}}';a.setStorage("izooto",d);a.setStorage("iztoken",JSON.stringify(b.token));a.processQueue()}else 0===c.status&&(a.removeStorage("izstatus"),a.initIzooto())}catch(g){}}):a.initIzooto()};a.getMasterStorage=function(b){var c="iz_"+a.client,d="";try{d=JSON.parse(a.getStorage("izooto"));var e=d[c]}catch(g){}return""==d||void 0==e?"":void 0!=e[b]?e[b]:""};a.masterDomainHandler=function(){1==a.getStorage("izstatus")?a.processQueue():(a.addMsgReciever(),a.subFrame(window._izooto.masterDomain+window._izooto.masterDomainPath+"?action=izcheckmaster&domain="+window.location.origin,"izMasterDomainFramePerms"))};a.setMasterStorage=function(b){a.setStorage("izooto",'{"iz_'+a.client+'":{"bkey":'+b.token+',"subscribed_on":"'+b.subscribed_on+'","user_properties":{}}}');a.setStorage("iztoken",b.token)};a.validateTokenMaster=function(b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var b=d.responseText;a.log(b);try{b=JSON.parse(b),void 0!=c&&c(b)}catch(g){}}};d.open("GET",a.ssUrl+"?s=1&bkey="+b+"&pid="+a.client,!0);a.log("validate token");d.send()};a.initMaster=function(){if(a.isChrome||a.isFirefox)if(3==a.isSubDomain&&self!=top){if(a.getStorage("izooto")){var b=a.getMasterStorage("bkey"),c=a.getMasterStorage("subscribed_on"),d={};d.token=b;d.subscribed_on=c}else d={token:"",subscribed_on:""};a.sendMessage("izMasterToParent",d,"parent");a.addMsgReciever()}else window.location.origin==a.masterDomain?(b=a.getMasterStorage("bkey"),""!=b?(c=a.getMasterStorage("subscribed_on"),c==a.masterDomain?a.initIzooto():1==a.getStorage("izstatus")?a.processQueue():a.validateTokenMaster(a.getBrowserKeyFromToken(JSON.stringify(b)),function(b){1==b.status?a.processQueue():a.initIzooto()})):a.initIzooto()):a.masterDomainHandler();else window._izooto.initIzooto()};a.setIzcidDb=function(b){a.db.init().then(function(c){a.db.addUpdate(c,"IZCID",b).then(function(b){a.log(b)})["catch"](function(b){a.log(b)})})["catch"](function(b){a.log(b)})};a.getIzCidPromise=function(){return new Promise(function(b,c){var d=window._izooto.getizConfig("IZCID");""==d?(a.addMsgReciever(),window._izooto.setCookieGlobalID(),d=window._izooto.getizConfig("IZCID"),""!=d?b(d):setTimeout(function(){b(d);a.setIzcidDb(d)},2500)):(b(d),a.setIzcidDb(d))})};1!=a.deviceType&&1==a.izootoStatus?(1==a.isChrome&&62<parseInt(a.browserVer)&&a.isSdkHttps&&(a.branding=0),a.izootoStatus=1==a.mobileAllowed?1:0):1==a.deviceType&&1==a.izootoStatus&&(a.izootoStatus=1==a.desktopAllowed?1:0)};(function(e){"object"!==typeof e?console.log("Izooto:: pixel configuration not found."):(window._izq=window._izq||[],window._izooto=new Izooto(e),window._izooto.checkAlternates(),_izooto.getIzCidPromise().then(function(a){""!=_izooto.masterDomain?window._izooto.initMaster():window._izooto.initIzooto()})["catch"](function(a){""!=_izooto.masterDomain?window._izooto.initMaster():window._izooto.initIzooto()}))})(window.izConfig);